{"expand": "renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations", "id": "13611260", "self": "https://issues.apache.org/jira/rest/api/2/issue/13611260", "key": "HADOOP-19490", "fields": {"summary": "S3A: AWS SDK 2.30+ incompatible with third party stores", "description": "Changes in the SDK related to a new AWS SDK Feature, Default integritY Protection {{https://docs.aws.amazon.com/sdkref/latest/guide/feature-dataintegrity.html}} break all intereraction with third party S3 Stores.\r\n\r\nSee {{https://github.com/aws/aws-sdk-java-v2/issues/5801}}\r\n\r\nThere are documented mechanisms to turn this off\r\n* an environment variable\r\n* a change in ~/..aws/config\r\n* a system property\r\n* looks like a new builder option, though the docs don't cover it.\r\n\r\nThat checksum builder option looks like the only viable strategy, but it will need testing. maybe even make it a property which can be enabled/disabled, with tests and docs.\r\n\r\nWhoever wants a 2.30.x feature either gets to do the fixing and testing. For 3.4.2 it'll be an older release.", "reporter": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org", "name": "stevel@apache.org", "key": "stevel@apache.org", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"}, "displayName": "Steve Loughran", "active": true, "timeZone": "Europe/London"}, "comment": {"comments": [{"self": "https://issues.apache.org/jira/rest/api/2/issue/13611260/comment/17933894", "id": "17933894", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "steveloughran opened a new pull request, #7494:\nURL: https://github.com/apache/hadoop/pull/7494\n\n   \r\n   \r\n   ### How was this patch tested?\r\n   \r\n   Dell ECS S3 store. tests fail. \r\n   \r\n   This PR is just up as a \"here is where I gave up\" PR\r\n   \r\n   ### For code changes:\r\n   \r\n   - [ ] Does the title or this PR starts with the corresponding JIRA issue id (e.g. 'HADOOP-17799. Your PR title ...')?\r\n   - [ ] Object storage: have the integration tests been executed and the endpoint declared according to the connector-specific documentation?\r\n   - [ ] If adding new dependencies to the code, are these dependencies licensed in a way that is compatible for inclusion under [ASF 2.0](http://www.apache.org/legal/resolved.html#category-a)?\r\n   - [ ] If applicable, have you updated the `LICENSE`, `LICENSE-binary`, `NOTICE-binary` files?\r\n   \r\n   \n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-03-10T13:26:59.849+0000", "updated": "2025-03-10T13:26:59.849+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13611260/comment/17934005", "id": "17934005", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=weichiu", "name": "weichiu", "key": "jojochuang", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=jojochuang&avatarId=25508", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jojochuang&avatarId=25508", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jojochuang&avatarId=25508", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jojochuang&avatarId=25508"}, "displayName": "Wei-Chiu Chuang", "active": true, "timeZone": "America/Los_Angeles"}, "body": "Pretty much all thirdparty s3 compatible stores are broken. We're fixing it in Ozone here: HDDS-12488", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=weichiu", "name": "weichiu", "key": "jojochuang", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=jojochuang&avatarId=25508", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jojochuang&avatarId=25508", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jojochuang&avatarId=25508", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jojochuang&avatarId=25508"}, "displayName": "Wei-Chiu Chuang", "active": true, "timeZone": "America/Los_Angeles"}, "created": "2025-03-10T18:53:52.446+0000", "updated": "2025-03-10T18:53:52.446+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13611260/comment/17934044", "id": "17934044", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "jojochuang commented on PR #7494:\nURL: https://github.com/apache/hadoop/pull/7494#issuecomment-2711972076\n\n   Hi Steve, this is unrelated but I noticed that the v2 s3 client has a close() method, and looking at the tutorial doc it seems to expect users to close it at the end. Looking at Hadoop S3A code I found a few test code where it is not closed. That may require your attention.\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-03-10T22:17:48.172+0000", "updated": "2025-03-10T22:17:48.172+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13611260/comment/17934210", "id": "17934210", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "hadoop-yetus commented on PR #7494:\nURL: https://github.com/apache/hadoop/pull/7494#issuecomment-2714132001\n\n   :broken_heart: **-1 overall**\r\n   \r\n   \r\n   \r\n   \r\n   \r\n   \r\n   | Vote | Subsystem | Runtime |  Logfile | Comment |\r\n   |:----:|----------:|--------:|:--------:|:-------:|\r\n   | +0 :ok: |  reexec  |   0m  0s |  |  Docker mode activated.  |\r\n   | -1 :x: |  patch  |   0m 22s |  |  https://github.com/apache/hadoop/pull/7494 does not apply to trunk. Rebase required? Wrong Branch? See https://cwiki.apache.org/confluence/display/HADOOP/How+To+Contribute for help.  |\r\n   \r\n   \r\n   | Subsystem | Report/Notes |\r\n   |----------:|:-------------|\r\n   | GITHUB PR | https://github.com/apache/hadoop/pull/7494 |\r\n   | Console output | https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-7494/1/console |\r\n   | versions | git=2.34.1 |\r\n   | Powered by | Apache Yetus 0.14.0 https://yetus.apache.org |\r\n   \r\n   \r\n   This message was automatically generated.\r\n   \r\n   \n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-03-11T13:00:34.831+0000", "updated": "2025-03-11T13:00:34.831+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13611260/comment/17934617", "id": "17934617", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "steveloughran commented on PR #7494:\nURL: https://github.com/apache/hadoop/pull/7494#issuecomment-2718762118\n\n   @jojochuang Thanks for looking for this...just reviewed the code\r\n   \r\n   We close them in `org.apache.hadoop.fs.s3a.impl.ClientManagerImpl.serviceStop()`; that does on demand creation and parallel closing of the clients...the use of the async adds overhead in startup/shutdown time without this (#6892). Any app which doesn't cache fs instances across tasks executed for the same user still takes a hit though\r\n   \r\n   \n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-03-12T18:30:23.452+0000", "updated": "2025-03-12T18:30:23.452+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13611260/comment/17940713", "id": "17940713", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "steveloughran closed pull request #7494: HADOOP-19490. S3A: AWS SDK 2.30+ incompatible with third party stores\nURL: https://github.com/apache/hadoop/pull/7494\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-04-03T14:28:43.018+0000", "updated": "2025-04-03T14:28:43.018+0000"}], "maxResults": 6, "total": 6, "startAt": 0}, "priority": {"self": "https://issues.apache.org/jira/rest/api/2/priority/3", "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg", "name": "Major", "id": "3"}, "status": {"self": "https://issues.apache.org/jira/rest/api/2/status/1", "description": "The issue is open and ready for the assignee to start work on it.", "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png", "name": "Open", "id": "1", "statusCategory": {"self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2", "id": 2, "key": "new", "colorName": "blue-gray", "name": "To Do"}}}}