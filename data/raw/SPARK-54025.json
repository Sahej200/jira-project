{"expand": "renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations", "id": "13632429", "self": "https://issues.apache.org/jira/rest/api/2/issue/13632429", "key": "SPARK-54025", "fields": {"summary": "Support recaching when a table is written via a different table implementation (V1 or V2)", "description": "When a table is cached using one table implementation (e.g., V2) and written through the other (e.g., V1), Spark may not automatically trigger recaching. As a result, the cached data can become stale even though the underlying table content has changed.\r\n\r\n\u00a0\r\n\r\nThis issue arises because the current recaching mechanism does not consistently handle cross-implementation writes. Given that the community is actively working on Data Source V2 (DSV2), many data sources are expected to have both V1 and V2 implementations for a period of time, making this issue more likely to occur in practice.\r\n\r\n\u00a0\r\n\r\n*Proposed Fix:*\r\n\r\nEnhance the cache invalidation logic to detect writes that occur through a different table implementation (V1 \u2194 V2) and trigger recaching accordingly.\r\n\r\n\u00a0\r\n\r\n{*}Expected Outcome:{*}{*}{*}\r\n * Cached data remains up to date when a table is written through either V1 or V2 paths.\r\n\r\n * Both logical-plan-based and file-path-based recaching continue to work as expected for V1&V2 connectors\r\n\r\n\u00a0", "reporter": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=Gengliang.Wang", "name": "Gengliang.Wang", "key": "gengliang.wang", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=gengliang.wang&avatarId=36477", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gengliang.wang&avatarId=36477", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gengliang.wang&avatarId=36477", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gengliang.wang&avatarId=36477"}, "displayName": "Gengliang Wang", "active": true, "timeZone": "Asia/Hong_Kong"}, "comment": {"comments": [{"self": "https://issues.apache.org/jira/rest/api/2/issue/13632429/comment/18032869", "id": "18032869", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=Gengliang.Wang", "name": "Gengliang.Wang", "key": "gengliang.wang", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=gengliang.wang&avatarId=36477", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gengliang.wang&avatarId=36477", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gengliang.wang&avatarId=36477", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gengliang.wang&avatarId=36477"}, "displayName": "Gengliang Wang", "active": true, "timeZone": "Asia/Hong_Kong"}, "body": "cc [~vli-databricks]\u00a0", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=Gengliang.Wang", "name": "Gengliang.Wang", "key": "gengliang.wang", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=gengliang.wang&avatarId=36477", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gengliang.wang&avatarId=36477", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gengliang.wang&avatarId=36477", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gengliang.wang&avatarId=36477"}, "displayName": "Gengliang Wang", "active": true, "timeZone": "Asia/Hong_Kong"}, "created": "2025-10-24T20:25:31.062+0000", "updated": "2025-10-24T20:25:31.062+0000"}], "maxResults": 1, "total": 1, "startAt": 0}, "priority": {"self": "https://issues.apache.org/jira/rest/api/2/priority/3", "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg", "name": "Major", "id": "3"}, "status": {"self": "https://issues.apache.org/jira/rest/api/2/status/1", "description": "The issue is open and ready for the assignee to start work on it.", "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png", "name": "Open", "id": "1", "statusCategory": {"self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2", "id": 2, "key": "new", "colorName": "blue-gray", "name": "To Do"}}}}