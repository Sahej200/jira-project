{"expand": "renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations", "id": "13624988", "self": "https://issues.apache.org/jira/rest/api/2/issue/13624988", "key": "KAFKA-19563", "fields": {"summary": "Separate the controller config and admin config when add controller", "description": "Currently, when adding a controller via CLI, we have to run:\r\n{code:java}\r\n$ bin/kafka-metadata-quorum.sh --command-config config/controller.properties --bootstrap-server localhost:9092 add-controller\r\n\r\nor\r\n\r\n$ bin/kafka-metadata-quorum.sh --command-config config/controller.properties --bootstrap-controller localhost:9093 add-controller{code}\r\nThe controller.properties file is expected to be the controller property file that to be added. But if we want to pass configs to the admin client, what can we do?\r\n{code:java}\r\nbin/kafka-metadata-quorum.sh --help\r\nusage: kafka-metadata-quorum [-h] [--command-config COMMAND_CONFIG] (--bootstrap-server BOOTSTRAP_SERVER | --bootstrap-controller BOOTSTRAP_CONTROLLER)\r\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0{describe,add-controller,remove-controller} ...This tool describes kraft metadata quorum status.\r\n\r\n...\r\n\r\n --command-config COMMAND_CONFIG\r\n\u00a0 \u00a0Property file containing configs to be passed to Admin Client. \u00a0For add-controller, \u00a0the file is used to specify the controller properties as well.{code}\r\nAs this help output said, the \"--command-config\" can pass configs to admin client, but when add controller, it is also used as controller property file.\r\n\r\nFor example, we want to set the \"client-id\" to the admin client, when doing the add-controller, we have to add one more line in the controller.properties file:\r\n{code:java}\r\nclient.id=test-admin-client{code}\r\nThis is not ideal to ask users to mix the client config into the controller config.\r\n\r\n\u00a0\r\n\r\nMaybe we can consider to add one more \"--add-controller-command-config\" for add controller use, or ask users to explicitly pass the controller id, dir UUID, ... like remove-controller did, but the controller advertised listener value might be a little complicated for users.", "reporter": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=showuon", "name": "showuon", "key": "showuon", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=showuon&avatarId=42594", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=showuon&avatarId=42594", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=showuon&avatarId=42594", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=showuon&avatarId=42594"}, "displayName": "Luke Chen", "active": true, "timeZone": "Etc/UTC"}, "comment": {"comments": [{"self": "https://issues.apache.org/jira/rest/api/2/issue/13624988/comment/18010852", "id": "18010852", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=showuon", "name": "showuon", "key": "showuon", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=showuon&avatarId=42594", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=showuon&avatarId=42594", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=showuon&avatarId=42594", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=showuon&avatarId=42594"}, "displayName": "Luke Chen", "active": true, "timeZone": "Etc/UTC"}, "body": "Improve the doc first: https://github.com/apache/kafka/pull/20261", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=showuon", "name": "showuon", "key": "showuon", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=showuon&avatarId=42594", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=showuon&avatarId=42594", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=showuon&avatarId=42594", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=showuon&avatarId=42594"}, "displayName": "Luke Chen", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-07-30T08:24:08.740+0000", "updated": "2025-07-30T08:24:08.740+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13624988/comment/18010855", "id": "18010855", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=isding_l", "name": "isding_l", "key": "JIRAUSER301111", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "Lan Ding", "active": true, "timeZone": "Etc/UTC"}, "body": "Hi [~showuon], if you are not working on this, may i take it. Thanks.", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=isding_l", "name": "isding_l", "key": "JIRAUSER301111", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "Lan Ding", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-07-30T08:36:33.850+0000", "updated": "2025-07-30T08:36:33.850+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13624988/comment/18010861", "id": "18010861", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=showuon", "name": "showuon", "key": "showuon", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=showuon&avatarId=42594", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=showuon&avatarId=42594", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=showuon&avatarId=42594", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=showuon&avatarId=42594"}, "displayName": "Luke Chen", "active": true, "timeZone": "Etc/UTC"}, "body": "Go take it [~isding_l] ! It needs a KIP, for your information.", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=showuon", "name": "showuon", "key": "showuon", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=showuon&avatarId=42594", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=showuon&avatarId=42594", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=showuon&avatarId=42594", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=showuon&avatarId=42594"}, "displayName": "Luke Chen", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-07-30T09:02:32.492+0000", "updated": "2025-07-30T09:02:32.492+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13624988/comment/18011092", "id": "18011092", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=chia7712", "name": "chia7712", "key": "chia7712", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=chia7712&avatarId=46815", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chia7712&avatarId=46815", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chia7712&avatarId=46815", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chia7712&avatarId=46815"}, "displayName": "Chia-Ping Tsai", "active": true, "timeZone": "Asia/Taipei"}, "body": "I filed KAFKA-18775 to simplify the command line, which can add controller or remove controller \"without\" controller.properties. That is a bit conflicted to this jira, so it would be useful if you could take a look at KAFKA-18775", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=chia7712", "name": "chia7712", "key": "chia7712", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=chia7712&avatarId=46815", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chia7712&avatarId=46815", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chia7712&avatarId=46815", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chia7712&avatarId=46815"}, "displayName": "Chia-Ping Tsai", "active": true, "timeZone": "Asia/Taipei"}, "created": "2025-07-31T06:06:25.600+0000", "updated": "2025-07-31T06:06:25.600+0000"}], "maxResults": 4, "total": 4, "startAt": 0}, "priority": {"self": "https://issues.apache.org/jira/rest/api/2/priority/3", "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg", "name": "Major", "id": "3"}, "status": {"self": "https://issues.apache.org/jira/rest/api/2/status/5", "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.", "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png", "name": "Resolved", "id": "5", "statusCategory": {"self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3", "id": 3, "key": "done", "colorName": "green", "name": "Done"}}}}