{"expand": "renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations", "id": "13626203", "self": "https://issues.apache.org/jira/rest/api/2/issue/13626203", "key": "KAFKA-19601", "fields": {"summary": "always disallow min.insync.replicas at the broker level", "description": "In [https://github.com/apache/kafka/pull/17952], if ELR is enabled, we (1) disallow min.insync.replicas at the broker level; (2) automatically add min.insync.replicas at the cluster level, if not present; (3) disallow removing min.insync.replicas at the cluster level. \u00a0The reason for this is that if brokers disagree about which partitions are under min ISR, it breaks the KIP-966 replication invariants.\r\n\r\nHowever, even if ELR is not enabled, it's bad to have different min.insync.replicas on different brokers since if a leader is moved to a different broker, it will behave differently on the min.insync.replicas semantic. So, it's probably better to always enforce the above regardless whether ELR is enabled or not. Similarly, we probably want to do the same for at least unclean.leader.election.enable.\r\n\r\nSince this is a public facing change, it requires a KIP.", "reporter": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=junrao", "name": "junrao", "key": "junrao", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "Jun Rao", "active": true, "timeZone": "America/Los_Angeles"}, "comment": {"comments": [{"self": "https://issues.apache.org/jira/rest/api/2/issue/13626203/comment/18013512", "id": "18013512", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=yung", "name": "yung", "key": "JIRAUSER307316", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34044", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34044", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34044", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34044"}, "displayName": "Jhen-Yung Hsu", "active": true, "timeZone": "Etc/UTC"}, "body": "I'm working on this, thanks :)", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=yung", "name": "yung", "key": "JIRAUSER307316", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34044", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34044", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34044", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34044"}, "displayName": "Jhen-Yung Hsu", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-08-12T19:43:19.962+0000", "updated": "2025-08-12T19:43:19.962+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13626203/comment/18013517", "id": "18013517", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=junrao", "name": "junrao", "key": "junrao", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "Jun Rao", "active": true, "timeZone": "America/Los_Angeles"}, "body": "Thanks, [~yung] !", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=junrao", "name": "junrao", "key": "junrao", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "Jun Rao", "active": true, "timeZone": "America/Los_Angeles"}, "created": "2025-08-12T19:52:32.083+0000", "updated": "2025-08-12T19:52:32.083+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13626203/comment/18013671", "id": "18013671", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=chia7712", "name": "chia7712", "key": "chia7712", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=chia7712&avatarId=46815", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chia7712&avatarId=46815", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chia7712&avatarId=46815", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chia7712&avatarId=46815"}, "displayName": "Chia-Ping Tsai", "active": true, "timeZone": "Asia/Taipei"}, "body": "Nice idea, Perhaps we could do the same for `message.max.bytes`, `log.message.timestamp.type` and `log.cleanup.policy` as well. Those configs should be set only at topic-level and cluster-level.", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=chia7712", "name": "chia7712", "key": "chia7712", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=chia7712&avatarId=46815", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chia7712&avatarId=46815", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chia7712&avatarId=46815", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chia7712&avatarId=46815"}, "displayName": "Chia-Ping Tsai", "active": true, "timeZone": "Asia/Taipei"}, "created": "2025-08-13T12:05:41.587+0000", "updated": "2025-08-13T12:05:41.587+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13626203/comment/18013965", "id": "18013965", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=yung", "name": "yung", "key": "JIRAUSER307316", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34044", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34044", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34044", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34044"}, "displayName": "Jhen-Yung Hsu", "active": true, "timeZone": "Etc/UTC"}, "body": "Sure :) I\u2019ll handle those configs as well and try to come up with a flexible way, since there could be more later.", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=yung", "name": "yung", "key": "JIRAUSER307316", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34044", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34044", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34044", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34044"}, "displayName": "Jhen-Yung Hsu", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-08-14T17:19:49.965+0000", "updated": "2025-08-14T17:19:49.965+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13626203/comment/18017729", "id": "18017729", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=yung", "name": "yung", "key": "JIRAUSER307316", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34044", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34044", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34044", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34044"}, "displayName": "Jhen-Yung Hsu", "active": true, "timeZone": "Etc/UTC"}, "body": "I've started the discussion thread: [https://lists.apache.org/thread/xt55os99ssk1ctpwb739zzk0vcn69b3f]\r\nThanks for waiting, I\u2019d love to hear your thoughts!", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=yung", "name": "yung", "key": "JIRAUSER307316", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34044", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34044", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34044", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34044"}, "displayName": "Jhen-Yung Hsu", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-09-02T17:02:16.708+0000", "updated": "2025-09-02T17:02:16.708+0000"}], "maxResults": 5, "total": 5, "startAt": 0}, "priority": {"self": "https://issues.apache.org/jira/rest/api/2/priority/3", "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg", "name": "Major", "id": "3"}, "status": {"self": "https://issues.apache.org/jira/rest/api/2/status/1", "description": "The issue is open and ready for the assignee to start work on it.", "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png", "name": "Open", "id": "1", "statusCategory": {"self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2", "id": 2, "key": "new", "colorName": "blue-gray", "name": "To Do"}}}}