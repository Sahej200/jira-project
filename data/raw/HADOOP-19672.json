{"expand": "renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations", "id": "13627795", "self": "https://issues.apache.org/jira/rest/api/2/issue/13627795", "key": "HADOOP-19672", "fields": {"summary": "ABFS: Network Error-Based Client Switchover: Apache to JDK (continuous failure))", "description": null, "reporter": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=bhattmanish98", "name": "bhattmanish98", "key": "JIRAUSER306911", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "Manish Bhatt", "active": true, "timeZone": "Asia/Kolkata"}, "comment": {"comments": [{"self": "https://issues.apache.org/jira/rest/api/2/issue/13627795/comment/18020384", "id": "18020384", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "bhattmanish98 opened a new pull request, #7967:\nURL: https://github.com/apache/hadoop/pull/7967\n\n   JIRA \u2013 https://issues.apache.org/jira/browse/HADOOP-19672\r\n   \r\n   In case of a network error while using the Apache client, we allow the client to switch over from Apache to JDK. This network fallback occurs in two scenarios:\r\n   \r\n   1. During file system initialization \u2013 When warming up the cache, if no connection is created (indicating an issue with the Apache client), the system will fall back to the JDK.\r\n   2. During a network call \u2013 If an I/O or Unknown Host exception occurs for three consecutive retries, the system will fall back to the JDK.\r\n   \r\n   This fallback is applied at the JVM level, so all file system calls will use the JDK client once the switch occurs.\r\n   \r\n   There is also a possibility of recovery. During cache warmup, if connections are successfully created using the Apache client, the system will automatically switch back to the Apache client.\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-09-15T14:55:52.052+0000", "updated": "2025-09-15T14:55:52.052+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13627795/comment/18020418", "id": "18020418", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "hadoop-yetus commented on PR #7967:\nURL: https://github.com/apache/hadoop/pull/7967#issuecomment-3293191749\n\n   :confetti_ball: **+1 overall**\r\n   \r\n   \r\n   \r\n   \r\n   \r\n   \r\n   | Vote | Subsystem | Runtime |  Logfile | Comment |\r\n   |:----:|----------:|--------:|:--------:|:-------:|\r\n   | +0 :ok: |  reexec  |   0m 36s |  |  Docker mode activated.  |\r\n   |||| _ Prechecks _ |\r\n   | +1 :green_heart: |  dupname  |   0m  0s |  |  No case conflicting files found.  |\r\n   | +0 :ok: |  codespell  |   0m  1s |  |  codespell was not available.  |\r\n   | +0 :ok: |  detsecrets  |   0m  1s |  |  detect-secrets was not available.  |\r\n   | +1 :green_heart: |  @author  |   0m  0s |  |  The patch does not contain any @author tags.  |\r\n   | +1 :green_heart: |  test4tests  |   0m  0s |  |  The patch appears to include 3 new or modified test files.  |\r\n   |||| _ trunk Compile Tests _ |\r\n   | +1 :green_heart: |  mvninstall  |  57m 10s |  |  trunk passed  |\r\n   | +1 :green_heart: |  compile  |   0m 43s |  |  trunk passed with JDK Ubuntu-11.0.27+6-post-Ubuntu-0ubuntu120.04  |\r\n   | +1 :green_heart: |  compile  |   0m 39s |  |  trunk passed with JDK Private Build-1.8.0_452-8u452-ga~us1-0ubuntu1~20.04-b09  |\r\n   | +1 :green_heart: |  checkstyle  |   0m 32s |  |  trunk passed  |\r\n   | +1 :green_heart: |  mvnsite  |   0m 46s |  |  trunk passed  |\r\n   | +1 :green_heart: |  javadoc  |   0m 43s |  |  trunk passed with JDK Ubuntu-11.0.27+6-post-Ubuntu-0ubuntu120.04  |\r\n   | +1 :green_heart: |  javadoc  |   0m 34s |  |  trunk passed with JDK Private Build-1.8.0_452-8u452-ga~us1-0ubuntu1~20.04-b09  |\r\n   | +1 :green_heart: |  spotbugs  |   1m 12s |  |  trunk passed  |\r\n   | +1 :green_heart: |  shadedclient  |  35m 50s |  |  branch has no errors when building and testing our client artifacts.  |\r\n   |||| _ Patch Compile Tests _ |\r\n   | +1 :green_heart: |  mvninstall  |   0m 32s |  |  the patch passed  |\r\n   | +1 :green_heart: |  compile  |   0m 34s |  |  the patch passed with JDK Ubuntu-11.0.27+6-post-Ubuntu-0ubuntu120.04  |\r\n   | +1 :green_heart: |  javac  |   0m 34s |  |  the patch passed  |\r\n   | +1 :green_heart: |  compile  |   0m 30s |  |  the patch passed with JDK Private Build-1.8.0_452-8u452-ga~us1-0ubuntu1~20.04-b09  |\r\n   | +1 :green_heart: |  javac  |   0m 30s |  |  the patch passed  |\r\n   | +1 :green_heart: |  blanks  |   0m  0s |  |  The patch has no blanks issues.  |\r\n   | -0 :warning: |  checkstyle  |   0m 21s | [/results-checkstyle-hadoop-tools_hadoop-azure.txt](https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-7967/1/artifact/out/results-checkstyle-hadoop-tools_hadoop-azure.txt) |  hadoop-tools/hadoop-azure: The patch generated 1 new + 2 unchanged - 0 fixed = 3 total (was 2)  |\r\n   | +1 :green_heart: |  mvnsite  |   0m 33s |  |  the patch passed  |\r\n   | +1 :green_heart: |  javadoc  |   0m 29s |  |  the patch passed with JDK Ubuntu-11.0.27+6-post-Ubuntu-0ubuntu120.04  |\r\n   | +1 :green_heart: |  javadoc  |   0m 27s |  |  the patch passed with JDK Private Build-1.8.0_452-8u452-ga~us1-0ubuntu1~20.04-b09  |\r\n   | +1 :green_heart: |  spotbugs  |   1m 10s |  |  the patch passed  |\r\n   | +1 :green_heart: |  shadedclient  |  35m 16s |  |  patch has no errors when building and testing our client artifacts.  |\r\n   |||| _ Other Tests _ |\r\n   | +1 :green_heart: |  unit  |   2m 59s |  |  hadoop-azure in the patch passed.  |\r\n   | +1 :green_heart: |  asflicense  |   0m 41s |  |  The patch does not generate ASF License warnings.  |\r\n   |  |   | 144m 47s |  |  |\r\n   \r\n   \r\n   | Subsystem | Report/Notes |\r\n   |----------:|:-------------|\r\n   | Docker | ClientAPI=1.51 ServerAPI=1.51 base: https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-7967/1/artifact/out/Dockerfile |\r\n   | GITHUB PR | https://github.com/apache/hadoop/pull/7967 |\r\n   | Optional Tests | dupname asflicense compile javac javadoc mvninstall mvnsite unit shadedclient spotbugs checkstyle codespell detsecrets |\r\n   | uname | Linux b7ef8b2a88ce 5.15.0-143-generic #153-Ubuntu SMP Fri Jun 13 19:10:45 UTC 2025 x86_64 x86_64 x86_64 GNU/Linux |\r\n   | Build tool | maven |\r\n   | Personality | dev-support/bin/hadoop.sh |\r\n   | git revision | trunk / 1dad672faf42fbfb0ada2a95456b922a50b2becf |\r\n   | Default Java | Private Build-1.8.0_452-8u452-ga~us1-0ubuntu1~20.04-b09 |\r\n   | Multi-JDK versions | /usr/lib/jvm/java-11-openjdk-amd64:Ubuntu-11.0.27+6-post-Ubuntu-0ubuntu120.04 /usr/lib/jvm/java-8-openjdk-amd64:Private Build-1.8.0_452-8u452-ga~us1-0ubuntu1~20.04-b09 |\r\n   |  Test Results | https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-7967/1/testReport/ |\r\n   | Max. process+thread count | 693 (vs. ulimit of 5500) |\r\n   | modules | C: hadoop-tools/hadoop-azure U: hadoop-tools/hadoop-azure |\r\n   | Console output | https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-7967/1/console |\r\n   | versions | git=2.25.1 maven=3.6.3 spotbugs=4.2.2 |\r\n   | Powered by | Apache Yetus 0.14.0 https://yetus.apache.org |\r\n   \r\n   \r\n   This message was automatically generated.\r\n   \r\n   \n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-09-15T17:22:46.350+0000", "updated": "2025-09-15T17:22:46.350+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13627795/comment/18020465", "id": "18020465", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "hadoop-yetus commented on PR #7967:\nURL: https://github.com/apache/hadoop/pull/7967#issuecomment-3293931499\n\n   :confetti_ball: **+1 overall**\r\n   \r\n   \r\n   \r\n   \r\n   \r\n   \r\n   | Vote | Subsystem | Runtime |  Logfile | Comment |\r\n   |:----:|----------:|--------:|:--------:|:-------:|\r\n   | +0 :ok: |  reexec  |  15m 49s |  |  Docker mode activated.  |\r\n   |||| _ Prechecks _ |\r\n   | +1 :green_heart: |  dupname  |   0m  0s |  |  No case conflicting files found.  |\r\n   | +0 :ok: |  codespell  |   0m  0s |  |  codespell was not available.  |\r\n   | +0 :ok: |  detsecrets  |   0m  0s |  |  detect-secrets was not available.  |\r\n   | +1 :green_heart: |  @author  |   0m  0s |  |  The patch does not contain any @author tags.  |\r\n   | +1 :green_heart: |  test4tests  |   0m  0s |  |  The patch appears to include 3 new or modified test files.  |\r\n   |||| _ trunk Compile Tests _ |\r\n   | +1 :green_heart: |  mvninstall  |  50m 45s |  |  trunk passed  |\r\n   | +1 :green_heart: |  compile  |   0m 44s |  |  trunk passed with JDK Ubuntu-11.0.27+6-post-Ubuntu-0ubuntu120.04  |\r\n   | +1 :green_heart: |  compile  |   0m 40s |  |  trunk passed with JDK Private Build-1.8.0_452-8u452-ga~us1-0ubuntu1~20.04-b09  |\r\n   | +1 :green_heart: |  checkstyle  |   0m 35s |  |  trunk passed  |\r\n   | +1 :green_heart: |  mvnsite  |   0m 45s |  |  trunk passed  |\r\n   | +1 :green_heart: |  javadoc  |   0m 43s |  |  trunk passed with JDK Ubuntu-11.0.27+6-post-Ubuntu-0ubuntu120.04  |\r\n   | +1 :green_heart: |  javadoc  |   0m 38s |  |  trunk passed with JDK Private Build-1.8.0_452-8u452-ga~us1-0ubuntu1~20.04-b09  |\r\n   | +1 :green_heart: |  spotbugs  |   1m 11s |  |  trunk passed  |\r\n   | +1 :green_heart: |  shadedclient  |  35m 48s |  |  branch has no errors when building and testing our client artifacts.  |\r\n   |||| _ Patch Compile Tests _ |\r\n   | +1 :green_heart: |  mvninstall  |   0m 32s |  |  the patch passed  |\r\n   | +1 :green_heart: |  compile  |   0m 34s |  |  the patch passed with JDK Ubuntu-11.0.27+6-post-Ubuntu-0ubuntu120.04  |\r\n   | +1 :green_heart: |  javac  |   0m 34s |  |  the patch passed  |\r\n   | +1 :green_heart: |  compile  |   0m 30s |  |  the patch passed with JDK Private Build-1.8.0_452-8u452-ga~us1-0ubuntu1~20.04-b09  |\r\n   | +1 :green_heart: |  javac  |   0m 30s |  |  the patch passed  |\r\n   | +1 :green_heart: |  blanks  |   0m  0s |  |  The patch has no blanks issues.  |\r\n   | +1 :green_heart: |  checkstyle  |   0m 21s |  |  the patch passed  |\r\n   | +1 :green_heart: |  mvnsite  |   0m 33s |  |  the patch passed  |\r\n   | +1 :green_heart: |  javadoc  |   0m 29s |  |  the patch passed with JDK Ubuntu-11.0.27+6-post-Ubuntu-0ubuntu120.04  |\r\n   | +1 :green_heart: |  javadoc  |   0m 27s |  |  the patch passed with JDK Private Build-1.8.0_452-8u452-ga~us1-0ubuntu1~20.04-b09  |\r\n   | +1 :green_heart: |  spotbugs  |   1m  9s |  |  the patch passed  |\r\n   | +1 :green_heart: |  shadedclient  |  39m 10s |  |  patch has no errors when building and testing our client artifacts.  |\r\n   |||| _ Other Tests _ |\r\n   | +1 :green_heart: |  unit  |   3m  6s |  |  hadoop-azure in the patch passed.  |\r\n   | +1 :green_heart: |  asflicense  |   0m 38s |  |  The patch does not generate ASF License warnings.  |\r\n   |  |   | 156m 38s |  |  |\r\n   \r\n   \r\n   | Subsystem | Report/Notes |\r\n   |----------:|:-------------|\r\n   | Docker | ClientAPI=1.51 ServerAPI=1.51 base: https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-7967/2/artifact/out/Dockerfile |\r\n   | GITHUB PR | https://github.com/apache/hadoop/pull/7967 |\r\n   | Optional Tests | dupname asflicense compile javac javadoc mvninstall mvnsite unit shadedclient spotbugs checkstyle codespell detsecrets |\r\n   | uname | Linux f1f4dba85ce3 5.15.0-143-generic #153-Ubuntu SMP Fri Jun 13 19:10:45 UTC 2025 x86_64 x86_64 x86_64 GNU/Linux |\r\n   | Build tool | maven |\r\n   | Personality | dev-support/bin/hadoop.sh |\r\n   | git revision | trunk / 6faa4c9c8ad8083e0a636b6439146a24c66c0ce3 |\r\n   | Default Java | Private Build-1.8.0_452-8u452-ga~us1-0ubuntu1~20.04-b09 |\r\n   | Multi-JDK versions | /usr/lib/jvm/java-11-openjdk-amd64:Ubuntu-11.0.27+6-post-Ubuntu-0ubuntu120.04 /usr/lib/jvm/java-8-openjdk-amd64:Private Build-1.8.0_452-8u452-ga~us1-0ubuntu1~20.04-b09 |\r\n   |  Test Results | https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-7967/2/testReport/ |\r\n   | Max. process+thread count | 555 (vs. ulimit of 5500) |\r\n   | modules | C: hadoop-tools/hadoop-azure U: hadoop-tools/hadoop-azure |\r\n   | Console output | https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-7967/2/console |\r\n   | versions | git=2.25.1 maven=3.6.3 spotbugs=4.2.2 |\r\n   | Powered by | Apache Yetus 0.14.0 https://yetus.apache.org |\r\n   \r\n   \r\n   This message was automatically generated.\r\n   \r\n   \n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-09-15T20:58:18.410+0000", "updated": "2025-09-15T20:58:18.410+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13627795/comment/18023064", "id": "18023064", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "anmolanmol1234 commented on code in PR #7967:\nURL: https://github.com/apache/hadoop/pull/7967#discussion_r2381728892\n\n\n##########\nhadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsApacheHttpClient.java:\n##########\n@@ -73,18 +80,21 @@ static boolean usable() {\n   }\n \n   AbfsApacheHttpClient(DelegatingSSLSocketFactory delegatingSSLSocketFactory,\n-      final AbfsConfiguration abfsConfiguration, final KeepAliveCache keepAliveCache,\n-      URL baseUrl) {\n+      final AbfsConfiguration abfsConfiguration,\n+      final KeepAliveCache keepAliveCache,\n+      URL baseUrl,\n+      final boolean isCacheWarmupNeeded) {\n     final AbfsConnectionManager connMgr = new AbfsConnectionManager(\n         createSocketFactoryRegistry(\n             new SSLConnectionSocketFactory(delegatingSSLSocketFactory,\n                 getDefaultHostnameVerifier())),\n         new AbfsHttpClientConnectionFactory(), keepAliveCache,\n-        abfsConfiguration, baseUrl);\n+        abfsConfiguration, baseUrl, isCacheWarmupNeeded);\n     final HttpClientBuilder builder = HttpClients.custom();\n     builder.setConnectionManager(connMgr)\n         .setRequestExecutor(\n-            new AbfsManagedHttpRequestExecutor(abfsConfiguration.getHttpReadTimeout()))\n+            new AbfsManagedHttpRequestExecutor(\n\nReview Comment:\n   As we were discussing last time, if we keep it to read timeout the 100 continue timeout would become 30 seconds, this should be another config for 100 continue timeout\n\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-09-26T09:54:12.608+0000", "updated": "2025-09-26T09:54:12.608+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13627795/comment/18023066", "id": "18023066", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "anmolanmol1234 commented on code in PR #7967:\nURL: https://github.com/apache/hadoop/pull/7967#discussion_r2381745959\n\n\n##########\nhadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsClient.java:\n##########\n@@ -254,7 +259,8 @@ private AbfsClient(final URL baseUrl,\n \n       abfsApacheHttpClient = new AbfsApacheHttpClient(\n           DelegatingSSLSocketFactory.getDefaultFactory(),\n-          abfsConfiguration, keepAliveCache, baseUrl);\n+          abfsConfiguration, keepAliveCache, baseUrl,\n+          abfsConfiguration.getFsConfiguredServiceType() == abfsServiceType);\n\nReview Comment:\n   Can you add some comments around this change as to how it would affect the need for cache warmup\n\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-09-26T09:57:59.745+0000", "updated": "2025-09-26T09:57:59.745+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13627795/comment/18023070", "id": "18023070", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "anmolanmol1234 commented on code in PR #7967:\nURL: https://github.com/apache/hadoop/pull/7967#discussion_r2381793492\n\n\n##########\nhadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsConnectionManager.java:\n##########\n@@ -91,26 +92,34 @@ class AbfsConnectionManager implements HttpClientConnectionManager {\n   /**\n    * The base host for which connections are managed.\n    */\n-  private HttpHost baseHost;\n+  private final HttpHost baseHost;\n \n   AbfsConnectionManager(Registry<ConnectionSocketFactory> socketFactoryRegistry,\n-      AbfsHttpClientConnectionFactory connectionFactory, KeepAliveCache kac,\n-      final AbfsConfiguration abfsConfiguration, final URL baseUrl) {\n+      AbfsHttpClientConnectionFactory connectionFactory,\n+      KeepAliveCache kac,\n+      final AbfsConfiguration abfsConfiguration,\n+      final URL baseUrl,\n+      final boolean isCacheWarmupNeeded) {\n     this.httpConnectionFactory = connectionFactory;\n     this.kac = kac;\n     this.connectionOperator = new DefaultHttpClientConnectionOperator(\n         socketFactoryRegistry, null, null);\n     this.abfsConfiguration = abfsConfiguration;\n-    if (abfsConfiguration.getApacheCacheWarmupCount() > 0\n+    this.baseHost = new HttpHost(baseUrl.getHost(),\n+        baseUrl.getDefaultPort(), baseUrl.getProtocol());\n+    if (isCacheWarmupNeeded && abfsConfiguration.getApacheCacheWarmupCount() > 0\n         && kac.getFixedThreadPool() != null) {\n       // Warm up the cache with connections.\n       LOG.debug(\"Warming up the KeepAliveCache with {} connections\",\n           abfsConfiguration.getApacheCacheWarmupCount());\n-      this.baseHost = new HttpHost(baseUrl.getHost(),\n-          baseUrl.getDefaultPort(), baseUrl.getProtocol());\n       HttpRoute route = new HttpRoute(baseHost, null, true);\n-      cacheExtraConnection(route,\n+      int totalConnectionsCreated = cacheExtraConnection(route,\n           abfsConfiguration.getApacheCacheWarmupCount());\n+      if (totalConnectionsCreated == 0) {\n\nReview Comment:\n   even if we fail or catch rejected exception for any one of the tasks we want to register fallback as the successfully submitted tasks might have increased the count of totalConnectionsCreated\r\n   \n\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-09-26T10:08:30.641+0000", "updated": "2025-09-26T10:08:30.641+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13627795/comment/18023071", "id": "18023071", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "anmolanmol1234 commented on code in PR #7967:\nURL: https://github.com/apache/hadoop/pull/7967#discussion_r2381815558\n\n\n##########\nhadoop-tools/hadoop-azure/src/test/java/org/apache/hadoop/fs/azurebfs/services/ITestApacheClientConnectionPool.java:\n##########\n@@ -118,6 +121,38 @@ public void testConnectedConnectionLogging() throws Exception {\n         .isEqualTo(4);\n   }\n \n+  /**\n+   * Test to verify that the ApacheHttpClient falls back to JDK client\n+   * when connection warmup fails.\n+   * This test is applicable only for ApacheHttpClient.\n+   */\n+  @Test\n+  public void testApacheClientFallbackDuringConnectionWarmup()\n+      throws Exception {\n+    try (KeepAliveCache keepAliveCache = new KeepAliveCache(\n+        new AbfsConfiguration(new Configuration(), EMPTY_STRING))) {\n+      // Create a connection manager with invalid URL to force fallback to JDK client\n+      // during connection warmup.\n+      // This is to simulate failure during connection warmup in the connection manager.\n+      // The invalid URL will cause the connection manager to fail to create connections\n+      // during warmup, forcing it to fall back to JDK client.\n+      final AbfsConnectionManager connMgr = new AbfsConnectionManager(\n+          RegistryBuilder.<ConnectionSocketFactory>create()\n+              .register(HTTPS_SCHEME, new SSLConnectionSocketFactory(\n+                  DelegatingSSLSocketFactory.getDefaultFactory(),\n+                  getDefaultHostnameVerifier()))\n+              .build(),\n+          new AbfsHttpClientConnectionFactory(), keepAliveCache,\n+          new AbfsConfiguration(new Configuration(), EMPTY_STRING),\n+          new URL(\"https://test.com\"), true);\n+\n+      Assertions.assertThat(AbfsApacheHttpClient.usable())\n+          .describedAs(\"Apache HttpClient should be not usable\")\n\nReview Comment:\n   Can you make one http call and validate now jdk is being used, user agent can be used for validation\n\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-09-26T10:13:16.449+0000", "updated": "2025-09-26T10:13:16.449+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13627795/comment/18023084", "id": "18023084", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "anujmodi2021 commented on code in PR #7967:\nURL: https://github.com/apache/hadoop/pull/7967#discussion_r2382005373\n\n\n##########\nhadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsClientHandler.java:\n##########\n@@ -68,13 +68,13 @@ public AbfsClientHandler(final URL baseUrl,\n       final SASTokenProvider sasTokenProvider,\n       final EncryptionContextProvider encryptionContextProvider,\n       final AbfsClientContext abfsClientContext) throws IOException {\n+    initServiceType(abfsConfiguration);\n\nReview Comment:\n   Why this change?\n\n\n\n##########\nhadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsBlobClient.java:\n##########\n@@ -188,7 +189,7 @@ public AbfsBlobClient(final URL baseUrl,\n       final EncryptionContextProvider encryptionContextProvider,\n       final AbfsClientContext abfsClientContext) throws IOException {\n     super(baseUrl, sharedKeyCredentials, abfsConfiguration, tokenProvider,\n-        encryptionContextProvider, abfsClientContext);\n+        encryptionContextProvider, abfsClientContext, AbfsServiceType.BLOB);\n\nReview Comment:\n   Why this change?\n\n\n\n##########\nhadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsApacheHttpClient.java:\n##########\n@@ -73,18 +80,21 @@ static boolean usable() {\n   }\n \n   AbfsApacheHttpClient(DelegatingSSLSocketFactory delegatingSSLSocketFactory,\n-      final AbfsConfiguration abfsConfiguration, final KeepAliveCache keepAliveCache,\n-      URL baseUrl) {\n+      final AbfsConfiguration abfsConfiguration,\n+      final KeepAliveCache keepAliveCache,\n+      URL baseUrl,\n+      final boolean isCacheWarmupNeeded) {\n     final AbfsConnectionManager connMgr = new AbfsConnectionManager(\n         createSocketFactoryRegistry(\n             new SSLConnectionSocketFactory(delegatingSSLSocketFactory,\n                 getDefaultHostnameVerifier())),\n         new AbfsHttpClientConnectionFactory(), keepAliveCache,\n-        abfsConfiguration, baseUrl);\n+        abfsConfiguration, baseUrl, isCacheWarmupNeeded);\n     final HttpClientBuilder builder = HttpClients.custom();\n     builder.setConnectionManager(connMgr)\n         .setRequestExecutor(\n-            new AbfsManagedHttpRequestExecutor(abfsConfiguration.getHttpReadTimeout()))\n+            new AbfsManagedHttpRequestExecutor(\n\nReview Comment:\n   +1\n\n\n\n##########\nhadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsClient.java:\n##########\n@@ -254,7 +259,8 @@ private AbfsClient(final URL baseUrl,\n \n       abfsApacheHttpClient = new AbfsApacheHttpClient(\n           DelegatingSSLSocketFactory.getDefaultFactory(),\n-          abfsConfiguration, keepAliveCache, baseUrl);\n+          abfsConfiguration, keepAliveCache, baseUrl,\n+          abfsConfiguration.getFsConfiguredServiceType() == abfsServiceType);\n\nReview Comment:\n   +1\r\n   What are we trying to achieve here?\n\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-09-26T11:06:00.544+0000", "updated": "2025-09-26T11:06:00.544+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13627795/comment/18023086", "id": "18023086", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "anmolanmol1234 commented on code in PR #7967:\nURL: https://github.com/apache/hadoop/pull/7967#discussion_r2381793492\n\n\n##########\nhadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsConnectionManager.java:\n##########\n@@ -91,26 +92,34 @@ class AbfsConnectionManager implements HttpClientConnectionManager {\n   /**\n    * The base host for which connections are managed.\n    */\n-  private HttpHost baseHost;\n+  private final HttpHost baseHost;\n \n   AbfsConnectionManager(Registry<ConnectionSocketFactory> socketFactoryRegistry,\n-      AbfsHttpClientConnectionFactory connectionFactory, KeepAliveCache kac,\n-      final AbfsConfiguration abfsConfiguration, final URL baseUrl) {\n+      AbfsHttpClientConnectionFactory connectionFactory,\n+      KeepAliveCache kac,\n+      final AbfsConfiguration abfsConfiguration,\n+      final URL baseUrl,\n+      final boolean isCacheWarmupNeeded) {\n     this.httpConnectionFactory = connectionFactory;\n     this.kac = kac;\n     this.connectionOperator = new DefaultHttpClientConnectionOperator(\n         socketFactoryRegistry, null, null);\n     this.abfsConfiguration = abfsConfiguration;\n-    if (abfsConfiguration.getApacheCacheWarmupCount() > 0\n+    this.baseHost = new HttpHost(baseUrl.getHost(),\n+        baseUrl.getDefaultPort(), baseUrl.getProtocol());\n+    if (isCacheWarmupNeeded && abfsConfiguration.getApacheCacheWarmupCount() > 0\n         && kac.getFixedThreadPool() != null) {\n       // Warm up the cache with connections.\n       LOG.debug(\"Warming up the KeepAliveCache with {} connections\",\n           abfsConfiguration.getApacheCacheWarmupCount());\n-      this.baseHost = new HttpHost(baseUrl.getHost(),\n-          baseUrl.getDefaultPort(), baseUrl.getProtocol());\n       HttpRoute route = new HttpRoute(baseHost, null, true);\n-      cacheExtraConnection(route,\n+      int totalConnectionsCreated = cacheExtraConnection(route,\n           abfsConfiguration.getApacheCacheWarmupCount());\n+      if (totalConnectionsCreated == 0) {\n\nReview Comment:\n   even if we fail or catch rejected exception for any one of the tasks we want to register fallback ? as the successfully submitted tasks might have increased the count of totalConnectionsCreated\r\n   \n\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-09-26T12:01:54.816+0000", "updated": "2025-09-26T12:01:54.816+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13627795/comment/18023512", "id": "18023512", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "manika137 commented on code in PR #7967:\nURL: https://github.com/apache/hadoop/pull/7967#discussion_r2387212747\n\n\n##########\nhadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/constants/FileSystemConfigurations.java:\n##########\n@@ -214,7 +214,7 @@ public final class FileSystemConfigurations {\n   public static final long THOUSAND = 1000L;\n \n   public static final HttpOperationType DEFAULT_NETWORKING_LIBRARY\n-      = HttpOperationType.JDK_HTTP_URL_CONNECTION;\n+      = HttpOperationType.APACHE_HTTP_CLIENT;\n\nReview Comment:\n   Nit: We should change this in our md file as well\n\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-09-29T09:02:01.277+0000", "updated": "2025-09-29T09:02:01.277+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13627795/comment/18023766", "id": "18023766", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "manika137 commented on code in PR #7967:\nURL: https://github.com/apache/hadoop/pull/7967#discussion_r2390726345\n\n\n##########\nhadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/constants/FileSystemConfigurations.java:\n##########\n@@ -214,7 +214,7 @@ public final class FileSystemConfigurations {\n   public static final long THOUSAND = 1000L;\n \n   public static final HttpOperationType DEFAULT_NETWORKING_LIBRARY\n-      = HttpOperationType.JDK_HTTP_URL_CONNECTION;\n+      = HttpOperationType.APACHE_HTTP_CLIENT;\n \n   public static final int DEFAULT_APACHE_HTTP_CLIENT_MAX_IO_EXCEPTION_RETRIES = 3;\n\nReview Comment:\n   where are we checking after 3 retries we'll fallback to JDK?\n\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-09-30T10:14:45.238+0000", "updated": "2025-09-30T10:14:45.238+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13627795/comment/18023767", "id": "18023767", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "manika137 commented on code in PR #7967:\nURL: https://github.com/apache/hadoop/pull/7967#discussion_r2390726345\n\n\n##########\nhadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/constants/FileSystemConfigurations.java:\n##########\n@@ -214,7 +214,7 @@ public final class FileSystemConfigurations {\n   public static final long THOUSAND = 1000L;\n \n   public static final HttpOperationType DEFAULT_NETWORKING_LIBRARY\n-      = HttpOperationType.JDK_HTTP_URL_CONNECTION;\n+      = HttpOperationType.APACHE_HTTP_CLIENT;\n \n   public static final int DEFAULT_APACHE_HTTP_CLIENT_MAX_IO_EXCEPTION_RETRIES = 3;\n\nReview Comment:\n   where are we checking after 3 retries we'll fallback to JDK?\n\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-09-30T10:15:32.677+0000", "updated": "2025-09-30T10:15:32.677+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13627795/comment/18023970", "id": "18023970", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "bhattmanish98 commented on code in PR #7967:\nURL: https://github.com/apache/hadoop/pull/7967#discussion_r2393513847\n\n\n##########\nhadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsApacheHttpClient.java:\n##########\n@@ -73,18 +80,21 @@ static boolean usable() {\n   }\n \n   AbfsApacheHttpClient(DelegatingSSLSocketFactory delegatingSSLSocketFactory,\n-      final AbfsConfiguration abfsConfiguration, final KeepAliveCache keepAliveCache,\n-      URL baseUrl) {\n+      final AbfsConfiguration abfsConfiguration,\n+      final KeepAliveCache keepAliveCache,\n+      URL baseUrl,\n+      final boolean isCacheWarmupNeeded) {\n     final AbfsConnectionManager connMgr = new AbfsConnectionManager(\n         createSocketFactoryRegistry(\n             new SSLConnectionSocketFactory(delegatingSSLSocketFactory,\n                 getDefaultHostnameVerifier())),\n         new AbfsHttpClientConnectionFactory(), keepAliveCache,\n-        abfsConfiguration, baseUrl);\n+        abfsConfiguration, baseUrl, isCacheWarmupNeeded);\n     final HttpClientBuilder builder = HttpClients.custom();\n     builder.setConnectionManager(connMgr)\n         .setRequestExecutor(\n-            new AbfsManagedHttpRequestExecutor(abfsConfiguration.getHttpReadTimeout()))\n+            new AbfsManagedHttpRequestExecutor(\n\nReview Comment:\n   Sure, will create a new config for read timeout and use that when 100 continue is enabled.\n\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-10-01T05:45:47.150+0000", "updated": "2025-10-01T05:45:47.150+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13627795/comment/18023971", "id": "18023971", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "bhattmanish98 commented on code in PR #7967:\nURL: https://github.com/apache/hadoop/pull/7967#discussion_r2393517614\n\n\n##########\nhadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsClient.java:\n##########\n@@ -254,7 +259,8 @@ private AbfsClient(final URL baseUrl,\n \n       abfsApacheHttpClient = new AbfsApacheHttpClient(\n           DelegatingSSLSocketFactory.getDefaultFactory(),\n-          abfsConfiguration, keepAliveCache, baseUrl);\n+          abfsConfiguration, keepAliveCache, baseUrl,\n+          abfsConfiguration.getFsConfiguredServiceType() == abfsServiceType);\n\nReview Comment:\n   The reason for this change: Since the keep alive cache is on client level and we were doing cache warmup for both the client separately. Now with this change, we will do cache warmup only for the default client, not for both the clients.\n\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-10-01T05:49:04.577+0000", "updated": "2025-10-01T05:49:04.577+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13627795/comment/18023972", "id": "18023972", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "bhattmanish98 commented on code in PR #7967:\nURL: https://github.com/apache/hadoop/pull/7967#discussion_r2393517614\n\n\n##########\nhadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsClient.java:\n##########\n@@ -254,7 +259,8 @@ private AbfsClient(final URL baseUrl,\n \n       abfsApacheHttpClient = new AbfsApacheHttpClient(\n           DelegatingSSLSocketFactory.getDefaultFactory(),\n-          abfsConfiguration, keepAliveCache, baseUrl);\n+          abfsConfiguration, keepAliveCache, baseUrl,\n+          abfsConfiguration.getFsConfiguredServiceType() == abfsServiceType);\n\nReview Comment:\n   The reason for this change: Since the keep alive cache is on client level and we were doing cache warmup for both the client separately. Now with this change, we will do cache warmup only for the default client, not for both the clients.\r\n   Will add the comment in the code as well\n\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-10-01T05:49:59.660+0000", "updated": "2025-10-01T05:49:59.660+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13627795/comment/18023973", "id": "18023973", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "bhattmanish98 commented on code in PR #7967:\nURL: https://github.com/apache/hadoop/pull/7967#discussion_r2393520715\n\n\n##########\nhadoop-tools/hadoop-azure/src/test/java/org/apache/hadoop/fs/azurebfs/services/ITestApacheClientConnectionPool.java:\n##########\n@@ -118,6 +121,38 @@ public void testConnectedConnectionLogging() throws Exception {\n         .isEqualTo(4);\n   }\n \n+  /**\n+   * Test to verify that the ApacheHttpClient falls back to JDK client\n+   * when connection warmup fails.\n+   * This test is applicable only for ApacheHttpClient.\n+   */\n+  @Test\n+  public void testApacheClientFallbackDuringConnectionWarmup()\n+      throws Exception {\n+    try (KeepAliveCache keepAliveCache = new KeepAliveCache(\n+        new AbfsConfiguration(new Configuration(), EMPTY_STRING))) {\n+      // Create a connection manager with invalid URL to force fallback to JDK client\n+      // during connection warmup.\n+      // This is to simulate failure during connection warmup in the connection manager.\n+      // The invalid URL will cause the connection manager to fail to create connections\n+      // during warmup, forcing it to fall back to JDK client.\n+      final AbfsConnectionManager connMgr = new AbfsConnectionManager(\n+          RegistryBuilder.<ConnectionSocketFactory>create()\n+              .register(HTTPS_SCHEME, new SSLConnectionSocketFactory(\n+                  DelegatingSSLSocketFactory.getDefaultFactory(),\n+                  getDefaultHostnameVerifier()))\n+              .build(),\n+          new AbfsHttpClientConnectionFactory(), keepAliveCache,\n+          new AbfsConfiguration(new Configuration(), EMPTY_STRING),\n+          new URL(\"https://test.com\"), true);\n+\n+      Assertions.assertThat(AbfsApacheHttpClient.usable())\n+          .describedAs(\"Apache HttpClient should be not usable\")\n\nReview Comment:\n   Sure, will do that.\n\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-10-01T05:51:19.732+0000", "updated": "2025-10-01T05:51:19.732+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13627795/comment/18023974", "id": "18023974", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "bhattmanish98 commented on code in PR #7967:\nURL: https://github.com/apache/hadoop/pull/7967#discussion_r2393522594\n\n\n##########\nhadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsBlobClient.java:\n##########\n@@ -188,7 +189,7 @@ public AbfsBlobClient(final URL baseUrl,\n       final EncryptionContextProvider encryptionContextProvider,\n       final AbfsClientContext abfsClientContext) throws IOException {\n     super(baseUrl, sharedKeyCredentials, abfsConfiguration, tokenProvider,\n-        encryptionContextProvider, abfsClientContext);\n+        encryptionContextProvider, abfsClientContext, AbfsServiceType.BLOB);\n\nReview Comment:\n   As described in the previous comment, we need to find out default client and for that we are comparing these values with the default value configured.\n\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-10-01T05:52:49.824+0000", "updated": "2025-10-01T05:52:49.824+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13627795/comment/18023975", "id": "18023975", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "bhattmanish98 commented on code in PR #7967:\nURL: https://github.com/apache/hadoop/pull/7967#discussion_r2393523578\n\n\n##########\nhadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/constants/FileSystemConfigurations.java:\n##########\n@@ -214,7 +214,7 @@ public final class FileSystemConfigurations {\n   public static final long THOUSAND = 1000L;\n \n   public static final HttpOperationType DEFAULT_NETWORKING_LIBRARY\n-      = HttpOperationType.JDK_HTTP_URL_CONNECTION;\n+      = HttpOperationType.APACHE_HTTP_CLIENT;\n\nReview Comment:\n   Sure, will make the change in .md file as well\n\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-10-01T05:53:34.855+0000", "updated": "2025-10-01T05:53:34.855+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13627795/comment/18023989", "id": "18023989", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "bhattmanish98 commented on code in PR #7967:\nURL: https://github.com/apache/hadoop/pull/7967#discussion_r2393620859\n\n\n##########\nhadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsConnectionManager.java:\n##########\n@@ -91,26 +92,34 @@ class AbfsConnectionManager implements HttpClientConnectionManager {\n   /**\n    * The base host for which connections are managed.\n    */\n-  private HttpHost baseHost;\n+  private final HttpHost baseHost;\n \n   AbfsConnectionManager(Registry<ConnectionSocketFactory> socketFactoryRegistry,\n-      AbfsHttpClientConnectionFactory connectionFactory, KeepAliveCache kac,\n-      final AbfsConfiguration abfsConfiguration, final URL baseUrl) {\n+      AbfsHttpClientConnectionFactory connectionFactory,\n+      KeepAliveCache kac,\n+      final AbfsConfiguration abfsConfiguration,\n+      final URL baseUrl,\n+      final boolean isCacheWarmupNeeded) {\n     this.httpConnectionFactory = connectionFactory;\n     this.kac = kac;\n     this.connectionOperator = new DefaultHttpClientConnectionOperator(\n         socketFactoryRegistry, null, null);\n     this.abfsConfiguration = abfsConfiguration;\n-    if (abfsConfiguration.getApacheCacheWarmupCount() > 0\n+    this.baseHost = new HttpHost(baseUrl.getHost(),\n+        baseUrl.getDefaultPort(), baseUrl.getProtocol());\n+    if (isCacheWarmupNeeded && abfsConfiguration.getApacheCacheWarmupCount() > 0\n         && kac.getFixedThreadPool() != null) {\n       // Warm up the cache with connections.\n       LOG.debug(\"Warming up the KeepAliveCache with {} connections\",\n           abfsConfiguration.getApacheCacheWarmupCount());\n-      this.baseHost = new HttpHost(baseUrl.getHost(),\n-          baseUrl.getDefaultPort(), baseUrl.getProtocol());\n       HttpRoute route = new HttpRoute(baseHost, null, true);\n-      cacheExtraConnection(route,\n+      int totalConnectionsCreated = cacheExtraConnection(route,\n           abfsConfiguration.getApacheCacheWarmupCount());\n+      if (totalConnectionsCreated == 0) {\n\nReview Comment:\n   Yes, make sense. I have updated the returned value in case of rejected exception; other thing will remain the same.\n\n\n\n##########\nhadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsClientHandler.java:\n##########\n@@ -68,13 +68,13 @@ public AbfsClientHandler(final URL baseUrl,\n       final SASTokenProvider sasTokenProvider,\n       final EncryptionContextProvider encryptionContextProvider,\n       final AbfsClientContext abfsClientContext) throws IOException {\n+    initServiceType(abfsConfiguration);\n\nReview Comment:\n   This will initialize the default and ingress service types. This is needed before crating the clients so that we can do cache warmup only for default client.\n\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-10-01T07:11:40.076+0000", "updated": "2025-10-01T07:11:40.076+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13627795/comment/18028193", "id": "18028193", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "hadoop-yetus commented on PR #7967:\nURL: https://github.com/apache/hadoop/pull/7967#issuecomment-3378551948\n\n   :broken_heart: **-1 overall**\r\n   \r\n   \r\n   \r\n   \r\n   \r\n   \r\n   | Vote | Subsystem | Runtime |  Logfile | Comment |\r\n   |:----:|----------:|--------:|:--------:|:-------:|\r\n   | +0 :ok: |  reexec  |   0m 48s |  |  Docker mode activated.  |\r\n   |||| _ Prechecks _ |\r\n   | +1 :green_heart: |  dupname  |   0m  0s |  |  No case conflicting files found.  |\r\n   | +0 :ok: |  codespell  |   0m  0s |  |  codespell was not available.  |\r\n   | +0 :ok: |  detsecrets  |   0m  0s |  |  detect-secrets was not available.  |\r\n   | +0 :ok: |  markdownlint  |   0m  0s |  |  markdownlint was not available.  |\r\n   | +1 :green_heart: |  @author  |   0m  1s |  |  The patch does not contain any @author tags.  |\r\n   | +1 :green_heart: |  test4tests  |   0m  0s |  |  The patch appears to include 3 new or modified test files.  |\r\n   |||| _ trunk Compile Tests _ |\r\n   | -1 :x: |  mvninstall  |  54m 51s | [/branch-mvninstall-root.txt](https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-7967/3/artifact/out/branch-mvninstall-root.txt) |  root in trunk failed.  |\r\n   | +1 :green_heart: |  compile  |   0m 43s |  |  trunk passed with JDK Ubuntu-11.0.27+6-post-Ubuntu-0ubuntu120.04  |\r\n   | +1 :green_heart: |  compile  |   0m 39s |  |  trunk passed with JDK Private Build-1.8.0_452-8u452-ga~us1-0ubuntu1~20.04-b09  |\r\n   | +1 :green_heart: |  checkstyle  |   0m 33s |  |  trunk passed  |\r\n   | +1 :green_heart: |  mvnsite  |   0m 43s |  |  trunk passed  |\r\n   | +1 :green_heart: |  javadoc  |   0m 41s |  |  trunk passed with JDK Ubuntu-11.0.27+6-post-Ubuntu-0ubuntu120.04  |\r\n   | +1 :green_heart: |  javadoc  |   0m 34s |  |  trunk passed with JDK Private Build-1.8.0_452-8u452-ga~us1-0ubuntu1~20.04-b09  |\r\n   | +1 :green_heart: |  spotbugs  |   1m 10s |  |  trunk passed  |\r\n   | +1 :green_heart: |  shadedclient  |  39m 40s |  |  branch has no errors when building and testing our client artifacts.  |\r\n   |||| _ Patch Compile Tests _ |\r\n   | +1 :green_heart: |  mvninstall  |   0m 32s |  |  the patch passed  |\r\n   | +1 :green_heart: |  compile  |   0m 36s |  |  the patch passed with JDK Ubuntu-11.0.27+6-post-Ubuntu-0ubuntu120.04  |\r\n   | +1 :green_heart: |  javac  |   0m 36s |  |  the patch passed  |\r\n   | +1 :green_heart: |  compile  |   0m 31s |  |  the patch passed with JDK Private Build-1.8.0_452-8u452-ga~us1-0ubuntu1~20.04-b09  |\r\n   | +1 :green_heart: |  javac  |   0m 31s |  |  the patch passed  |\r\n   | +1 :green_heart: |  blanks  |   0m  0s |  |  The patch has no blanks issues.  |\r\n   | +1 :green_heart: |  checkstyle  |   0m 21s |  |  the patch passed  |\r\n   | +1 :green_heart: |  mvnsite  |   0m 34s |  |  the patch passed  |\r\n   | +1 :green_heart: |  javadoc  |   0m 30s |  |  the patch passed with JDK Ubuntu-11.0.27+6-post-Ubuntu-0ubuntu120.04  |\r\n   | +1 :green_heart: |  javadoc  |   0m 26s |  |  the patch passed with JDK Private Build-1.8.0_452-8u452-ga~us1-0ubuntu1~20.04-b09  |\r\n   | +1 :green_heart: |  spotbugs  |   1m 11s |  |  the patch passed  |\r\n   | +1 :green_heart: |  shadedclient  |  40m  2s |  |  patch has no errors when building and testing our client artifacts.  |\r\n   |||| _ Other Tests _ |\r\n   | +1 :green_heart: |  unit  |   3m  8s |  |  hadoop-azure in the patch passed.  |\r\n   | +1 :green_heart: |  asflicense  |   0m 36s |  |  The patch does not generate ASF License warnings.  |\r\n   |  |   | 150m 19s |  |  |\r\n   \r\n   \r\n   | Subsystem | Report/Notes |\r\n   |----------:|:-------------|\r\n   | Docker | ClientAPI=1.51 ServerAPI=1.51 base: https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-7967/3/artifact/out/Dockerfile |\r\n   | GITHUB PR | https://github.com/apache/hadoop/pull/7967 |\r\n   | Optional Tests | dupname asflicense compile javac javadoc mvninstall mvnsite unit shadedclient spotbugs checkstyle codespell detsecrets markdownlint |\r\n   | uname | Linux 6778220a7832 5.15.0-157-generic #167-Ubuntu SMP Wed Sep 17 21:35:53 UTC 2025 x86_64 x86_64 x86_64 GNU/Linux |\r\n   | Build tool | maven |\r\n   | Personality | dev-support/bin/hadoop.sh |\r\n   | git revision | trunk / 44765c0ae41d29a78198cb113bc06780be7092af |\r\n   | Default Java | Private Build-1.8.0_452-8u452-ga~us1-0ubuntu1~20.04-b09 |\r\n   | Multi-JDK versions | /usr/lib/jvm/java-11-openjdk-amd64:Ubuntu-11.0.27+6-post-Ubuntu-0ubuntu120.04 /usr/lib/jvm/java-8-openjdk-amd64:Private Build-1.8.0_452-8u452-ga~us1-0ubuntu1~20.04-b09 |\r\n   |  Test Results | https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-7967/3/testReport/ |\r\n   | Max. process+thread count | 561 (vs. ulimit of 5500) |\r\n   | modules | C: hadoop-tools/hadoop-azure U: hadoop-tools/hadoop-azure |\r\n   | Console output | https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-7967/3/console |\r\n   | versions | git=2.25.1 maven=3.9.11 spotbugs=4.2.2 |\r\n   | Powered by | Apache Yetus 0.14.0 https://yetus.apache.org |\r\n   \r\n   \r\n   This message was automatically generated.\r\n   \r\n   \n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-10-07T20:12:06.452+0000", "updated": "2025-10-07T20:12:06.452+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13627795/comment/18028533", "id": "18028533", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "anmolanmol1234 commented on code in PR #7967:\nURL: https://github.com/apache/hadoop/pull/7967#discussion_r2415677758\n\n\n##########\nhadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsClientHandler.java:\n##########\n@@ -68,6 +68,9 @@ public AbfsClientHandler(final URL baseUrl,\n       final SASTokenProvider sasTokenProvider,\n       final EncryptionContextProvider encryptionContextProvider,\n       final AbfsClientContext abfsClientContext) throws IOException {\n+    // This will initialize the default and ingress service types.\n+    // This is needed before crating the clients so that we can do cache warmup\n\nReview Comment:\n   nit: typo creating\n\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-10-09T06:17:29.239+0000", "updated": "2025-10-09T06:17:29.239+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13627795/comment/18028807", "id": "18028807", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "hadoop-yetus commented on PR #7967:\nURL: https://github.com/apache/hadoop/pull/7967#issuecomment-3386392364\n\n   :confetti_ball: **+1 overall**\r\n   \r\n   \r\n   \r\n   \r\n   \r\n   \r\n   | Vote | Subsystem | Runtime |  Logfile | Comment |\r\n   |:----:|----------:|--------:|:--------:|:-------:|\r\n   | +0 :ok: |  reexec  |   0m 50s |  |  Docker mode activated.  |\r\n   |||| _ Prechecks _ |\r\n   | +1 :green_heart: |  dupname  |   0m  0s |  |  No case conflicting files found.  |\r\n   | +0 :ok: |  codespell  |   0m  1s |  |  codespell was not available.  |\r\n   | +0 :ok: |  detsecrets  |   0m  1s |  |  detect-secrets was not available.  |\r\n   | +0 :ok: |  markdownlint  |   0m  1s |  |  markdownlint was not available.  |\r\n   | +1 :green_heart: |  @author  |   0m  0s |  |  The patch does not contain any @author tags.  |\r\n   | +1 :green_heart: |  test4tests  |   0m  0s |  |  The patch appears to include 3 new or modified test files.  |\r\n   |||| _ trunk Compile Tests _ |\r\n   | +1 :green_heart: |  mvninstall  |  53m 46s |  |  trunk passed  |\r\n   | +1 :green_heart: |  compile  |   0m 44s |  |  trunk passed with JDK Ubuntu-11.0.27+6-post-Ubuntu-0ubuntu120.04  |\r\n   | +1 :green_heart: |  compile  |   0m 38s |  |  trunk passed with JDK Private Build-1.8.0_452-8u452-ga~us1-0ubuntu1~20.04-b09  |\r\n   | +1 :green_heart: |  checkstyle  |   0m 33s |  |  trunk passed  |\r\n   | +1 :green_heart: |  mvnsite  |   0m 43s |  |  trunk passed  |\r\n   | +1 :green_heart: |  javadoc  |   0m 41s |  |  trunk passed with JDK Ubuntu-11.0.27+6-post-Ubuntu-0ubuntu120.04  |\r\n   | +1 :green_heart: |  javadoc  |   0m 34s |  |  trunk passed with JDK Private Build-1.8.0_452-8u452-ga~us1-0ubuntu1~20.04-b09  |\r\n   | +1 :green_heart: |  spotbugs  |   1m 11s |  |  trunk passed  |\r\n   | +1 :green_heart: |  shadedclient  |  40m 20s |  |  branch has no errors when building and testing our client artifacts.  |\r\n   |||| _ Patch Compile Tests _ |\r\n   | +1 :green_heart: |  mvninstall  |   0m 33s |  |  the patch passed  |\r\n   | +1 :green_heart: |  compile  |   0m 36s |  |  the patch passed with JDK Ubuntu-11.0.27+6-post-Ubuntu-0ubuntu120.04  |\r\n   | +1 :green_heart: |  javac  |   0m 36s |  |  the patch passed  |\r\n   | +1 :green_heart: |  compile  |   0m 31s |  |  the patch passed with JDK Private Build-1.8.0_452-8u452-ga~us1-0ubuntu1~20.04-b09  |\r\n   | +1 :green_heart: |  javac  |   0m 31s |  |  the patch passed  |\r\n   | +1 :green_heart: |  blanks  |   0m  0s |  |  The patch has no blanks issues.  |\r\n   | +1 :green_heart: |  checkstyle  |   0m 21s |  |  the patch passed  |\r\n   | +1 :green_heart: |  mvnsite  |   0m 35s |  |  the patch passed  |\r\n   | +1 :green_heart: |  javadoc  |   0m 28s |  |  the patch passed with JDK Ubuntu-11.0.27+6-post-Ubuntu-0ubuntu120.04  |\r\n   | +1 :green_heart: |  javadoc  |   0m 26s |  |  the patch passed with JDK Private Build-1.8.0_452-8u452-ga~us1-0ubuntu1~20.04-b09  |\r\n   | +1 :green_heart: |  spotbugs  |   1m  9s |  |  the patch passed  |\r\n   | +1 :green_heart: |  shadedclient  |  40m 32s |  |  patch has no errors when building and testing our client artifacts.  |\r\n   |||| _ Other Tests _ |\r\n   | +1 :green_heart: |  unit  |   3m  7s |  |  hadoop-azure in the patch passed.  |\r\n   | +1 :green_heart: |  asflicense  |   0m 37s |  |  The patch does not generate ASF License warnings.  |\r\n   |  |   | 150m 27s |  |  |\r\n   \r\n   \r\n   | Subsystem | Report/Notes |\r\n   |----------:|:-------------|\r\n   | Docker | ClientAPI=1.51 ServerAPI=1.51 base: https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-7967/4/artifact/out/Dockerfile |\r\n   | GITHUB PR | https://github.com/apache/hadoop/pull/7967 |\r\n   | Optional Tests | dupname asflicense compile javac javadoc mvninstall mvnsite unit shadedclient spotbugs checkstyle codespell detsecrets markdownlint |\r\n   | uname | Linux a733619d79ed 5.15.0-157-generic #167-Ubuntu SMP Wed Sep 17 21:35:53 UTC 2025 x86_64 x86_64 x86_64 GNU/Linux |\r\n   | Build tool | maven |\r\n   | Personality | dev-support/bin/hadoop.sh |\r\n   | git revision | trunk / 7ff70868cc0483c55d875f66cf2379f04e75075e |\r\n   | Default Java | Private Build-1.8.0_452-8u452-ga~us1-0ubuntu1~20.04-b09 |\r\n   | Multi-JDK versions | /usr/lib/jvm/java-11-openjdk-amd64:Ubuntu-11.0.27+6-post-Ubuntu-0ubuntu120.04 /usr/lib/jvm/java-8-openjdk-amd64:Private Build-1.8.0_452-8u452-ga~us1-0ubuntu1~20.04-b09 |\r\n   |  Test Results | https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-7967/4/testReport/ |\r\n   | Max. process+thread count | 526 (vs. ulimit of 5500) |\r\n   | modules | C: hadoop-tools/hadoop-azure U: hadoop-tools/hadoop-azure |\r\n   | Console output | https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-7967/4/console |\r\n   | versions | git=2.25.1 maven=3.9.11 spotbugs=4.2.2 |\r\n   | Powered by | Apache Yetus 0.14.0 https://yetus.apache.org |\r\n   \r\n   \r\n   This message was automatically generated.\r\n   \r\n   \n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-10-09T15:44:50.580+0000", "updated": "2025-10-09T15:44:50.580+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13627795/comment/18028945", "id": "18028945", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "bhattmanish98 commented on PR #7967:\nURL: https://github.com/apache/hadoop/pull/7967#issuecomment-3388294934\n\n   \r\n   ============================================================\r\n   HNS-OAuth-DFS\r\n   ============================================================\r\n   \r\n   [WARNING] Tests run: 194, Failures: 0, Errors: 0, Skipped: 4\r\n   [WARNING] Tests run: 872, Failures: 0, Errors: 0, Skipped: 217\r\n   [WARNING] Tests run: 158, Failures: 0, Errors: 0, Skipped: 8\r\n   [WARNING] Tests run: 271, Failures: 0, Errors: 0, Skipped: 23\r\n   \r\n   ============================================================\r\n   HNS-SharedKey-DFS\r\n   ============================================================\r\n   \r\n   [WARNING] Tests run: 194, Failures: 0, Errors: 0, Skipped: 5\r\n   [WARNING] Tests run: 875, Failures: 0, Errors: 0, Skipped: 169\r\n   [WARNING] Tests run: 158, Failures: 0, Errors: 0, Skipped: 8\r\n   [WARNING] Tests run: 271, Failures: 0, Errors: 0, Skipped: 10\r\n   \r\n   ============================================================\r\n   NonHNS-SharedKey-DFS\r\n   ============================================================\r\n   \r\n   [WARNING] Tests run: 194, Failures: 0, Errors: 0, Skipped: 11\r\n   [WARNING] Tests run: 714, Failures: 0, Errors: 0, Skipped: 282\r\n   [WARNING] Tests run: 158, Failures: 0, Errors: 0, Skipped: 9\r\n   [WARNING] Tests run: 271, Failures: 0, Errors: 0, Skipped: 11\r\n   \r\n   ============================================================\r\n   AppendBlob-HNS-OAuth-DFS\r\n   ============================================================\r\n   \r\n   [WARNING] Tests run: 194, Failures: 0, Errors: 0, Skipped: 4\r\n   [WARNING] Tests run: 872, Failures: 0, Errors: 0, Skipped: 228\r\n   [WARNING] Tests run: 135, Failures: 0, Errors: 0, Skipped: 9\r\n   [WARNING] Tests run: 271, Failures: 0, Errors: 0, Skipped: 23\r\n   \r\n   ============================================================\r\n   NonHNS-SharedKey-Blob\r\n   ============================================================\r\n   \r\n   [WARNING] Tests run: 194, Failures: 0, Errors: 0, Skipped: 11\r\n   [WARNING] Tests run: 721, Failures: 0, Errors: 0, Skipped: 140\r\n   [WARNING] Tests run: 158, Failures: 0, Errors: 0, Skipped: 3\r\n   [WARNING] Tests run: 271, Failures: 0, Errors: 0, Skipped: 11\r\n   \r\n   ============================================================\r\n   NonHNS-OAuth-DFS\r\n   ============================================================\r\n   \r\n   [WARNING] Tests run: 194, Failures: 0, Errors: 0, Skipped: 11\r\n   [WARNING] Tests run: 711, Failures: 0, Errors: 0, Skipped: 284\r\n   [WARNING] Tests run: 158, Failures: 0, Errors: 0, Skipped: 9\r\n   [WARNING] Tests run: 271, Failures: 0, Errors: 0, Skipped: 24\r\n   \r\n   ============================================================\r\n   NonHNS-OAuth-Blob\r\n   ============================================================\r\n   \r\n   [WARNING] Tests run: 194, Failures: 0, Errors: 0, Skipped: 11\r\n   [WARNING] Tests run: 718, Failures: 0, Errors: 0, Skipped: 152\r\n   [WARNING] Tests run: 158, Failures: 0, Errors: 0, Skipped: 3\r\n   [WARNING] Tests run: 271, Failures: 0, Errors: 0, Skipped: 24\r\n   \r\n   ============================================================\r\n   AppendBlob-NonHNS-OAuth-Blob\r\n   ============================================================\r\n   \r\n   [WARNING] Tests run: 194, Failures: 0, Errors: 0, Skipped: 11\r\n   [WARNING] Tests run: 713, Failures: 0, Errors: 0, Skipped: 198\r\n   [WARNING] Tests run: 135, Failures: 0, Errors: 0, Skipped: 4\r\n   [WARNING] Tests run: 271, Failures: 0, Errors: 0, Skipped: 24\r\n   \r\n   ============================================================\r\n   HNS-Oauth-DFS-IngressBlob\r\n   ============================================================\r\n   \r\n   [WARNING] Tests run: 194, Failures: 0, Errors: 0, Skipped: 4\r\n   [WARNING] Tests run: 746, Failures: 0, Errors: 0, Skipped: 226\r\n   [WARNING] Tests run: 158, Failures: 0, Errors: 0, Skipped: 8\r\n   [WARNING] Tests run: 271, Failures: 0, Errors: 0, Skipped: 23\r\n   \r\n   ============================================================\r\n   NonHNS-OAuth-DFS-IngressBlob\r\n   ============================================================\r\n   \r\n   [WARNING] Tests run: 194, Failures: 0, Errors: 0, Skipped: 11\r\n   [WARNING] Tests run: 711, Failures: 0, Errors: 0, Skipped: 281\r\n   [WARNING] Tests run: 158, Failures: 0, Errors: 0, Skipped: 9\r\n   [WARNING] Tests run: 271, Failures: 0, Errors: 0, Skipped: 24\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-10-10T04:58:37.773+0000", "updated": "2025-10-10T04:58:37.773+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13627795/comment/18029407", "id": "18029407", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "anujmodi2021 merged PR #7967:\nURL: https://github.com/apache/hadoop/pull/7967\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-10-13T06:19:02.121+0000", "updated": "2025-10-13T06:19:02.121+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13627795/comment/18029740", "id": "18029740", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "steveloughran commented on PR #7967:\nURL: https://github.com/apache/hadoop/pull/7967#issuecomment-3401193052\n\n   I understand why the startup mechanism makes sense, but I'm curious about doing it on a live connection. What problems were occurring with hostname lookup that changing client would fix?\r\n   \r\n   Do you want this in 3.4.3? if so do a backport PR ASAP\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-10-14T10:43:56.693+0000", "updated": "2025-10-14T10:43:56.693+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13627795/comment/18032070", "id": "18032070", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "bhattmanish98 commented on PR #7967:\nURL: https://github.com/apache/hadoop/pull/7967#issuecomment-3432065456\n\n   @steveloughran We\u2019re performing cache refresh when the number of available connections in the cache drops below a certain threshold. The warmup normally happens during file system initialization, but if the file system is already active and making multiple parallel network calls, creating new connections on demand with the Apache client tends to take longer.\r\n   \r\n   To avoid delays in such cases, we asynchronously pre-create and cache a few additional connections whenever the pool runs low. This ensures that subsequent network calls can use already-established connections and spend time on actual data processing rather than connection setup.\r\n   \r\n   \n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-10-22T12:13:35.113+0000", "updated": "2025-10-22T12:13:35.113+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13627795/comment/18032343", "id": "18032343", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "bhattmanish98 commented on PR #7967:\nURL: https://github.com/apache/hadoop/pull/7967#issuecomment-3435042669\n\n   > Do you want this in 3.4.3? if so do a backport PR ASAP\r\n   \r\n   The previous PR that includes the Apache client changes was also not included in release 3.4.3. We\u2019re planning to include this change in the next major release.\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-10-23T04:38:43.011+0000", "updated": "2025-10-23T04:38:43.011+0000"}], "maxResults": 27, "total": 27, "startAt": 0}, "priority": {"self": "https://issues.apache.org/jira/rest/api/2/priority/3", "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg", "name": "Major", "id": "3"}, "status": {"self": "https://issues.apache.org/jira/rest/api/2/status/1", "description": "The issue is open and ready for the assignee to start work on it.", "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png", "name": "Open", "id": "1", "statusCategory": {"self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2", "id": 2, "key": "new", "colorName": "blue-gray", "name": "To Do"}}}}