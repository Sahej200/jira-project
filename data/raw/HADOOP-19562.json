{"expand": "renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations", "id": "13617729", "self": "https://issues.apache.org/jira/rest/api/2/issue/13617729", "key": "HADOOP-19562", "fields": {"summary": "Fix TestTextCommand on Windows", "description": "The following 2 tests are failing in TestTextCommand -\r\n1. testDisplayForNonWritableSequenceFile\r\n2. testDisplayForSequenceFileSmallMultiByteReads\r\n\r\nThese tests create a file and flush a string ending with \"\\n\". However, for verification, the test expects \"\\r\\n\" as the line ending on Windows. Thus, the test fails.", "reporter": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=gaurava", "name": "gaurava", "key": "gautham", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=gautham&avatarId=43091", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gautham&avatarId=43091", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gautham&avatarId=43091", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gautham&avatarId=43091"}, "displayName": "Gautham Banasandra", "active": true, "timeZone": "Asia/Kolkata"}, "comment": {"comments": [{"self": "https://issues.apache.org/jira/rest/api/2/issue/13617729/comment/17950680", "id": "17950680", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "GauthamBanasandra opened a new pull request, #7679:\nURL: https://github.com/apache/hadoop/pull/7679\n\n   <!--\r\n     Thanks for sending a pull request!\r\n       1. If this is your first time, please read our contributor guidelines: https://cwiki.apache.org/confluence/display/HADOOP/How+To+Contribute\r\n       2. Make sure your PR title starts with JIRA issue id, e.g., 'HADOOP-17799. Your PR title ...'.\r\n   -->\r\n   \r\n   ### Description of PR\r\n   \r\n   The following 2 tests are failing in TestTextCommand -\r\n   1. testDisplayForNonWritableSequenceFile\r\n   2. testDisplayForSequenceFileSmallMultiByteReads\r\n   \r\n   These tests create a file and flush a string ending with \"\\n\". However, for verification, the test expects \"\\r\\n\" as the line ending on Windows. Thus, the test fails.\r\n   \r\n   This PR fixes the same by checking for \"\\n\" as the line ending on Windows.\r\n   \r\n   ### How was this patch tested?\r\n   \r\n   1. Ran the fixed unit tests locally.\r\n   2. Jenkins CI validation.\r\n   \r\n   ### For code changes:\r\n   \r\n   - [x] Does the title or this PR starts with the corresponding JIRA issue id (e.g. 'HADOOP-17799. Your PR title ...')?\r\n   - [ ] Object storage: have the integration tests been executed and the endpoint declared according to the connector-specific documentation?\r\n   - [ ] If adding new dependencies to the code, are these dependencies licensed in a way that is compatible for inclusion under [ASF 2.0](http://www.apache.org/legal/resolved.html#category-a)?\r\n   - [ ] If applicable, have you updated the `LICENSE`, `LICENSE-binary`, `NOTICE-binary` files?\r\n   \r\n   \n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-05-10T12:55:42.137+0000", "updated": "2025-05-10T12:55:42.137+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13617729/comment/17950695", "id": "17950695", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "hadoop-yetus commented on PR #7679:\nURL: https://github.com/apache/hadoop/pull/7679#issuecomment-2869010098\n\n   :confetti_ball: **+1 overall**\r\n   \r\n   \r\n   \r\n   \r\n   \r\n   \r\n   | Vote | Subsystem | Runtime |  Logfile | Comment |\r\n   |:----:|----------:|--------:|:--------:|:-------:|\r\n   | +0 :ok: |  reexec  |   0m 52s |  |  Docker mode activated.  |\r\n   |||| _ Prechecks _ |\r\n   | +1 :green_heart: |  dupname  |   0m  0s |  |  No case conflicting files found.  |\r\n   | +0 :ok: |  codespell  |   0m  1s |  |  codespell was not available.  |\r\n   | +0 :ok: |  detsecrets  |   0m  1s |  |  detect-secrets was not available.  |\r\n   | +1 :green_heart: |  @author  |   0m  0s |  |  The patch does not contain any @author tags.  |\r\n   | +1 :green_heart: |  test4tests  |   0m  0s |  |  The patch appears to include 1 new or modified test files.  |\r\n   |||| _ trunk Compile Tests _ |\r\n   | +1 :green_heart: |  mvninstall  |  41m 25s |  |  trunk passed  |\r\n   | +1 :green_heart: |  compile  |  17m 41s |  |  trunk passed with JDK Ubuntu-11.0.27+6-post-Ubuntu-0ubuntu120.04  |\r\n   | +1 :green_heart: |  compile  |  15m 16s |  |  trunk passed with JDK Private Build-1.8.0_452-8u452-ga~us1-0ubuntu1~20.04-b09  |\r\n   | +1 :green_heart: |  checkstyle  |   1m 18s |  |  trunk passed  |\r\n   | +1 :green_heart: |  mvnsite  |   1m 38s |  |  trunk passed  |\r\n   | +1 :green_heart: |  javadoc  |   1m 16s |  |  trunk passed with JDK Ubuntu-11.0.27+6-post-Ubuntu-0ubuntu120.04  |\r\n   | +1 :green_heart: |  javadoc  |   0m 53s |  |  trunk passed with JDK Private Build-1.8.0_452-8u452-ga~us1-0ubuntu1~20.04-b09  |\r\n   | +1 :green_heart: |  spotbugs  |   2m 36s |  |  trunk passed  |\r\n   | +1 :green_heart: |  shadedclient  |  44m 22s |  |  branch has no errors when building and testing our client artifacts.  |\r\n   |||| _ Patch Compile Tests _ |\r\n   | +1 :green_heart: |  mvninstall  |   0m 57s |  |  the patch passed  |\r\n   | +1 :green_heart: |  compile  |  16m 55s |  |  the patch passed with JDK Ubuntu-11.0.27+6-post-Ubuntu-0ubuntu120.04  |\r\n   | +1 :green_heart: |  javac  |  16m 55s |  |  the patch passed  |\r\n   | +1 :green_heart: |  compile  |  15m 21s |  |  the patch passed with JDK Private Build-1.8.0_452-8u452-ga~us1-0ubuntu1~20.04-b09  |\r\n   | +1 :green_heart: |  javac  |  15m 21s |  |  the patch passed  |\r\n   | +1 :green_heart: |  blanks  |   0m  0s |  |  The patch has no blanks issues.  |\r\n   | +1 :green_heart: |  checkstyle  |   1m 15s |  |  the patch passed  |\r\n   | +1 :green_heart: |  mvnsite  |   1m 38s |  |  the patch passed  |\r\n   | +1 :green_heart: |  javadoc  |   1m 12s |  |  the patch passed with JDK Ubuntu-11.0.27+6-post-Ubuntu-0ubuntu120.04  |\r\n   | +1 :green_heart: |  javadoc  |   0m 53s |  |  the patch passed with JDK Private Build-1.8.0_452-8u452-ga~us1-0ubuntu1~20.04-b09  |\r\n   | +1 :green_heart: |  spotbugs  |   2m 44s |  |  the patch passed  |\r\n   | +1 :green_heart: |  shadedclient  |  41m 29s |  |  patch has no errors when building and testing our client artifacts.  |\r\n   |||| _ Other Tests _ |\r\n   | +1 :green_heart: |  unit  |  15m  7s |  |  hadoop-common in the patch passed.  |\r\n   | +1 :green_heart: |  asflicense  |   1m  4s |  |  The patch does not generate ASF License warnings.  |\r\n   |  |   | 227m 19s |  |  |\r\n   \r\n   \r\n   | Subsystem | Report/Notes |\r\n   |----------:|:-------------|\r\n   | Docker | ClientAPI=1.49 ServerAPI=1.49 base: https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-7679/1/artifact/out/Dockerfile |\r\n   | GITHUB PR | https://github.com/apache/hadoop/pull/7679 |\r\n   | Optional Tests | dupname asflicense compile javac javadoc mvninstall mvnsite unit shadedclient spotbugs checkstyle codespell detsecrets |\r\n   | uname | Linux e93e5cdd2cc7 5.15.0-139-generic #149-Ubuntu SMP Fri Apr 11 22:06:13 UTC 2025 x86_64 x86_64 x86_64 GNU/Linux |\r\n   | Build tool | maven |\r\n   | Personality | dev-support/bin/hadoop.sh |\r\n   | git revision | trunk / a1fdc69daaa1f5f477df15bd17e3c25c517ea058 |\r\n   | Default Java | Private Build-1.8.0_452-8u452-ga~us1-0ubuntu1~20.04-b09 |\r\n   | Multi-JDK versions | /usr/lib/jvm/java-11-openjdk-amd64:Ubuntu-11.0.27+6-post-Ubuntu-0ubuntu120.04 /usr/lib/jvm/java-8-openjdk-amd64:Private Build-1.8.0_452-8u452-ga~us1-0ubuntu1~20.04-b09 |\r\n   |  Test Results | https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-7679/1/testReport/ |\r\n   | Max. process+thread count | 3135 (vs. ulimit of 5500) |\r\n   | modules | C: hadoop-common-project/hadoop-common U: hadoop-common-project/hadoop-common |\r\n   | Console output | https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-7679/1/console |\r\n   | versions | git=2.25.1 maven=3.6.3 spotbugs=4.2.2 |\r\n   | Powered by | Apache Yetus 0.14.0 https://yetus.apache.org |\r\n   \r\n   \r\n   This message was automatically generated.\r\n   \r\n   \n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-05-10T16:44:27.857+0000", "updated": "2025-05-10T16:44:27.857+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13617729/comment/17951874", "id": "17951874", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=gaurava", "name": "gaurava", "key": "gautham", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=gautham&avatarId=43091", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gautham&avatarId=43091", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gautham&avatarId=43091", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gautham&avatarId=43091"}, "displayName": "Gautham Banasandra", "active": true, "timeZone": "Asia/Kolkata"}, "body": "Merged PR to trunk - https://github.com/apache/hadoop/pull/7679.", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=gaurava", "name": "gaurava", "key": "gautham", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=gautham&avatarId=43091", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gautham&avatarId=43091", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gautham&avatarId=43091", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gautham&avatarId=43091"}, "displayName": "Gautham Banasandra", "active": true, "timeZone": "Asia/Kolkata"}, "created": "2025-05-15T18:52:42.178+0000", "updated": "2025-05-15T18:52:42.178+0000"}], "maxResults": 3, "total": 3, "startAt": 0}, "priority": {"self": "https://issues.apache.org/jira/rest/api/2/priority/3", "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg", "name": "Major", "id": "3"}, "status": {"self": "https://issues.apache.org/jira/rest/api/2/status/5", "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.", "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png", "name": "Resolved", "id": "5", "statusCategory": {"self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3", "id": 3, "key": "done", "colorName": "green", "name": "Done"}}}}