{"expand": "renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations", "id": "13630912", "self": "https://issues.apache.org/jira/rest/api/2/issue/13630912", "key": "KAFKA-19769", "fields": {"summary": "[Java 25] few tests are failling (class: clients/org.apache.kafka.common.network.SslTransportLayerTest)", "description": "{panel:title=Notes:|borderStyle=dashed|borderColor=#cccccc|titleBGColor=#f7d6c1|bgColor=#ffffce}\r\n * (!) this ticket blocks KAFKA-19664 *_Support building with Java 25 (LTS release)_*\r\n * (on) looks similar to: KAFKA-15117 *_SslTransportLayerTest.testValidEndpointIdentificationCN fails with Java 20 & 21_*{panel}\r\n*Reproducer:*\r\n * use this branch: [https://github.com/dejan2609/kafka/tree/KAFKA-19664] (i.e. this PR: [https://github.com/apache/kafka/pull/20561])\r\n * execute: *./gradlew :clients:test --tests \"org.apache.kafka.common.network.SslTransportLayerTest\" -i* and change Java versions\r\n * test results:\r\n ** {*}Java 17{*}: (/)\r\n ** J{*}ava 24{*}: (/)\r\n ** {*}Java 25{*}: 159 tests completed, *8 failed* (x)\r\n\r\n*Test results on Github CI:*\r\n!Screenshot from 2025-10-07 19-59-32.png!\r\n\r\n*Test results locally:*\r\n{code:java}\r\ndejan@dejan-HP-ProBook-450-G7:~/kafka$ git log -3 --oneline\u00a0\r\na37616a1eb (HEAD -> KAFKA-19664, origin/KAFKA-19664) KAFKA-19664 Support building with Java 25 (LTS release)\r\nc6bbbbe24d KAFKA-19174 Gradle version upgrade 8 -->> 9 (#19513)\r\nf5a87b3703 KAFKA-19748: Add a note in docs about memory leak in Kafka Streams 4.1.0 \u00a0(#20639)\r\ndejan@dejan-HP-ProBook-450-G7:~/kafka$ java -version\u00a0\r\nopenjdk version \"17.0.16\" 2025-07-15\r\nOpenJDK Runtime Environment Temurin-17.0.16+8 (build 17.0.16+8)\r\nOpenJDK 64-Bit Server VM Temurin-17.0.16+8 (build 17.0.16+8, mixed mode, sharing)\r\ndejan@dejan-HP-ProBook-450-G7:~/kafka$ ./gradlew :clients:test --tests \"org.apache.kafka.common.network.SslTransportLayerTest\" -q\r\nStarting build with version 4.2.0-SNAPSHOT (commit id a37616a1) using Gradle 9.1.0, Java 17 and Scala 2.13.17\r\nBuild properties: ignoreFailures=false, maxParallelForks=8, maxScalacThreads=8, maxTestRetries=0\r\nMessageGenerator: processed 197 Kafka message JSON file(s).\r\nMessageGenerator: processed 4 Kafka message JSON file(s).\r\nNote: Some input files use or override a deprecated API.\r\nNote: Recompile with -Xlint:deprecation for details.\r\nOpenJDK 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended\r\ndejan@dejan-HP-ProBook-450-G7:~/kafka$ sdk use java 24.0.2-tem\r\n\r\nUsing java version 24.0.2-tem in this shell.\r\ndejan@dejan-HP-ProBook-450-G7:~/kafka$ java -version\r\nopenjdk version \"24.0.2\" 2025-07-15\r\nOpenJDK Runtime Environment Temurin-24.0.2+12 (build 24.0.2+12)\r\nOpenJDK 64-Bit Server VM Temurin-24.0.2+12 (build 24.0.2+12, mixed mode, sharing)\r\ndejan@dejan-HP-ProBook-450-G7:~/kafka$ ./gradlew :clients:test --tests \"org.apache.kafka.common.network.SslTransportLayerTest\" -q\r\nStarting build with version 4.2.0-SNAPSHOT (commit id a37616a1) using Gradle 9.1.0, Java 24 and Scala 2.13.17\r\nBuild properties: ignoreFailures=false, maxParallelForks=8, maxScalacThreads=8, maxTestRetries=0\r\nMessageGenerator: processed 197 Kafka message JSON file(s).\r\nMessageGenerator: processed 4 Kafka message JSON file(s).\r\nNote: Some input files use or override a deprecated API.\r\nNote: Recompile with -Xlint:deprecation for details.\r\nOpenJDK 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended\r\ndejan@dejan-HP-ProBook-450-G7:~/kafka$ sdk use java 25-tem\r\n\r\nUsing java version 25-tem in this shell.\r\ndejan@dejan-HP-ProBook-450-G7:~/kafka$ java -version\r\nopenjdk version \"25\" 2025-09-16 LTS\r\nOpenJDK Runtime Environment Temurin-25+36 (build 25+36-LTS)\r\nOpenJDK 64-Bit Server VM Temurin-25+36 (build 25+36-LTS, mixed mode, sharing)\r\ndejan@dejan-HP-ProBook-450-G7:~/kafka$ ./gradlew :clients:test --tests \"org.apache.kafka.common.network.SslTransportLayerTest\" -q\r\nStarting build with version 4.2.0-SNAPSHOT (commit id a37616a1) using Gradle 9.1.0, Java 25 and Scala 2.13.17\r\nBuild properties: ignoreFailures=false, maxParallelForks=8, maxScalacThreads=8, maxTestRetries=0\r\nMessageGenerator: processed 197 Kafka message JSON file(s).\r\nMessageGenerator: processed 4 Kafka message JSON file(s).\r\nNote: Some input files use or override a deprecated API.\r\nNote: Recompile with -Xlint:deprecation for details.\r\norg.apache.kafka.common.network.SslTransportLayerTest.testListenerConfigOverride(Args)[1] failed, log available in /home/dejan/kafka/clients/build/reports/testOutput/org.apache.kafka.common.network.SslTransportLayerTest.testListenerConfigOverride(Args)[1].test.stdout\r\nOpenJDK 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended\r\norg.apache.kafka.common.network.SslTransportLayerTest.testInterBrokerSslConfigValidation(Args)[1] failed, log available in /home/dejan/kafka/clients/build/reports/testOutput/org.apache.kafka.common.network.SslTransportLayerTest.testInterBrokerSslConfigValidation(Args)[1].test.stdout\r\norg.apache.kafka.common.network.SslTransportLayerTest.testServerTruststoreDynamicUpdate(Args)[1] failed, log available in /home/dejan/kafka/clients/build/reports/testOutput/org.apache.kafka.common.network.SslTransportLayerTest.testServerTruststoreDynamicUpdate(Args)[1].test.stdout\r\norg.apache.kafka.common.network.SslTransportLayerTest.testECKeyPair(Args)[1] failed, log available in /home/dejan/kafka/clients/build/reports/testOutput/org.apache.kafka.common.network.SslTransportLayerTest.testECKeyPair(Args)[1].test.stdout\r\norg.apache.kafka.common.network.SslTransportLayerTest.testPemFiles(Args)[1] failed, log available in /home/dejan/kafka/clients/build/reports/testOutput/org.apache.kafka.common.network.SslTransportLayerTest.testPemFiles(Args)[1].test.stdout\r\norg.apache.kafka.common.network.SslTransportLayerTest.testClientAuthenticationRequiredValidProvided(Args)[1] failed, log available in /home/dejan/kafka/clients/build/reports/testOutput/org.apache.kafka.common.network.SslTransportLayerTest.testClientAuthenticationRequiredValidProvided(Args)[1].test.stdout\r\norg.apache.kafka.common.network.SslTransportLayerTest.testDsaKeyPair(Args)[1] failed, log available in /home/dejan/kafka/clients/build/reports/testOutput/org.apache.kafka.common.network.SslTransportLayerTest.testDsaKeyPair(Args)[1].test.stdout\r\norg.apache.kafka.common.network.SslTransportLayerTest.testPemFilesWithoutClientKeyPassword(Args)[1] failed, log available in /home/dejan/kafka/clients/build/reports/testOutput/org.apache.kafka.common.network.SslTransportLayerTest.testPemFilesWithoutClientKeyPassword(Args)[1].test.stdout\r\n\r\n159 tests completed, 8 failed\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nExecution failed for task ':clients:test'.\r\n> There were failing tests. See the report at: file:///home/dejan/kafka/clients/build/reports/tests/test/index.html\r\n\r\nBUILD FAILED in 8m 22s\r\ndejan@dejan-HP-ProBook-450-G7:~/kafka$\r\n{code}", "reporter": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=dejan2609", "name": "dejan2609", "key": "dejan2609", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=dejan2609&avatarId=29049", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dejan2609&avatarId=29049", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dejan2609&avatarId=29049", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dejan2609&avatarId=29049"}, "displayName": "Dejan Stojadinovi\u0107", "active": true, "timeZone": "Europe/Belgrade"}, "comment": {"comments": [{"self": "https://issues.apache.org/jira/rest/api/2/issue/13630912/comment/18028203", "id": "18028203", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=gnarula", "name": "gnarula", "key": "gnarula", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "Gaurav Narula", "active": true, "timeZone": "Etc/UTC"}, "body": "[~dejan2609] Thanks for reporting this. I think this is because [TestUtils::CertificateBuilder|https://github.com/dejan2609/kafka/blob/a21a1b0a84b577724d0030a02b2ad7f2d08890e2/clients/src/test/java/org/apache/kafka/test/TestSslUtils.java#L402]'s constructor uses {{SHA1withRSA}} as the signature algorithm which is likely disabled by default. Please try updating the signature algorithm to say {{SHA256withRSA}}", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=gnarula", "name": "gnarula", "key": "gnarula", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "Gaurav Narula", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-10-07T20:56:19.941+0000", "updated": "2025-10-07T20:56:19.941+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13630912/comment/18028206", "id": "18028206", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=dejan2609", "name": "dejan2609", "key": "dejan2609", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=dejan2609&avatarId=29049", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dejan2609&avatarId=29049", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dejan2609&avatarId=29049", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dejan2609&avatarId=29049"}, "displayName": "Dejan Stojadinovi\u0107", "active": true, "timeZone": "Europe/Belgrade"}, "body": "You got that right [~gnarula] :) !\r\n\r\nThank you for the tip (y)", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=dejan2609", "name": "dejan2609", "key": "dejan2609", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=dejan2609&avatarId=29049", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dejan2609&avatarId=29049", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dejan2609&avatarId=29049", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dejan2609&avatarId=29049"}, "displayName": "Dejan Stojadinovi\u0107", "active": true, "timeZone": "Europe/Belgrade"}, "created": "2025-10-07T21:34:38.180+0000", "updated": "2025-10-07T21:34:38.180+0000"}], "maxResults": 2, "total": 2, "startAt": 0}, "priority": {"self": "https://issues.apache.org/jira/rest/api/2/priority/3", "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg", "name": "Major", "id": "3"}, "status": {"self": "https://issues.apache.org/jira/rest/api/2/status/5", "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.", "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png", "name": "Resolved", "id": "5", "statusCategory": {"self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3", "id": 3, "key": "done", "colorName": "green", "name": "Done"}}}}