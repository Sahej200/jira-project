{"expand": "renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations", "id": "13621135", "self": "https://issues.apache.org/jira/rest/api/2/issue/13621135", "key": "HADOOP-19588", "fields": {"summary": "S3A: Support for S3express Access Points", "description": "* Currently, the endpoint for using S3 accesspoint is resolved for S3 and S3 on outposts: https://github.com/apache/hadoop/blob/trunk/hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/ArnResource.java#L29-L30. However, for s3express, the endpoint is \"s3express-<zoneId>.<region>.amazonaws.com\". (https://docs.aws.amazon.com/AmazonS3/latest/userguide/directory-bucket-az-networking.html). This ticket adds support for s3express endpoint.\r\n\r\n* Additionally, for access objects using s3express in the `S3AFileSystem`, we need to parse the access point ARN for an S3express access point into the access point name, since ARNs aren't supported on S3express other than in IAM policies. (https://docs.aws.amazon.com/AmazonS3/latest/userguide/access-points-directory-buckets-restrictions-limitations-naming-rules.html). This ticket also addresses this change.\r\n\r\n* This ticket also updates the SDK version used by the changes to `2.31.12`, which is the version (at minimum) needed to use s3express access points. It does not do the SDK upgrade, but only the version of the dependency.", "reporter": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=revathivijay", "name": "revathivijay", "key": "JIRAUSER310038", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "Revathi Vijay", "active": true, "timeZone": "Etc/UTC"}, "comment": {"comments": [{"self": "https://issues.apache.org/jira/rest/api/2/issue/13621135/comment/17982752", "id": "17982752", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org", "name": "stevel@apache.org", "key": "stevel@apache.org", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"}, "displayName": "Steve Loughran", "active": true, "timeZone": "Europe/London"}, "body": "* SDK update is a separate process, you will need to do all of it, including that third party testing. \r\nhttps://github.com/steveloughran/engineering-proposals/blob/trunk/qualifying-an-SDK-upgrade.md\r\n\r\nNew code must go into org.apache.hadoop.fs.s3a.impl.S3ExpressStorage\r\n\r\nWe have some logic which recognises when a store is s3express and therefore that list calls will return prefixes of all incomplete uploads, and exports this information through filesystem capability probes. This will need to be the same.\r\n\r\nPresumably bucket names will be s3express patterns, right? in which case that recognition should still work.\r\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org", "name": "stevel@apache.org", "key": "stevel@apache.org", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"}, "displayName": "Steve Loughran", "active": true, "timeZone": "Europe/London"}, "created": "2025-06-18T17:21:23.294+0000", "updated": "2025-06-18T17:21:23.294+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13621135/comment/17982784", "id": "17982784", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=revathivijay", "name": "revathivijay", "key": "JIRAUSER310038", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "Revathi Vijay", "active": true, "timeZone": "Etc/UTC"}, "body": "Bucket names will be s3express patterns, yes, but access points with the s3express pattern will only be recognized by SDK version 2.31.12 or above. Buckets should work with the current SDK version but access points will not.\r\nhttps://github.com/aws/aws-sdk-java-v2/blob/master/CHANGELOG.md#23112-2025-03-31", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=revathivijay", "name": "revathivijay", "key": "JIRAUSER310038", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "Revathi Vijay", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-06-18T18:25:07.561+0000", "updated": "2025-06-18T18:25:07.561+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13621135/comment/17983639", "id": "17983639", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=ahmar", "name": "ahmar", "key": "JIRAUSER283484", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34055", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34055", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34055", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34055"}, "displayName": "Ahmar Suhail", "active": true, "timeZone": "Etc/UTC"}, "body": "[~stevel@apache.org] couple of the S3 Express AWS teams need an upgraded SDK. Now that the third party issue is fixed, we should be good to move to a 2.30.x release. I had advised [~revathivijay] to just cut the PR with the version bump, the SDK upgrade will still need to happen separately but don't think it's possible for someone completely new to the project to get that right.\u00a0I can do it once 3.4.2 release wraps up.", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=ahmar", "name": "ahmar", "key": "JIRAUSER283484", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34055", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34055", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34055", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34055"}, "displayName": "Ahmar Suhail", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-06-19T09:34:15.246+0000", "updated": "2025-06-19T09:34:15.246+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13621135/comment/17983671", "id": "17983671", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org", "name": "stevel@apache.org", "key": "stevel@apache.org", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"}, "displayName": "Steve Loughran", "active": true, "timeZone": "Europe/London"}, "body": "I agree with it being hard, but I want them to do a best effort of testing whole stack against s3 express before their changes, and against gcs for testing third party. No need to check logs, command line etc.\r\n\r\nonce through the hadoop-aws tests, then they can do their work atop it\r\n* they'll know any test failures against s3 express are  not from their code\r\n* we'll know that third party support does appear to be back, so it is actually worthwhile having them do the work, rather than it be blocked later", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=stevel%40apache.org", "name": "stevel@apache.org", "key": "stevel@apache.org", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=stevel%40apache.org&avatarId=16513", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stevel%40apache.org&avatarId=16513", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stevel%40apache.org&avatarId=16513", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stevel%40apache.org&avatarId=16513"}, "displayName": "Steve Loughran", "active": true, "timeZone": "Europe/London"}, "created": "2025-06-19T11:16:27.676+0000", "updated": "2025-06-19T11:16:27.676+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13621135/comment/17983675", "id": "17983675", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=ahmar", "name": "ahmar", "key": "JIRAUSER283484", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34055", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34055", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34055", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34055"}, "displayName": "Ahmar Suhail", "active": true, "timeZone": "Etc/UTC"}, "body": "that sounds good, will discuss with [~revathivijay]\u00a0", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=ahmar", "name": "ahmar", "key": "JIRAUSER283484", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34055", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34055", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34055", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34055"}, "displayName": "Ahmar Suhail", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-06-19T11:31:41.608+0000", "updated": "2025-06-19T11:31:41.608+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13621135/comment/18023231", "id": "18023231", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "github-actions[bot] commented on PR #7746:\nURL: https://github.com/apache/hadoop/pull/7746#issuecomment-3340860957\n\n   We're closing this stale PR because it has been open for 100 days with no activity. This isn't a judgement on the merit of the PR in any way. It's just a way of keeping the PR queue manageable.\n   If you feel like this was a mistake, or you would like to continue working on it, please feel free to re-open it and ask for a committer to remove the stale tag and review again.\n   Thanks all for your contribution.\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-09-27T00:21:00.658+0000", "updated": "2025-09-27T00:21:00.658+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13621135/comment/18023352", "id": "18023352", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "github-actions[bot] closed pull request #7746: HADOOP-19588. S3A support for S3 express access points\nURL: https://github.com/apache/hadoop/pull/7746\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-09-28T00:24:25.853+0000", "updated": "2025-09-28T00:24:25.853+0000"}], "maxResults": 7, "total": 7, "startAt": 0}, "priority": {"self": "https://issues.apache.org/jira/rest/api/2/priority/4", "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg", "name": "Minor", "id": "4"}, "status": {"self": "https://issues.apache.org/jira/rest/api/2/status/1", "description": "The issue is open and ready for the assignee to start work on it.", "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png", "name": "Open", "id": "1", "statusCategory": {"self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2", "id": 2, "key": "new", "colorName": "blue-gray", "name": "To Do"}}}}