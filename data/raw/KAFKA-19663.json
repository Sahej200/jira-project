{"expand": "renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations", "id": "13627866", "self": "https://issues.apache.org/jira/rest/api/2/issue/13627866", "key": "KAFKA-19663", "fields": {"summary": "kafka-broker-api tool should support to get controller api version", "description": "like tool kafka-broker-api-versions.sh, we can get all RPC version from broker.\r\n\r\nIt should also support for controller.\r\n\r\nKIP: [https://cwiki.apache.org/confluence/display/KAFKA/KIP-1220%3A+kafka-broker-api-versions+tool+support+controllers]", "reporter": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=taijuwu", "name": "taijuwu", "key": "JIRAUSER301374", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "TaiJuWu", "active": true, "timeZone": "Etc/UTC"}, "comment": {"comments": [{"self": "https://issues.apache.org/jira/rest/api/2/issue/13627866/comment/18022147", "id": "18022147", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=schofielaj", "name": "schofielaj", "key": "schofielaj", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "Andrew Schofield", "active": true, "timeZone": "Etc/UTC"}, "body": "I've been meaning to do this for a while. Please fix this. When adding new APIs and testing the upgrades, this would be a really useful tool.", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=schofielaj", "name": "schofielaj", "key": "schofielaj", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "Andrew Schofield", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-09-23T12:14:04.770+0000", "updated": "2025-09-23T12:14:04.770+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13627866/comment/18022153", "id": "18022153", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=taijuwu", "name": "taijuwu", "key": "JIRAUSER301374", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "TaiJuWu", "active": true, "timeZone": "Etc/UTC"}, "body": "I will prepare KIP ASAP.", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=taijuwu", "name": "taijuwu", "key": "JIRAUSER301374", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "TaiJuWu", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-09-23T12:40:35.196+0000", "updated": "2025-09-23T12:40:35.196+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13627866/comment/18022472", "id": "18022472", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=chia7712", "name": "chia7712", "key": "chia7712", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=chia7712&avatarId=46815", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chia7712&avatarId=46815", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chia7712&avatarId=46815", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chia7712&avatarId=46815"}, "displayName": "Chia-Ping Tsai", "active": true, "timeZone": "Asia/Taipei"}, "body": "If all we want is to list the RPC versions of the \"voters\", this can be done with `DescribeQuorumRequest`. That means we don't need a KIP to support `bootstrap.controller`. By contrast, we would need a KIP if we wanted to list all the RPCs of \"observers\"\r\n\r\n[~taijuwu] [~schofielaj] WDYT? ", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=chia7712", "name": "chia7712", "key": "chia7712", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=chia7712&avatarId=46815", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chia7712&avatarId=46815", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chia7712&avatarId=46815", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chia7712&avatarId=46815"}, "displayName": "Chia-Ping Tsai", "active": true, "timeZone": "Asia/Taipei"}, "created": "2025-09-24T15:54:31.747+0000", "updated": "2025-09-24T15:54:31.747+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13627866/comment/18022613", "id": "18022613", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=taijuwu", "name": "taijuwu", "key": "JIRAUSER301374", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "TaiJuWu", "active": true, "timeZone": "Etc/UTC"}, "body": "If we don't need all controllers including observers, that is good enough.\r\nBut there is another benefit if we have KIP is we can align the tool usage like [https://cwiki.apache.org/confluence/display/KAFKA/KIP-1147%3A+Improve+consistency+of+command-line+arguments]", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=taijuwu", "name": "taijuwu", "key": "JIRAUSER301374", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "TaiJuWu", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-09-25T04:22:38.286+0000", "updated": "2025-09-25T04:22:38.286+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13627866/comment/18023065", "id": "18023065", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=schofielaj", "name": "schofielaj", "key": "schofielaj", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "Andrew Schofield", "active": true, "timeZone": "Etc/UTC"}, "body": "I *think* this needs a KIP really. When I played around with this before using a cluster with separate controllers and brokers, I was not able to use `kafka-broker-api-versions` with the controller because the tool uses APIs which the controller does not support (or that was my guess anyway).{*}{*}", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=schofielaj", "name": "schofielaj", "key": "schofielaj", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "Andrew Schofield", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-09-26T09:55:09.557+0000", "updated": "2025-09-26T09:55:09.557+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13627866/comment/18023270", "id": "18023270", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=chia7712", "name": "chia7712", "key": "chia7712", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=chia7712&avatarId=46815", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chia7712&avatarId=46815", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chia7712&avatarId=46815", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chia7712&avatarId=46815"}, "displayName": "Chia-Ping Tsai", "active": true, "timeZone": "Asia/Taipei"}, "body": "I assume the tool could leverage a bootstrap broker to obtain all node endpoints.\r\n\r\n1. Retrieve voter endpoints by describing the quorum\r\n2. Use the voter endpoints to discover observer endpoints by describe the cluster\r\n\r\nWith this approach, we don\u2019t need to modify the (public) input configs", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=chia7712", "name": "chia7712", "key": "chia7712", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=chia7712&avatarId=46815", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chia7712&avatarId=46815", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chia7712&avatarId=46815", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chia7712&avatarId=46815"}, "displayName": "Chia-Ping Tsai", "active": true, "timeZone": "Asia/Taipei"}, "created": "2025-09-27T10:32:19.702+0000", "updated": "2025-09-27T10:32:19.702+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13627866/comment/18023370", "id": "18023370", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=taijuwu", "name": "taijuwu", "key": "JIRAUSER301374", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "TaiJuWu", "active": true, "timeZone": "Etc/UTC"}, "body": "You are right, we can get most controllera information from cluster too.\r\nThe node named 1234 is broker instead of controller so controller information miss that.\r\n\r\n!image-2025-09-28-09-59-02-231.png|width=765,height=244!", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=taijuwu", "name": "taijuwu", "key": "JIRAUSER301374", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "TaiJuWu", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-09-28T02:02:30.230+0000", "updated": "2025-09-28T02:06:54.699+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13627866/comment/18030228", "id": "18030228", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=taijuwu", "name": "taijuwu", "key": "JIRAUSER301374", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "TaiJuWu", "active": true, "timeZone": "Etc/UTC"}, "body": "After finding feature tool only can return controllers' api by using bootstrap-controller and returning brokers' api forbtbootstrap-broker, I think we should use two argument instead of one, and this change is more consistent.", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=taijuwu", "name": "taijuwu", "key": "JIRAUSER301374", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "TaiJuWu", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-10-16T02:53:02.948+0000", "updated": "2025-10-16T02:53:02.948+0000"}], "maxResults": 8, "total": 8, "startAt": 0}, "priority": {"self": "https://issues.apache.org/jira/rest/api/2/priority/3", "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg", "name": "Major", "id": "3"}, "status": {"self": "https://issues.apache.org/jira/rest/api/2/status/3", "description": "This issue is being actively worked on at the moment by the assignee.", "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/inprogress.png", "name": "In Progress", "id": "3", "statusCategory": {"self": "https://issues.apache.org/jira/rest/api/2/statuscategory/4", "id": 4, "key": "indeterminate", "colorName": "yellow", "name": "In Progress"}}}}