{"expand": "renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations", "id": "13630869", "self": "https://issues.apache.org/jira/rest/api/2/issue/13630869", "key": "KAFKA-19762", "fields": {"summary": "Turn on Gradle reproducible builds feature", "description": "*Prologue:* [https://github.com/apache/kafka/pull/19513#discussion_r2405757923]\u00a0\r\n\r\n*Note:* during the Gradle version upgrade from 8 to 9 (KAFKA-19174), the reproducible build feature was turned off (but it should be switched on at some point in the future)\r\n\r\n*Related Gradle issues and links:*\r\n * \u00a0[https://github.com/gradle/gradle/issues/34643]\r\n * [https://github.com/gradle/gradle/issues/30871] \u00a0\r\n * [https://docs.gradle.org/9.1.0/userguide/working_with_files.html#sec:reproducible_archives]\r\n * [https://docs.gradle.org/9.1.0/userguide/upgrading_major_version_9.html#reproducible_archives_by_default]\u00a0\r\n * [https://docs.gradle.org/9.1.0/dsl/org.gradle.api.tasks.bundling.Tar.html#org.gradle.api.tasks.bundling.Tar:preserveFileTimestamps] \u00a0\r\n\r\n\u00a0\r\n\r\n*Definition of done (at the minimum):*\r\n * *./gradlew releaseTarGz* works as expected\r\n * produced archive works as expected (Kafka cluster starts, messages can be produced/consumed, etc) : [https://kafka.apache.org/quickstart]\u00a0\r\n\r\n\u00a0", "reporter": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=dejan2609", "name": "dejan2609", "key": "dejan2609", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=dejan2609&avatarId=29049", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dejan2609&avatarId=29049", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dejan2609&avatarId=29049", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dejan2609&avatarId=29049"}, "displayName": "Dejan Stojadinovi\u0107", "active": true, "timeZone": "Europe/Belgrade"}, "comment": {"comments": [{"self": "https://issues.apache.org/jira/rest/api/2/issue/13630869/comment/18030922", "id": "18030922", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=naveenthuvana", "name": "naveenthuvana", "key": "JIRAUSER311196", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34050", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34050", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34050", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34050"}, "displayName": "Naveen", "active": true, "timeZone": "Etc/UTC"}, "body": "Hi [~dejan2609] Per the docs\u00a0reproducible builds is enabled by deafult on gradle 9\r\n\r\n{code:java}\r\nStarting with Gradle 9, archives are reproducible by default.\r\n{code}\r\n\r\nis this code block no longer required? \r\n\r\n\r\n{code:java}\r\n  tasks.withType(AbstractArchiveTask).configureEach {\r\n    reproducibleFileOrder = false\r\n    preserveFileTimestamps = true\r\n    useFileSystemPermissions()\r\n  }\r\n{code}\r\n\r\nSources:\r\n[Gradle Docks|https://docs.gradle.org/current/userguide/working_with_files.html#sec:reproducible_archives]\r\n[Gradle Reproducible Plugin|https://gradlex.org/reproducible-builds/]\r\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=naveenthuvana", "name": "naveenthuvana", "key": "JIRAUSER311196", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34050", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34050", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34050", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34050"}, "displayName": "Naveen", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-10-19T06:20:10.402+0000", "updated": "2025-10-19T06:20:10.402+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13630869/comment/18033141", "id": "18033141", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=dejan2609", "name": "dejan2609", "key": "dejan2609", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=dejan2609&avatarId=29049", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dejan2609&avatarId=29049", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dejan2609&avatarId=29049", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dejan2609&avatarId=29049"}, "displayName": "Dejan Stojadinovi\u0107", "active": true, "timeZone": "Europe/Belgrade"}, "body": "Hi [~naveenthuvana]\u00a0\r\n\r\nMy suggestion for you is to try to build with *reproducibleFileOrder = true* (this is a default, so it can be left out) and *preserveFileTimestamps = true*", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=dejan2609", "name": "dejan2609", "key": "dejan2609", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=dejan2609&avatarId=29049", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dejan2609&avatarId=29049", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dejan2609&avatarId=29049", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dejan2609&avatarId=29049"}, "displayName": "Dejan Stojadinovi\u0107", "active": true, "timeZone": "Europe/Belgrade"}, "created": "2025-10-27T08:47:20.129+0000", "updated": "2025-10-27T08:47:20.129+0000"}], "maxResults": 2, "total": 2, "startAt": 0}, "priority": {"self": "https://issues.apache.org/jira/rest/api/2/priority/4", "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/minor.svg", "name": "Minor", "id": "4"}, "status": {"self": "https://issues.apache.org/jira/rest/api/2/status/1", "description": "The issue is open and ready for the assignee to start work on it.", "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png", "name": "Open", "id": "1", "statusCategory": {"self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2", "id": 2, "key": "new", "colorName": "blue-gray", "name": "To Do"}}}}