{"expand": "renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations", "id": "13607272", "self": "https://issues.apache.org/jira/rest/api/2/issue/13607272", "key": "HADOOP-19446", "fields": {"summary": "ABFS: [FnsOverBlob][Tests] Add Tests For Negative Scenarios Identified for Delete Operation", "description": "We have identified a few scenarios worth adding integration or mocked behavior tests for while implementing FNS Support over Blob Endpoint.\r\n\r\nAttached file shows the the scenarios identified for Ingress Related operations on blob Endpoint (Create + Append + Flush filesystem calls)\r\n\r\nThis Jira tracks implementing these tests.", "reporter": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=anujmodi", "name": "anujmodi", "key": "JIRAUSER307456", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34055", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34055", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34055", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34055"}, "displayName": "Anuj Modi", "active": true, "timeZone": "Asia/Kolkata"}, "comment": {"comments": [{"self": "https://issues.apache.org/jira/rest/api/2/issue/13607272/comment/17925596", "id": "17925596", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "manika137 opened a new pull request, #7376:\nURL: https://github.com/apache/hadoop/pull/7376\n\n   ### Description of PR\r\n   JIRA: https://issues.apache.org/jira/browse/HADOOP-19446\r\n   We have identified a few scenarios worth adding integration or mocked behavior tests for while implementing FNS Support over Blob Endpoint. This PR adds tests for the negative scenarios identified for the delete operation particularly.\r\n   \r\n   Yet to add the test results...\r\n   \n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-02-10T14:46:41.556+0000", "updated": "2025-02-10T14:46:41.556+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13607272/comment/17925632", "id": "17925632", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "hadoop-yetus commented on PR #7376:\nURL: https://github.com/apache/hadoop/pull/7376#issuecomment-2648641086\n\n   :confetti_ball: **+1 overall**\r\n   \r\n   \r\n   \r\n   \r\n   \r\n   \r\n   | Vote | Subsystem | Runtime |  Logfile | Comment |\r\n   |:----:|----------:|--------:|:--------:|:-------:|\r\n   | +0 :ok: |  reexec  |   0m 35s |  |  Docker mode activated.  |\r\n   |||| _ Prechecks _ |\r\n   | +1 :green_heart: |  dupname  |   0m  0s |  |  No case conflicting files found.  |\r\n   | +0 :ok: |  codespell  |   0m  0s |  |  codespell was not available.  |\r\n   | +0 :ok: |  detsecrets  |   0m  0s |  |  detect-secrets was not available.  |\r\n   | +1 :green_heart: |  @author  |   0m  0s |  |  The patch does not contain any @author tags.  |\r\n   | +1 :green_heart: |  test4tests  |   0m  0s |  |  The patch appears to include 1 new or modified test files.  |\r\n   |||| _ trunk Compile Tests _ |\r\n   | +1 :green_heart: |  mvninstall  |  35m 37s |  |  trunk passed  |\r\n   | +1 :green_heart: |  compile  |   0m 40s |  |  trunk passed with JDK Ubuntu-11.0.26+4-post-Ubuntu-1ubuntu120.04  |\r\n   | +1 :green_heart: |  compile  |   0m 38s |  |  trunk passed with JDK Private Build-1.8.0_442-8u442-b06~us1-0ubuntu1~20.04-b06  |\r\n   | +1 :green_heart: |  checkstyle  |   0m 32s |  |  trunk passed  |\r\n   | +1 :green_heart: |  mvnsite  |   0m 42s |  |  trunk passed  |\r\n   | +1 :green_heart: |  javadoc  |   0m 42s |  |  trunk passed with JDK Ubuntu-11.0.26+4-post-Ubuntu-1ubuntu120.04  |\r\n   | +1 :green_heart: |  javadoc  |   0m 35s |  |  trunk passed with JDK Private Build-1.8.0_442-8u442-b06~us1-0ubuntu1~20.04-b06  |\r\n   | +1 :green_heart: |  spotbugs  |   1m  6s |  |  trunk passed  |\r\n   | +1 :green_heart: |  shadedclient  |  33m 52s |  |  branch has no errors when building and testing our client artifacts.  |\r\n   |||| _ Patch Compile Tests _ |\r\n   | +1 :green_heart: |  mvninstall  |   0m 30s |  |  the patch passed  |\r\n   | +1 :green_heart: |  compile  |   0m 32s |  |  the patch passed with JDK Ubuntu-11.0.26+4-post-Ubuntu-1ubuntu120.04  |\r\n   | +1 :green_heart: |  javac  |   0m 32s |  |  the patch passed  |\r\n   | +1 :green_heart: |  compile  |   0m 28s |  |  the patch passed with JDK Private Build-1.8.0_442-8u442-b06~us1-0ubuntu1~20.04-b06  |\r\n   | +1 :green_heart: |  javac  |   0m 28s |  |  the patch passed  |\r\n   | +1 :green_heart: |  blanks  |   0m  0s |  |  The patch has no blanks issues.  |\r\n   | +1 :green_heart: |  checkstyle  |   0m 20s |  |  the patch passed  |\r\n   | +1 :green_heart: |  mvnsite  |   0m 34s |  |  the patch passed  |\r\n   | +1 :green_heart: |  javadoc  |   0m 28s |  |  the patch passed with JDK Ubuntu-11.0.26+4-post-Ubuntu-1ubuntu120.04  |\r\n   | +1 :green_heart: |  javadoc  |   0m 26s |  |  the patch passed with JDK Private Build-1.8.0_442-8u442-b06~us1-0ubuntu1~20.04-b06  |\r\n   | +1 :green_heart: |  spotbugs  |   1m  9s |  |  the patch passed  |\r\n   | +1 :green_heart: |  shadedclient  |  34m  8s |  |  patch has no errors when building and testing our client artifacts.  |\r\n   |||| _ Other Tests _ |\r\n   | +1 :green_heart: |  unit  |   2m 49s |  |  hadoop-azure in the patch passed.  |\r\n   | +1 :green_heart: |  asflicense  |   0m 37s |  |  The patch does not generate ASF License warnings.  |\r\n   |  |   | 118m 23s |  |  |\r\n   \r\n   \r\n   | Subsystem | Report/Notes |\r\n   |----------:|:-------------|\r\n   | Docker | ClientAPI=1.47 ServerAPI=1.47 base: https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-7376/1/artifact/out/Dockerfile |\r\n   | GITHUB PR | https://github.com/apache/hadoop/pull/7376 |\r\n   | Optional Tests | dupname asflicense compile javac javadoc mvninstall mvnsite unit shadedclient spotbugs checkstyle codespell detsecrets |\r\n   | uname | Linux 9fb3e2ec763a 5.15.0-130-generic #140-Ubuntu SMP Wed Dec 18 17:59:53 UTC 2024 x86_64 x86_64 x86_64 GNU/Linux |\r\n   | Build tool | maven |\r\n   | Personality | dev-support/bin/hadoop.sh |\r\n   | git revision | trunk / 6262ad8b1f8e25aeffd762fed8491b5ecc581768 |\r\n   | Default Java | Private Build-1.8.0_442-8u442-b06~us1-0ubuntu1~20.04-b06 |\r\n   | Multi-JDK versions | /usr/lib/jvm/java-11-openjdk-amd64:Ubuntu-11.0.26+4-post-Ubuntu-1ubuntu120.04 /usr/lib/jvm/java-8-openjdk-amd64:Private Build-1.8.0_442-8u442-b06~us1-0ubuntu1~20.04-b06 |\r\n   |  Test Results | https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-7376/1/testReport/ |\r\n   | Max. process+thread count | 545 (vs. ulimit of 5500) |\r\n   | modules | C: hadoop-tools/hadoop-azure U: hadoop-tools/hadoop-azure |\r\n   | Console output | https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-7376/1/console |\r\n   | versions | git=2.25.1 maven=3.6.3 spotbugs=4.2.2 |\r\n   | Powered by | Apache Yetus 0.14.0 https://yetus.apache.org |\r\n   \r\n   \r\n   This message was automatically generated.\r\n   \r\n   \n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-02-10T16:46:30.240+0000", "updated": "2025-02-10T16:46:30.240+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13607272/comment/17928633", "id": "17928633", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "manika137 commented on PR #7376:\nURL: https://github.com/apache/hadoop/pull/7376#issuecomment-2670413767\n\n   ## Test Results\r\n   ============================================================\r\n   HNS-OAuth-DFS\r\n   ============================================================\r\n   \r\n   [WARNING] Tests run: 174, Failures: 0, Errors: 0, Skipped: 4\r\n   [WARNING] Tests run: 767, Failures: 0, Errors: 0, Skipped: 139\r\n   [WARNING] Tests run: 147, Failures: 0, Errors: 0, Skipped: 1\r\n   [WARNING] Tests run: 262, Failures: 0, Errors: 0, Skipped: 32\r\n   \r\n   ============================================================\r\n   HNS-SharedKey-DFS\r\n   ============================================================\r\n   \r\n   [WARNING] Tests run: 174, Failures: 0, Errors: 0, Skipped: 5\r\n   [WARNING] Tests run: 770, Failures: 0, Errors: 0, Skipped: 94\r\n   [WARNING] Tests run: 147, Failures: 0, Errors: 0, Skipped: 1\r\n   [WARNING] Tests run: 262, Failures: 0, Errors: 0, Skipped: 19\r\n   \r\n   ============================================================\r\n   NonHNS-SharedKey-DFS\r\n   ============================================================\r\n   \r\n   [WARNING] Tests run: 174, Failures: 0, Errors: 0, Skipped: 11\r\n   [WARNING] Tests run: 609, Failures: 0, Errors: 0, Skipped: 192\r\n   [WARNING] Tests run: 147, Failures: 0, Errors: 0, Skipped: 3\r\n   [WARNING] Tests run: 262, Failures: 0, Errors: 0, Skipped: 20\r\n   \r\n   ============================================================\r\n   AppendBlob-HNS-OAuth-DFS\r\n   ============================================================\r\n   \r\n   [WARNING] Tests run: 174, Failures: 0, Errors: 0, Skipped: 4\r\n   [WARNING] Tests run: 767, Failures: 0, Errors: 0, Skipped: 144\r\n   [WARNING] Tests run: 124, Failures: 0, Errors: 0, Skipped: 2\r\n   [WARNING] Tests run: 262, Failures: 0, Errors: 0, Skipped: 32\r\n   \r\n   ============================================================\r\n   NonHNS-SharedKey-Blob\r\n   ============================================================\r\n   \r\n   [WARNING] Tests run: 174, Failures: 0, Errors: 0, Skipped: 11\r\n   [WARNING] Tests run: 612, Failures: 0, Errors: 0, Skipped: 134\r\n   [WARNING] Tests run: 147, Failures: 0, Errors: 0, Skipped: 4\r\n   [WARNING] Tests run: 262, Failures: 0, Errors: 0, Skipped: 20\r\n   \r\n   ============================================================\r\n   NonHNS-OAuth-DFS\r\n   ============================================================\r\n   \r\n   [WARNING] Tests run: 174, Failures: 0, Errors: 0, Skipped: 11\r\n   [WARNING] Tests run: 606, Failures: 0, Errors: 0, Skipped: 193\r\n   [WARNING] Tests run: 147, Failures: 0, Errors: 0, Skipped: 3\r\n   [WARNING] Tests run: 262, Failures: 0, Errors: 0, Skipped: 33\r\n   \r\n   ============================================================\r\n   NonHNS-OAuth-Blob\r\n   ============================================================\r\n   \r\n   [WARNING] Tests run: 174, Failures: 0, Errors: 0, Skipped: 11\r\n   [WARNING] Tests run: 609, Failures: 0, Errors: 0, Skipped: 135\r\n   [WARNING] Tests run: 147, Failures: 0, Errors: 0, Skipped: 4\r\n   [WARNING] Tests run: 262, Failures: 0, Errors: 0, Skipped: 33\r\n   \r\n   ============================================================\r\n   AppendBlob-NonHNS-OAuth-Blob\r\n   ============================================================\r\n   \r\n   [WARNING] Tests run: 174, Failures: 0, Errors: 0, Skipped: 11\r\n   [WARNING] Tests run: 607, Failures: 0, Errors: 0, Skipped: 152\r\n   [WARNING] Tests run: 124, Failures: 0, Errors: 0, Skipped: 5\r\n   [WARNING] Tests run: 262, Failures: 0, Errors: 0, Skipped: 33\r\n   \r\n   ============================================================\r\n   HNS-Oauth-DFS-IngressBlob\r\n   ============================================================\r\n   \r\n   [WARNING] Tests run: 174, Failures: 0, Errors: 0, Skipped: 4\r\n   [WARNING] Tests run: 641, Failures: 1, Errors: 0, Skipped: 142\r\n   [WARNING] Tests run: 147, Failures: 0, Errors: 0, Skipped: 1\r\n   [WARNING] Tests run: 262, Failures: 0, Errors: 0, Skipped: 32\r\n   \r\n   ============================================================\r\n   NonHNS-OAuth-DFS-IngressBlob\r\n   ============================================================\r\n   \r\n   [WARNING] Tests run: 174, Failures: 0, Errors: 0, Skipped: 11\r\n   [WARNING] Tests run: 606, Failures: 0, Errors: 0, Skipped: 191\r\n   [WARNING] Tests run: 147, Failures: 0, Errors: 0, Skipped: 3\r\n   [WARNING] Tests run: 262, Failures: 0, Errors: 0, Skipped: 33\r\n   \n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-02-20T04:07:31.452+0000", "updated": "2025-02-20T04:07:31.452+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13607272/comment/17930294", "id": "17930294", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "anujmodi2021 commented on code in PR #7376:\nURL: https://github.com/apache/hadoop/pull/7376#discussion_r1969592544\n\n\n##########\nhadoop-tools/hadoop-azure/src/test/java/org/apache/hadoop/fs/azurebfs/ITestAzureBlobFileSystemDelete.java:\n##########\n@@ -359,6 +494,11 @@ public void testDeleteImplicitDir() throws Exception {\n     AbfsBlobClient client = (AbfsBlobClient) fs.getAbfsClient();\n     client.deleteBlobPath(new Path(\"/testDir/dir1\"),\n             null, getTestTracingContext(fs, true));\n+\n+    //Deleting non-empty dir with recursion set as\n\nReview Comment:\n   Why this needed?\r\n   Also the test name says deleting implicit dir but it seems like it is deleting explicit dir only.\n\n\n\n##########\nhadoop-tools/hadoop-azure/src/test/java/org/apache/hadoop/fs/azurebfs/ITestAzureBlobFileSystemDelete.java:\n##########\n@@ -344,6 +363,122 @@ public void deleteBlobDirParallelThreadToDeleteOnDifferentTracingContext()\n     fs.close();\n   }\n \n+  /**\n+   * Test the deletion of file in an implicit directory.\n+   *\n+   * @throws Exception if an error occurs during the test execution\n+   */\n+  @Test\n+  public void testDeleteFileInImplicitDir() throws Exception {\n+    AzureBlobFileSystem fs = getFileSystem();\n+    assumeBlobServiceType();\n+\n+    Path p = new Path(\"/testDir/dir1\");\n+    Path p1 = new Path(\"/testDir/dir1/file1\");\n+    Path p2 = new Path(\"/testDir/dir1/file2\");\n+\n+    fs.create(p1);\n+    fs.create(p2);\n+    AbfsBlobClient client = (AbfsBlobClient) fs.getAbfsClient();\n+    client.deleteBlobPath(p, null,\n+        getTestTracingContext(fs, true));\n+\n+    // Deletion of file with different recursion values\n+    fs.delete(p1, false);\n+    fs.delete(p2, true);\n+\n+    Assertions.assertThat(fs.exists(p))\n+        .describedAs(\"The directory should exist.\")\n+        .isTrue();\n+    Assertions.assertThat(fs.exists(p1))\n+        .describedAs(\"Deleted file should not be present.\").isFalse();\n+    Assertions.assertThat(fs.exists(p2))\n+        .describedAs(\"Deleted file should not be present.\").isFalse();\n+  }\n+\n+  /**\n+   * Test that the file status of an empty explicit dir\n+   * should not exist after its deletion.\n+   *\n+   * @throws Exception if an error occurs during the test execution\n+   */\n+  @Test\n+  public void testDeleteEmptyExplicitDir() throws Exception {\n+    AzureBlobFileSystem fs = getFileSystem();\n+\n+    Path p1 = new Path(\"/testDir1/\");\n+\n+    fs.mkdirs(p1);\n+    fs.delete(p1, false);\n+\n+    Assertions.assertThat(fs.exists(p1))\n+        .describedAs(\"The deleted directory should not exist.\")\n+        .isFalse();\n+  }\n+\n+  /**\n+   * Test that deleting a non-empty explicit directory\n+   * can only be done with the recursive flag set to true.\n+   *\n+   * @throws Exception if an error occurs during the test execution\n+   */\n+  @Test\n+  public void testDeleteNonEmptyExplicitDir() throws Exception {\n+    AzureBlobFileSystem fs = getFileSystem();\n+\n+    Path p1 = new Path(\"/testDir1\");\n+    Path p2 = new Path(\"/testDir2\");\n+\n+    fs.create(new Path(\"/testDir1/f1.txt\"));\n+    fs.create(new Path(\"/testDir2/f2.txt\"));\n+\n+    fs.delete(p1, true);\n+\n+    //Deleting non-empty dir with recursion set as\n+    // false returns a FileAlreadyExistsException: 409-DirectoryNotEmpty\n+    intercept(FileAlreadyExistsException.class,\n+        () -> fs.delete(p2, false));\n+\n+    Assertions.assertThat(!fs.exists(p1))\n+        .describedAs(\"FileStatus of the deleted directory should not exist.\")\n+        .isTrue();\n+    Assertions.assertThat(!fs.exists(p1))\n+        .describedAs(\"FileStatus of the deleted directory should not exist.\")\n+        .isTrue();\n+  }\n+\n+  /**\n+   * Assert that deleting a non-existing path\n+   * leads to a FileNotFoundException.\n+   *\n+   * @throws Exception if an error occurs during the test execution\n+   */\n+  @Test\n+  public void testDeleteNonExistingPath() throws Exception {\n+    AzureBlobFileSystem fs = getFileSystem();\n+\n+    Path p = new Path(\"/nonExistingPath\");\n+    intercept(FileNotFoundException.class,\n+        () -> assertDeleted(fs, p, true));\n\nReview Comment:\n   can we simply call fs.delete() here?\n\n\n\n##########\nhadoop-tools/hadoop-azure/src/test/java/org/apache/hadoop/fs/azurebfs/ITestAzureBlobFileSystemDelete.java:\n##########\n@@ -344,6 +363,122 @@ public void deleteBlobDirParallelThreadToDeleteOnDifferentTracingContext()\n     fs.close();\n   }\n \n+  /**\n+   * Test the deletion of file in an implicit directory.\n+   *\n+   * @throws Exception if an error occurs during the test execution\n+   */\n+  @Test\n+  public void testDeleteFileInImplicitDir() throws Exception {\n+    AzureBlobFileSystem fs = getFileSystem();\n+    assumeBlobServiceType();\n+\n+    Path p = new Path(\"/testDir/dir1\");\n+    Path p1 = new Path(\"/testDir/dir1/file1\");\n+    Path p2 = new Path(\"/testDir/dir1/file2\");\n+\n+    fs.create(p1);\n+    fs.create(p2);\n+    AbfsBlobClient client = (AbfsBlobClient) fs.getAbfsClient();\n+    client.deleteBlobPath(p, null,\n\nReview Comment:\n   How is this delete on a file in implicit dir?\r\n   fs.create() will create explicit dir right?\n\n\n\n##########\nhadoop-tools/hadoop-azure/src/test/java/org/apache/hadoop/fs/azurebfs/ITestAzureBlobFileSystemDelete.java:\n##########\n@@ -344,6 +363,122 @@ public void deleteBlobDirParallelThreadToDeleteOnDifferentTracingContext()\n     fs.close();\n   }\n \n+  /**\n+   * Test the deletion of file in an implicit directory.\n+   *\n+   * @throws Exception if an error occurs during the test execution\n+   */\n+  @Test\n+  public void testDeleteFileInImplicitDir() throws Exception {\n+    AzureBlobFileSystem fs = getFileSystem();\n+    assumeBlobServiceType();\n+\n+    Path p = new Path(\"/testDir/dir1\");\n+    Path p1 = new Path(\"/testDir/dir1/file1\");\n+    Path p2 = new Path(\"/testDir/dir1/file2\");\n+\n+    fs.create(p1);\n+    fs.create(p2);\n+    AbfsBlobClient client = (AbfsBlobClient) fs.getAbfsClient();\n+    client.deleteBlobPath(p, null,\n+        getTestTracingContext(fs, true));\n+\n+    // Deletion of file with different recursion values\n+    fs.delete(p1, false);\n+    fs.delete(p2, true);\n+\n+    Assertions.assertThat(fs.exists(p))\n+        .describedAs(\"The directory should exist.\")\n+        .isTrue();\n+    Assertions.assertThat(fs.exists(p1))\n+        .describedAs(\"Deleted file should not be present.\").isFalse();\n+    Assertions.assertThat(fs.exists(p2))\n+        .describedAs(\"Deleted file should not be present.\").isFalse();\n+  }\n+\n+  /**\n+   * Test that the file status of an empty explicit dir\n+   * should not exist after its deletion.\n+   *\n+   * @throws Exception if an error occurs during the test execution\n+   */\n+  @Test\n+  public void testDeleteEmptyExplicitDir() throws Exception {\n+    AzureBlobFileSystem fs = getFileSystem();\n+\n+    Path p1 = new Path(\"/testDir1/\");\n+\n+    fs.mkdirs(p1);\n+    fs.delete(p1, false);\n+\n+    Assertions.assertThat(fs.exists(p1))\n+        .describedAs(\"The deleted directory should not exist.\")\n+        .isFalse();\n+  }\n+\n+  /**\n+   * Test that deleting a non-empty explicit directory\n+   * can only be done with the recursive flag set to true.\n+   *\n+   * @throws Exception if an error occurs during the test execution\n+   */\n+  @Test\n+  public void testDeleteNonEmptyExplicitDir() throws Exception {\n+    AzureBlobFileSystem fs = getFileSystem();\n+\n+    Path p1 = new Path(\"/testDir1\");\n+    Path p2 = new Path(\"/testDir2\");\n+\n+    fs.create(new Path(\"/testDir1/f1.txt\"));\n+    fs.create(new Path(\"/testDir2/f2.txt\"));\n+\n+    fs.delete(p1, true);\n+\n+    //Deleting non-empty dir with recursion set as\n+    // false returns a FileAlreadyExistsException: 409-DirectoryNotEmpty\n+    intercept(FileAlreadyExistsException.class,\n+        () -> fs.delete(p2, false));\n+\n+    Assertions.assertThat(!fs.exists(p1))\n+        .describedAs(\"FileStatus of the deleted directory should not exist.\")\n+        .isTrue();\n+    Assertions.assertThat(!fs.exists(p1))\n+        .describedAs(\"FileStatus of the deleted directory should not exist.\")\n+        .isTrue();\n+  }\n+\n+  /**\n+   * Assert that deleting a non-existing path\n+   * leads to a FileNotFoundException.\n+   *\n+   * @throws Exception if an error occurs during the test execution\n+   */\n+  @Test\n+  public void testDeleteNonExistingPath() throws Exception {\n+    AzureBlobFileSystem fs = getFileSystem();\n+\n+    Path p = new Path(\"/nonExistingPath\");\n+    intercept(FileNotFoundException.class,\n+        () -> assertDeleted(fs, p, true));\n+  }\n+\n+  /**\n+   * Test to check if fileNotFoundException is\n+   * injected after the file has already been deleted.\n+   *\n+   * @throws Exception if an error occurs during the test execution\n+   */\n+  @Test\n+  public void testExceptionForDeletedFile() throws Exception {\n+    final AzureBlobFileSystem fs = getFileSystem();\n+    Path testFile = path(\"/testFile\");\n+    fs.create(testFile);\n+    fs.delete(testFile, false);\n+\n+    intercept(FileNotFoundException.class,\n+        () -> assertDeleted(fs, testFile, true));\n\nReview Comment:\n   Same as above.\n\n\n\n##########\nhadoop-tools/hadoop-azure/src/test/java/org/apache/hadoop/fs/azurebfs/ITestAzureBlobFileSystemDelete.java:\n##########\n@@ -344,6 +363,122 @@ public void deleteBlobDirParallelThreadToDeleteOnDifferentTracingContext()\n     fs.close();\n   }\n \n+  /**\n+   * Test the deletion of file in an implicit directory.\n+   *\n+   * @throws Exception if an error occurs during the test execution\n+   */\n+  @Test\n+  public void testDeleteFileInImplicitDir() throws Exception {\n+    AzureBlobFileSystem fs = getFileSystem();\n+    assumeBlobServiceType();\n+\n+    Path p = new Path(\"/testDir/dir1\");\n+    Path p1 = new Path(\"/testDir/dir1/file1\");\n+    Path p2 = new Path(\"/testDir/dir1/file2\");\n+\n+    fs.create(p1);\n+    fs.create(p2);\n+    AbfsBlobClient client = (AbfsBlobClient) fs.getAbfsClient();\n+    client.deleteBlobPath(p, null,\n+        getTestTracingContext(fs, true));\n+\n+    // Deletion of file with different recursion values\n+    fs.delete(p1, false);\n+    fs.delete(p2, true);\n+\n+    Assertions.assertThat(fs.exists(p))\n+        .describedAs(\"The directory should exist.\")\n+        .isTrue();\n+    Assertions.assertThat(fs.exists(p1))\n+        .describedAs(\"Deleted file should not be present.\").isFalse();\n+    Assertions.assertThat(fs.exists(p2))\n+        .describedAs(\"Deleted file should not be present.\").isFalse();\n+  }\n+\n+  /**\n+   * Test that the file status of an empty explicit dir\n+   * should not exist after its deletion.\n+   *\n+   * @throws Exception if an error occurs during the test execution\n+   */\n+  @Test\n+  public void testDeleteEmptyExplicitDir() throws Exception {\n+    AzureBlobFileSystem fs = getFileSystem();\n+\n+    Path p1 = new Path(\"/testDir1/\");\n+\n+    fs.mkdirs(p1);\n+    fs.delete(p1, false);\n+\n+    Assertions.assertThat(fs.exists(p1))\n+        .describedAs(\"The deleted directory should not exist.\")\n+        .isFalse();\n+  }\n+\n+  /**\n+   * Test that deleting a non-empty explicit directory\n+   * can only be done with the recursive flag set to true.\n+   *\n+   * @throws Exception if an error occurs during the test execution\n+   */\n+  @Test\n+  public void testDeleteNonEmptyExplicitDir() throws Exception {\n+    AzureBlobFileSystem fs = getFileSystem();\n+\n+    Path p1 = new Path(\"/testDir1\");\n+    Path p2 = new Path(\"/testDir2\");\n+\n+    fs.create(new Path(\"/testDir1/f1.txt\"));\n+    fs.create(new Path(\"/testDir2/f2.txt\"));\n+\n+    fs.delete(p1, true);\n+\n+    //Deleting non-empty dir with recursion set as\n+    // false returns a FileAlreadyExistsException: 409-DirectoryNotEmpty\n+    intercept(FileAlreadyExistsException.class,\n+        () -> fs.delete(p2, false));\n+\n+    Assertions.assertThat(!fs.exists(p1))\n+        .describedAs(\"FileStatus of the deleted directory should not exist.\")\n+        .isTrue();\n+    Assertions.assertThat(!fs.exists(p1))\n\nReview Comment:\n   Redundant assert\n\n\n\n##########\nhadoop-tools/hadoop-azure/src/test/java/org/apache/hadoop/fs/azurebfs/ITestAzureBlobFileSystemDelete.java:\n##########\n@@ -286,6 +304,7 @@ public void testDeleteIdempotencyTriggerHttp404() throws Exception {\n     doReturn(idempotencyRetOp).when(mockClient).deleteIdempotencyCheckOp(any());\n     TracingContext tracingContext = getTestTracingContext(fs, false);\n     doReturn(tracingContext).when(idempotencyRetOp).createNewTracingContext(any());\n+    //To-discuss: If DFS service type, this if case can be removed?\n\nReview Comment:\n   What is this about?\n\n\n\n##########\nhadoop-tools/hadoop-azure/src/test/java/org/apache/hadoop/fs/azurebfs/ITestAzureBlobFileSystemDelete.java:\n##########\n@@ -196,6 +198,22 @@ public void testDeleteIdempotency() throws Exception {\n     when(op.isARetriedRequest()).thenReturn(true);\n \n     // Case 1: Mock instance of Http Operation response. This will return\n+    // HTTP:TIMEOUT\n+    AbfsHttpOperation http504Op = mock(AbfsHttpOperation.class);\n+    when(http504Op.getStatusCode()).thenReturn(HTTP_GATEWAY_TIMEOUT);\n+\n+    // Mock delete response to 504\n+    when(op.getResult()).thenReturn(http504Op);\n+    when(op.hasResult()).thenReturn(true);\n+\n+    Assertions.assertThat(testClient.deleteIdempotencyCheckOp(op)\n+            .getResult()\n+            .getStatusCode())\n+        .describedAs(\n\nReview Comment:\n   Fix indentation\n\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-02-25T11:37:25.577+0000", "updated": "2025-02-25T11:37:25.577+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13607272/comment/17930541", "id": "17930541", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "manika137 commented on code in PR #7376:\nURL: https://github.com/apache/hadoop/pull/7376#discussion_r1970965960\n\n\n##########\nhadoop-tools/hadoop-azure/src/test/java/org/apache/hadoop/fs/azurebfs/ITestAzureBlobFileSystemDelete.java:\n##########\n@@ -196,6 +198,22 @@ public void testDeleteIdempotency() throws Exception {\n     when(op.isARetriedRequest()).thenReturn(true);\n \n     // Case 1: Mock instance of Http Operation response. This will return\n+    // HTTP:TIMEOUT\n+    AbfsHttpOperation http504Op = mock(AbfsHttpOperation.class);\n+    when(http504Op.getStatusCode()).thenReturn(HTTP_GATEWAY_TIMEOUT);\n+\n+    // Mock delete response to 504\n+    when(op.getResult()).thenReturn(http504Op);\n+    when(op.hasResult()).thenReturn(true);\n+\n+    Assertions.assertThat(testClient.deleteIdempotencyCheckOp(op)\n+            .getResult()\n+            .getStatusCode())\n+        .describedAs(\n\nReview Comment:\n   Fixed\n\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-02-26T06:08:06.671+0000", "updated": "2025-02-26T06:08:06.671+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13607272/comment/17930542", "id": "17930542", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "manika137 commented on code in PR #7376:\nURL: https://github.com/apache/hadoop/pull/7376#discussion_r1970966263\n\n\n##########\nhadoop-tools/hadoop-azure/src/test/java/org/apache/hadoop/fs/azurebfs/ITestAzureBlobFileSystemDelete.java:\n##########\n@@ -344,6 +363,122 @@ public void deleteBlobDirParallelThreadToDeleteOnDifferentTracingContext()\n     fs.close();\n   }\n \n+  /**\n+   * Test the deletion of file in an implicit directory.\n+   *\n+   * @throws Exception if an error occurs during the test execution\n+   */\n+  @Test\n+  public void testDeleteFileInImplicitDir() throws Exception {\n+    AzureBlobFileSystem fs = getFileSystem();\n+    assumeBlobServiceType();\n+\n+    Path p = new Path(\"/testDir/dir1\");\n+    Path p1 = new Path(\"/testDir/dir1/file1\");\n+    Path p2 = new Path(\"/testDir/dir1/file2\");\n+\n+    fs.create(p1);\n+    fs.create(p2);\n+    AbfsBlobClient client = (AbfsBlobClient) fs.getAbfsClient();\n+    client.deleteBlobPath(p, null,\n+        getTestTracingContext(fs, true));\n+\n+    // Deletion of file with different recursion values\n+    fs.delete(p1, false);\n+    fs.delete(p2, true);\n+\n+    Assertions.assertThat(fs.exists(p))\n+        .describedAs(\"The directory should exist.\")\n+        .isTrue();\n+    Assertions.assertThat(fs.exists(p1))\n+        .describedAs(\"Deleted file should not be present.\").isFalse();\n+    Assertions.assertThat(fs.exists(p2))\n+        .describedAs(\"Deleted file should not be present.\").isFalse();\n+  }\n+\n+  /**\n+   * Test that the file status of an empty explicit dir\n+   * should not exist after its deletion.\n+   *\n+   * @throws Exception if an error occurs during the test execution\n+   */\n+  @Test\n+  public void testDeleteEmptyExplicitDir() throws Exception {\n+    AzureBlobFileSystem fs = getFileSystem();\n+\n+    Path p1 = new Path(\"/testDir1/\");\n+\n+    fs.mkdirs(p1);\n+    fs.delete(p1, false);\n+\n+    Assertions.assertThat(fs.exists(p1))\n+        .describedAs(\"The deleted directory should not exist.\")\n+        .isFalse();\n+  }\n+\n+  /**\n+   * Test that deleting a non-empty explicit directory\n+   * can only be done with the recursive flag set to true.\n+   *\n+   * @throws Exception if an error occurs during the test execution\n+   */\n+  @Test\n+  public void testDeleteNonEmptyExplicitDir() throws Exception {\n+    AzureBlobFileSystem fs = getFileSystem();\n+\n+    Path p1 = new Path(\"/testDir1\");\n+    Path p2 = new Path(\"/testDir2\");\n+\n+    fs.create(new Path(\"/testDir1/f1.txt\"));\n+    fs.create(new Path(\"/testDir2/f2.txt\"));\n+\n+    fs.delete(p1, true);\n+\n+    //Deleting non-empty dir with recursion set as\n+    // false returns a FileAlreadyExistsException: 409-DirectoryNotEmpty\n+    intercept(FileAlreadyExistsException.class,\n+        () -> fs.delete(p2, false));\n+\n+    Assertions.assertThat(!fs.exists(p1))\n+        .describedAs(\"FileStatus of the deleted directory should not exist.\")\n+        .isTrue();\n+    Assertions.assertThat(!fs.exists(p1))\n\nReview Comment:\n   Removed\n\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-02-26T06:08:18.292+0000", "updated": "2025-02-26T06:08:18.292+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13607272/comment/17930544", "id": "17930544", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "manika137 commented on code in PR #7376:\nURL: https://github.com/apache/hadoop/pull/7376#discussion_r1970970991\n\n\n##########\nhadoop-tools/hadoop-azure/src/test/java/org/apache/hadoop/fs/azurebfs/ITestAzureBlobFileSystemDelete.java:\n##########\n@@ -344,6 +363,122 @@ public void deleteBlobDirParallelThreadToDeleteOnDifferentTracingContext()\n     fs.close();\n   }\n \n+  /**\n+   * Test the deletion of file in an implicit directory.\n+   *\n+   * @throws Exception if an error occurs during the test execution\n+   */\n+  @Test\n+  public void testDeleteFileInImplicitDir() throws Exception {\n+    AzureBlobFileSystem fs = getFileSystem();\n+    assumeBlobServiceType();\n+\n+    Path p = new Path(\"/testDir/dir1\");\n+    Path p1 = new Path(\"/testDir/dir1/file1\");\n+    Path p2 = new Path(\"/testDir/dir1/file2\");\n+\n+    fs.create(p1);\n+    fs.create(p2);\n+    AbfsBlobClient client = (AbfsBlobClient) fs.getAbfsClient();\n+    client.deleteBlobPath(p, null,\n+        getTestTracingContext(fs, true));\n+\n+    // Deletion of file with different recursion values\n+    fs.delete(p1, false);\n+    fs.delete(p2, true);\n+\n+    Assertions.assertThat(fs.exists(p))\n+        .describedAs(\"The directory should exist.\")\n+        .isTrue();\n+    Assertions.assertThat(fs.exists(p1))\n+        .describedAs(\"Deleted file should not be present.\").isFalse();\n+    Assertions.assertThat(fs.exists(p2))\n+        .describedAs(\"Deleted file should not be present.\").isFalse();\n+  }\n+\n+  /**\n+   * Test that the file status of an empty explicit dir\n+   * should not exist after its deletion.\n+   *\n+   * @throws Exception if an error occurs during the test execution\n+   */\n+  @Test\n+  public void testDeleteEmptyExplicitDir() throws Exception {\n+    AzureBlobFileSystem fs = getFileSystem();\n+\n+    Path p1 = new Path(\"/testDir1/\");\n+\n+    fs.mkdirs(p1);\n+    fs.delete(p1, false);\n+\n+    Assertions.assertThat(fs.exists(p1))\n+        .describedAs(\"The deleted directory should not exist.\")\n+        .isFalse();\n+  }\n+\n+  /**\n+   * Test that deleting a non-empty explicit directory\n+   * can only be done with the recursive flag set to true.\n+   *\n+   * @throws Exception if an error occurs during the test execution\n+   */\n+  @Test\n+  public void testDeleteNonEmptyExplicitDir() throws Exception {\n+    AzureBlobFileSystem fs = getFileSystem();\n+\n+    Path p1 = new Path(\"/testDir1\");\n+    Path p2 = new Path(\"/testDir2\");\n+\n+    fs.create(new Path(\"/testDir1/f1.txt\"));\n+    fs.create(new Path(\"/testDir2/f2.txt\"));\n+\n+    fs.delete(p1, true);\n+\n+    //Deleting non-empty dir with recursion set as\n+    // false returns a FileAlreadyExistsException: 409-DirectoryNotEmpty\n+    intercept(FileAlreadyExistsException.class,\n+        () -> fs.delete(p2, false));\n+\n+    Assertions.assertThat(!fs.exists(p1))\n+        .describedAs(\"FileStatus of the deleted directory should not exist.\")\n+        .isTrue();\n+    Assertions.assertThat(!fs.exists(p1))\n+        .describedAs(\"FileStatus of the deleted directory should not exist.\")\n+        .isTrue();\n+  }\n+\n+  /**\n+   * Assert that deleting a non-existing path\n+   * leads to a FileNotFoundException.\n+   *\n+   * @throws Exception if an error occurs during the test execution\n+   */\n+  @Test\n+  public void testDeleteNonExistingPath() throws Exception {\n+    AzureBlobFileSystem fs = getFileSystem();\n+\n+    Path p = new Path(\"/nonExistingPath\");\n+    intercept(FileNotFoundException.class,\n+        () -> assertDeleted(fs, p, true));\n\nReview Comment:\n   Taken\n\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-02-26T06:12:56.144+0000", "updated": "2025-02-26T06:12:56.144+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13607272/comment/17930591", "id": "17930591", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "hadoop-yetus commented on PR #7376:\nURL: https://github.com/apache/hadoop/pull/7376#issuecomment-2684237167\n\n   :confetti_ball: **+1 overall**\r\n   \r\n   \r\n   \r\n   \r\n   \r\n   \r\n   | Vote | Subsystem | Runtime |  Logfile | Comment |\r\n   |:----:|----------:|--------:|:--------:|:-------:|\r\n   | +0 :ok: |  reexec  |   0m 34s |  |  Docker mode activated.  |\r\n   |||| _ Prechecks _ |\r\n   | +1 :green_heart: |  dupname  |   0m  0s |  |  No case conflicting files found.  |\r\n   | +0 :ok: |  codespell  |   0m  0s |  |  codespell was not available.  |\r\n   | +0 :ok: |  detsecrets  |   0m  0s |  |  detect-secrets was not available.  |\r\n   | +1 :green_heart: |  @author  |   0m  0s |  |  The patch does not contain any @author tags.  |\r\n   | +1 :green_heart: |  test4tests  |   0m  0s |  |  The patch appears to include 1 new or modified test files.  |\r\n   |||| _ trunk Compile Tests _ |\r\n   | +1 :green_heart: |  mvninstall  |  36m 15s |  |  trunk passed  |\r\n   | +1 :green_heart: |  compile  |   0m 40s |  |  trunk passed with JDK Ubuntu-11.0.26+4-post-Ubuntu-1ubuntu120.04  |\r\n   | +1 :green_heart: |  compile  |   0m 38s |  |  trunk passed with JDK Private Build-1.8.0_442-8u442-b06~us1-0ubuntu1~20.04-b06  |\r\n   | +1 :green_heart: |  checkstyle  |   0m 34s |  |  trunk passed  |\r\n   | +1 :green_heart: |  mvnsite  |   0m 42s |  |  trunk passed  |\r\n   | +1 :green_heart: |  javadoc  |   0m 42s |  |  trunk passed with JDK Ubuntu-11.0.26+4-post-Ubuntu-1ubuntu120.04  |\r\n   | +1 :green_heart: |  javadoc  |   0m 36s |  |  trunk passed with JDK Private Build-1.8.0_442-8u442-b06~us1-0ubuntu1~20.04-b06  |\r\n   | +1 :green_heart: |  spotbugs  |   1m  9s |  |  trunk passed  |\r\n   | +1 :green_heart: |  shadedclient  |  33m 38s |  |  branch has no errors when building and testing our client artifacts.  |\r\n   |||| _ Patch Compile Tests _ |\r\n   | +1 :green_heart: |  mvninstall  |   0m 30s |  |  the patch passed  |\r\n   | +1 :green_heart: |  compile  |   0m 33s |  |  the patch passed with JDK Ubuntu-11.0.26+4-post-Ubuntu-1ubuntu120.04  |\r\n   | +1 :green_heart: |  javac  |   0m 33s |  |  the patch passed  |\r\n   | +1 :green_heart: |  compile  |   0m 29s |  |  the patch passed with JDK Private Build-1.8.0_442-8u442-b06~us1-0ubuntu1~20.04-b06  |\r\n   | +1 :green_heart: |  javac  |   0m 29s |  |  the patch passed  |\r\n   | +1 :green_heart: |  blanks  |   0m  0s |  |  The patch has no blanks issues.  |\r\n   | +1 :green_heart: |  checkstyle  |   0m 21s |  |  the patch passed  |\r\n   | +1 :green_heart: |  mvnsite  |   0m 31s |  |  the patch passed  |\r\n   | +1 :green_heart: |  javadoc  |   0m 29s |  |  the patch passed with JDK Ubuntu-11.0.26+4-post-Ubuntu-1ubuntu120.04  |\r\n   | +1 :green_heart: |  javadoc  |   0m 26s |  |  the patch passed with JDK Private Build-1.8.0_442-8u442-b06~us1-0ubuntu1~20.04-b06  |\r\n   | +1 :green_heart: |  spotbugs  |   1m  7s |  |  the patch passed  |\r\n   | +1 :green_heart: |  shadedclient  |  34m 23s |  |  patch has no errors when building and testing our client artifacts.  |\r\n   |||| _ Other Tests _ |\r\n   | +1 :green_heart: |  unit  |   2m 48s |  |  hadoop-azure in the patch passed.  |\r\n   | +1 :green_heart: |  asflicense  |   0m 37s |  |  The patch does not generate ASF License warnings.  |\r\n   |  |   | 118m 48s |  |  |\r\n   \r\n   \r\n   | Subsystem | Report/Notes |\r\n   |----------:|:-------------|\r\n   | Docker | ClientAPI=1.48 ServerAPI=1.48 base: https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-7376/2/artifact/out/Dockerfile |\r\n   | GITHUB PR | https://github.com/apache/hadoop/pull/7376 |\r\n   | Optional Tests | dupname asflicense compile javac javadoc mvninstall mvnsite unit shadedclient spotbugs checkstyle codespell detsecrets |\r\n   | uname | Linux 6e4e7764ea5c 5.15.0-130-generic #140-Ubuntu SMP Wed Dec 18 17:59:53 UTC 2024 x86_64 x86_64 x86_64 GNU/Linux |\r\n   | Build tool | maven |\r\n   | Personality | dev-support/bin/hadoop.sh |\r\n   | git revision | trunk / ac8d09e7d218b4207249f1630345c68d98bb275d |\r\n   | Default Java | Private Build-1.8.0_442-8u442-b06~us1-0ubuntu1~20.04-b06 |\r\n   | Multi-JDK versions | /usr/lib/jvm/java-11-openjdk-amd64:Ubuntu-11.0.26+4-post-Ubuntu-1ubuntu120.04 /usr/lib/jvm/java-8-openjdk-amd64:Private Build-1.8.0_442-8u442-b06~us1-0ubuntu1~20.04-b06 |\r\n   |  Test Results | https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-7376/2/testReport/ |\r\n   | Max. process+thread count | 545 (vs. ulimit of 5500) |\r\n   | modules | C: hadoop-tools/hadoop-azure U: hadoop-tools/hadoop-azure |\r\n   | Console output | https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-7376/2/console |\r\n   | versions | git=2.25.1 maven=3.6.3 spotbugs=4.2.2 |\r\n   | Powered by | Apache Yetus 0.14.0 https://yetus.apache.org |\r\n   \r\n   \r\n   This message was automatically generated.\r\n   \r\n   \n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-02-26T08:13:26.384+0000", "updated": "2025-02-26T08:13:26.384+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13607272/comment/17931503", "id": "17931503", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "manika137 commented on code in PR #7376:\nURL: https://github.com/apache/hadoop/pull/7376#discussion_r1975579727\n\n\n##########\nhadoop-tools/hadoop-azure/src/test/java/org/apache/hadoop/fs/azurebfs/ITestAzureBlobFileSystemDelete.java:\n##########\n@@ -359,6 +494,11 @@ public void testDeleteImplicitDir() throws Exception {\n     AbfsBlobClient client = (AbfsBlobClient) fs.getAbfsClient();\n     client.deleteBlobPath(new Path(\"/testDir/dir1\"),\n             null, getTestTracingContext(fs, true));\n+\n+    //Deleting non-empty dir with recursion set as\n\nReview Comment:\n   This is for the case with implicit path with children and recursion false\n\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-02-28T15:15:25.618+0000", "updated": "2025-02-28T15:15:25.618+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13607272/comment/17931927", "id": "17931927", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "manika137 commented on code in PR #7376:\nURL: https://github.com/apache/hadoop/pull/7376#discussion_r1977261170\n\n\n##########\nhadoop-tools/hadoop-azure/src/test/java/org/apache/hadoop/fs/azurebfs/ITestAzureBlobFileSystemDelete.java:\n##########\n@@ -344,6 +363,122 @@ public void deleteBlobDirParallelThreadToDeleteOnDifferentTracingContext()\n     fs.close();\n   }\n \n+  /**\n+   * Test the deletion of file in an implicit directory.\n+   *\n+   * @throws Exception if an error occurs during the test execution\n+   */\n+  @Test\n+  public void testDeleteFileInImplicitDir() throws Exception {\n+    AzureBlobFileSystem fs = getFileSystem();\n+    assumeBlobServiceType();\n+\n+    Path p = new Path(\"/testDir/dir1\");\n+    Path p1 = new Path(\"/testDir/dir1/file1\");\n+    Path p2 = new Path(\"/testDir/dir1/file2\");\n+\n+    fs.create(p1);\n+    fs.create(p2);\n+    AbfsBlobClient client = (AbfsBlobClient) fs.getAbfsClient();\n+    client.deleteBlobPath(p, null,\n\nReview Comment:\n   Like discussed- using azcopy commands for creating implicit files now\n\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-03-03T10:25:24.116+0000", "updated": "2025-03-03T10:25:24.116+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13607272/comment/17932048", "id": "17932048", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "hadoop-yetus commented on PR #7376:\nURL: https://github.com/apache/hadoop/pull/7376#issuecomment-2695236332\n\n   :confetti_ball: **+1 overall**\r\n   \r\n   \r\n   \r\n   \r\n   \r\n   \r\n   | Vote | Subsystem | Runtime |  Logfile | Comment |\r\n   |:----:|----------:|--------:|:--------:|:-------:|\r\n   | +0 :ok: |  reexec  |  17m 59s |  |  Docker mode activated.  |\r\n   |||| _ Prechecks _ |\r\n   | +1 :green_heart: |  dupname  |   0m  0s |  |  No case conflicting files found.  |\r\n   | +0 :ok: |  codespell  |   0m  0s |  |  codespell was not available.  |\r\n   | +0 :ok: |  detsecrets  |   0m  0s |  |  detect-secrets was not available.  |\r\n   | +1 :green_heart: |  @author  |   0m  0s |  |  The patch does not contain any @author tags.  |\r\n   | +1 :green_heart: |  test4tests  |   0m  0s |  |  The patch appears to include 1 new or modified test files.  |\r\n   |||| _ trunk Compile Tests _ |\r\n   | +1 :green_heart: |  mvninstall  |  36m 33s |  |  trunk passed  |\r\n   | +1 :green_heart: |  compile  |   0m 41s |  |  trunk passed with JDK Ubuntu-11.0.26+4-post-Ubuntu-1ubuntu120.04  |\r\n   | +1 :green_heart: |  compile  |   0m 34s |  |  trunk passed with JDK Private Build-1.8.0_442-8u442-b06~us1-0ubuntu1~20.04-b06  |\r\n   | +1 :green_heart: |  checkstyle  |   0m 31s |  |  trunk passed  |\r\n   | +1 :green_heart: |  mvnsite  |   0m 42s |  |  trunk passed  |\r\n   | +1 :green_heart: |  javadoc  |   0m 40s |  |  trunk passed with JDK Ubuntu-11.0.26+4-post-Ubuntu-1ubuntu120.04  |\r\n   | +1 :green_heart: |  javadoc  |   0m 33s |  |  trunk passed with JDK Private Build-1.8.0_442-8u442-b06~us1-0ubuntu1~20.04-b06  |\r\n   | +1 :green_heart: |  spotbugs  |   1m 13s |  |  trunk passed  |\r\n   | +1 :green_heart: |  shadedclient  |  35m 15s |  |  branch has no errors when building and testing our client artifacts.  |\r\n   | -0 :warning: |  patch  |  35m 36s |  |  Used diff version of patch file. Binary files and potentially other changes not applied. Please rebase and squash commits if necessary.  |\r\n   |||| _ Patch Compile Tests _ |\r\n   | +1 :green_heart: |  mvninstall  |   0m 30s |  |  the patch passed  |\r\n   | +1 :green_heart: |  compile  |   0m 32s |  |  the patch passed with JDK Ubuntu-11.0.26+4-post-Ubuntu-1ubuntu120.04  |\r\n   | +1 :green_heart: |  javac  |   0m 32s |  |  the patch passed  |\r\n   | +1 :green_heart: |  compile  |   0m 29s |  |  the patch passed with JDK Private Build-1.8.0_442-8u442-b06~us1-0ubuntu1~20.04-b06  |\r\n   | +1 :green_heart: |  javac  |   0m 29s |  |  the patch passed  |\r\n   | +1 :green_heart: |  blanks  |   0m  0s |  |  The patch has no blanks issues.  |\r\n   | +1 :green_heart: |  checkstyle  |   0m 20s |  |  the patch passed  |\r\n   | +1 :green_heart: |  mvnsite  |   0m 33s |  |  the patch passed  |\r\n   | +1 :green_heart: |  javadoc  |   0m 28s |  |  the patch passed with JDK Ubuntu-11.0.26+4-post-Ubuntu-1ubuntu120.04  |\r\n   | +1 :green_heart: |  javadoc  |   0m 26s |  |  the patch passed with JDK Private Build-1.8.0_442-8u442-b06~us1-0ubuntu1~20.04-b06  |\r\n   | +1 :green_heart: |  spotbugs  |   1m 13s |  |  the patch passed  |\r\n   | +1 :green_heart: |  shadedclient  |  35m 20s |  |  patch has no errors when building and testing our client artifacts.  |\r\n   |||| _ Other Tests _ |\r\n   | +1 :green_heart: |  unit  |   2m 49s |  |  hadoop-azure in the patch passed.  |\r\n   | +1 :green_heart: |  asflicense  |   0m 36s |  |  The patch does not generate ASF License warnings.  |\r\n   |  |   | 139m  1s |  |  |\r\n   \r\n   \r\n   | Subsystem | Report/Notes |\r\n   |----------:|:-------------|\r\n   | Docker | ClientAPI=1.48 ServerAPI=1.48 base: https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-7376/3/artifact/out/Dockerfile |\r\n   | GITHUB PR | https://github.com/apache/hadoop/pull/7376 |\r\n   | Optional Tests | dupname asflicense compile javac javadoc mvninstall mvnsite unit shadedclient spotbugs checkstyle codespell detsecrets |\r\n   | uname | Linux 343af9c9d998 5.15.0-130-generic #140-Ubuntu SMP Wed Dec 18 17:59:53 UTC 2024 x86_64 x86_64 x86_64 GNU/Linux |\r\n   | Build tool | maven |\r\n   | Personality | dev-support/bin/hadoop.sh |\r\n   | git revision | trunk / 5f4494ef70aca213f8a80beeca910e24372ad347 |\r\n   | Default Java | Private Build-1.8.0_442-8u442-b06~us1-0ubuntu1~20.04-b06 |\r\n   | Multi-JDK versions | /usr/lib/jvm/java-11-openjdk-amd64:Ubuntu-11.0.26+4-post-Ubuntu-1ubuntu120.04 /usr/lib/jvm/java-8-openjdk-amd64:Private Build-1.8.0_442-8u442-b06~us1-0ubuntu1~20.04-b06 |\r\n   |  Test Results | https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-7376/3/testReport/ |\r\n   | Max. process+thread count | 685 (vs. ulimit of 5500) |\r\n   | modules | C: hadoop-tools/hadoop-azure U: hadoop-tools/hadoop-azure |\r\n   | Console output | https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-7376/3/console |\r\n   | versions | git=2.25.1 maven=3.6.3 spotbugs=4.2.2 |\r\n   | Powered by | Apache Yetus 0.14.0 https://yetus.apache.org |\r\n   \r\n   \r\n   This message was automatically generated.\r\n   \r\n   \n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-03-03T18:34:48.539+0000", "updated": "2025-03-03T18:34:48.539+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13607272/comment/17932154", "id": "17932154", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "hadoop-yetus commented on PR #7376:\nURL: https://github.com/apache/hadoop/pull/7376#issuecomment-2696273802\n\n   :confetti_ball: **+1 overall**\r\n   \r\n   \r\n   \r\n   \r\n   \r\n   \r\n   | Vote | Subsystem | Runtime |  Logfile | Comment |\r\n   |:----:|----------:|--------:|:--------:|:-------:|\r\n   | +0 :ok: |  reexec  |   0m 53s |  |  Docker mode activated.  |\r\n   |||| _ Prechecks _ |\r\n   | +1 :green_heart: |  dupname  |   0m  0s |  |  No case conflicting files found.  |\r\n   | +0 :ok: |  codespell  |   0m  0s |  |  codespell was not available.  |\r\n   | +0 :ok: |  detsecrets  |   0m  0s |  |  detect-secrets was not available.  |\r\n   | +1 :green_heart: |  @author  |   0m  0s |  |  The patch does not contain any @author tags.  |\r\n   | +1 :green_heart: |  test4tests  |   0m  0s |  |  The patch appears to include 1 new or modified test files.  |\r\n   |||| _ trunk Compile Tests _ |\r\n   | +1 :green_heart: |  mvninstall  |  37m 30s |  |  trunk passed  |\r\n   | +1 :green_heart: |  compile  |   0m 41s |  |  trunk passed with JDK Ubuntu-11.0.26+4-post-Ubuntu-1ubuntu120.04  |\r\n   | +1 :green_heart: |  compile  |   0m 37s |  |  trunk passed with JDK Private Build-1.8.0_442-8u442-b06~us1-0ubuntu1~20.04-b06  |\r\n   | +1 :green_heart: |  checkstyle  |   0m 34s |  |  trunk passed  |\r\n   | +1 :green_heart: |  mvnsite  |   0m 42s |  |  trunk passed  |\r\n   | +1 :green_heart: |  javadoc  |   0m 43s |  |  trunk passed with JDK Ubuntu-11.0.26+4-post-Ubuntu-1ubuntu120.04  |\r\n   | +1 :green_heart: |  javadoc  |   0m 34s |  |  trunk passed with JDK Private Build-1.8.0_442-8u442-b06~us1-0ubuntu1~20.04-b06  |\r\n   | +1 :green_heart: |  spotbugs  |   1m 10s |  |  trunk passed  |\r\n   | +1 :green_heart: |  shadedclient  |  34m 17s |  |  branch has no errors when building and testing our client artifacts.  |\r\n   | -0 :warning: |  patch  |  34m 38s |  |  Used diff version of patch file. Binary files and potentially other changes not applied. Please rebase and squash commits if necessary.  |\r\n   |||| _ Patch Compile Tests _ |\r\n   | +1 :green_heart: |  mvninstall  |   0m 31s |  |  the patch passed  |\r\n   | +1 :green_heart: |  compile  |   0m 31s |  |  the patch passed with JDK Ubuntu-11.0.26+4-post-Ubuntu-1ubuntu120.04  |\r\n   | +1 :green_heart: |  javac  |   0m 31s |  |  the patch passed  |\r\n   | +1 :green_heart: |  compile  |   0m 29s |  |  the patch passed with JDK Private Build-1.8.0_442-8u442-b06~us1-0ubuntu1~20.04-b06  |\r\n   | +1 :green_heart: |  javac  |   0m 29s |  |  the patch passed  |\r\n   | +1 :green_heart: |  blanks  |   0m  0s |  |  The patch has no blanks issues.  |\r\n   | +1 :green_heart: |  checkstyle  |   0m 20s |  |  the patch passed  |\r\n   | +1 :green_heart: |  mvnsite  |   0m 32s |  |  the patch passed  |\r\n   | +1 :green_heart: |  javadoc  |   0m 28s |  |  the patch passed with JDK Ubuntu-11.0.26+4-post-Ubuntu-1ubuntu120.04  |\r\n   | +1 :green_heart: |  javadoc  |   0m 26s |  |  the patch passed with JDK Private Build-1.8.0_442-8u442-b06~us1-0ubuntu1~20.04-b06  |\r\n   | +1 :green_heart: |  spotbugs  |   1m  7s |  |  the patch passed  |\r\n   | +1 :green_heart: |  shadedclient  |  34m 31s |  |  patch has no errors when building and testing our client artifacts.  |\r\n   |||| _ Other Tests _ |\r\n   | +1 :green_heart: |  unit  |   2m 48s |  |  hadoop-azure in the patch passed.  |\r\n   | +1 :green_heart: |  asflicense  |   0m 37s |  |  The patch does not generate ASF License warnings.  |\r\n   |  |   | 121m  6s |  |  |\r\n   \r\n   \r\n   | Subsystem | Report/Notes |\r\n   |----------:|:-------------|\r\n   | Docker | ClientAPI=1.48 ServerAPI=1.48 base: https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-7376/4/artifact/out/Dockerfile |\r\n   | GITHUB PR | https://github.com/apache/hadoop/pull/7376 |\r\n   | Optional Tests | dupname asflicense compile javac javadoc mvninstall mvnsite unit shadedclient spotbugs checkstyle codespell detsecrets |\r\n   | uname | Linux 447a8bca2588 5.15.0-130-generic #140-Ubuntu SMP Wed Dec 18 17:59:53 UTC 2024 x86_64 x86_64 x86_64 GNU/Linux |\r\n   | Build tool | maven |\r\n   | Personality | dev-support/bin/hadoop.sh |\r\n   | git revision | trunk / 9fd8db0723fd7d647421418ce59edea27deac29d |\r\n   | Default Java | Private Build-1.8.0_442-8u442-b06~us1-0ubuntu1~20.04-b06 |\r\n   | Multi-JDK versions | /usr/lib/jvm/java-11-openjdk-amd64:Ubuntu-11.0.26+4-post-Ubuntu-1ubuntu120.04 /usr/lib/jvm/java-8-openjdk-amd64:Private Build-1.8.0_442-8u442-b06~us1-0ubuntu1~20.04-b06 |\r\n   |  Test Results | https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-7376/4/testReport/ |\r\n   | Max. process+thread count | 681 (vs. ulimit of 5500) |\r\n   | modules | C: hadoop-tools/hadoop-azure U: hadoop-tools/hadoop-azure |\r\n   | Console output | https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-7376/4/console |\r\n   | versions | git=2.25.1 maven=3.6.3 spotbugs=4.2.2 |\r\n   | Powered by | Apache Yetus 0.14.0 https://yetus.apache.org |\r\n   \r\n   \r\n   This message was automatically generated.\r\n   \r\n   \n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-03-04T05:39:31.988+0000", "updated": "2025-03-04T05:39:31.988+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13607272/comment/17933802", "id": "17933802", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "anmolanmol1234 commented on code in PR #7376:\nURL: https://github.com/apache/hadoop/pull/7376#discussion_r1986985523\n\n\n##########\nhadoop-tools/hadoop-azure/src/test/java/org/apache/hadoop/fs/azurebfs/ITestAzureBlobFileSystemDelete.java:\n##########\n@@ -286,6 +304,7 @@ public void testDeleteIdempotencyTriggerHttp404() throws Exception {\n     doReturn(idempotencyRetOp).when(mockClient).deleteIdempotencyCheckOp(any());\n     TracingContext tracingContext = getTestTracingContext(fs, false);\n     doReturn(tracingContext).when(idempotencyRetOp).createNewTracingContext(any());\n+    //To-discuss: If DFS service type, this if case can be removed?\n\nReview Comment:\n   this comment has to be removed right ?\n\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-03-10T10:11:26.671+0000", "updated": "2025-03-10T10:11:26.671+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13607272/comment/17933804", "id": "17933804", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "anmolanmol1234 commented on code in PR #7376:\nURL: https://github.com/apache/hadoop/pull/7376#discussion_r1986995770\n\n\n##########\nhadoop-tools/hadoop-azure/src/test/java/org/apache/hadoop/fs/azurebfs/ITestAzureBlobFileSystemDelete.java:\n##########\n@@ -344,6 +363,114 @@ public void deleteBlobDirParallelThreadToDeleteOnDifferentTracingContext()\n     fs.close();\n   }\n \n+  /**\n+   * Test the deletion of file in an implicit directory.\n+   *\n+   * @throws Exception if an error occurs during the test execution\n+   */\n+  @Test\n+  public void testDeleteFileInImplicitDir() throws Exception {\n+    AzureBlobFileSystem fs = getFileSystem();\n+    assumeBlobServiceType();\n+\n+    Path file1 = new Path(\"/testDir/dir1/file1\");\n+    Path file2 = new Path(\"/testDir/dir1/file2\");\n+    Path implicitDir = file1.getParent();\n+\n+    createAzCopyFile(file1);\n+    createAzCopyFile(file2);\n+\n+    // Deletion of file with different recursion values\n+    fs.delete(file1, false);\n+    fs.delete(file2, true);\n+\n+    Assertions.assertThat(fs.exists(implicitDir))\n+        .describedAs(\"The directory should exist.\")\n+        .isTrue();\n+    Assertions.assertThat(fs.exists(file1))\n\nReview Comment:\n   Should we also assert that for file 2 parent will not exist ?\n\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-03-10T10:18:01.743+0000", "updated": "2025-03-10T10:18:01.743+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13607272/comment/17933805", "id": "17933805", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "anmolanmol1234 commented on code in PR #7376:\nURL: https://github.com/apache/hadoop/pull/7376#discussion_r1987005182\n\n\n##########\nhadoop-tools/hadoop-azure/src/test/java/org/apache/hadoop/fs/azurebfs/ITestAzureBlobFileSystemDelete.java:\n##########\n@@ -344,6 +363,114 @@ public void deleteBlobDirParallelThreadToDeleteOnDifferentTracingContext()\n     fs.close();\n   }\n \n+  /**\n+   * Test the deletion of file in an implicit directory.\n+   *\n+   * @throws Exception if an error occurs during the test execution\n+   */\n+  @Test\n+  public void testDeleteFileInImplicitDir() throws Exception {\n+    AzureBlobFileSystem fs = getFileSystem();\n+    assumeBlobServiceType();\n+\n+    Path file1 = new Path(\"/testDir/dir1/file1\");\n+    Path file2 = new Path(\"/testDir/dir1/file2\");\n+    Path implicitDir = file1.getParent();\n+\n+    createAzCopyFile(file1);\n+    createAzCopyFile(file2);\n+\n+    // Deletion of file with different recursion values\n+    fs.delete(file1, false);\n+    fs.delete(file2, true);\n+\n+    Assertions.assertThat(fs.exists(implicitDir))\n+        .describedAs(\"The directory should exist.\")\n+        .isTrue();\n+    Assertions.assertThat(fs.exists(file1))\n+        .describedAs(\"Deleted file should not be present.\").isFalse();\n+    Assertions.assertThat(fs.exists(file2))\n+        .describedAs(\"Deleted file should not be present.\").isFalse();\n+  }\n+\n+  /**\n+   * Test that the file status of an empty explicit dir\n+   * should not exist after its deletion.\n+   *\n+   * @throws Exception if an error occurs during the test execution\n+   */\n+  @Test\n+  public void testDeleteEmptyExplicitDir() throws Exception {\n+    AzureBlobFileSystem fs = getFileSystem();\n+\n+    Path p1 = new Path(\"/testDir1/\");\n+\n+    fs.mkdirs(p1);\n+    fs.delete(p1, false);\n+\n+    Assertions.assertThat(fs.exists(p1))\n+        .describedAs(\"The deleted directory should not exist.\")\n+        .isFalse();\n+  }\n+\n+  /**\n+   * Test that deleting a non-empty explicit directory\n+   * can only be done with the recursive flag set to true.\n+   *\n+   * @throws Exception if an error occurs during the test execution\n+   */\n+  @Test\n+  public void testDeleteNonEmptyExplicitDir() throws Exception {\n+    AzureBlobFileSystem fs = getFileSystem();\n+\n+    Path p1 = new Path(\"/testDir1\");\n+    Path p2 = new Path(\"/testDir2\");\n+\n+    fs.create(new Path(\"/testDir1/f1.txt\"));\n\nReview Comment:\n   we should first call mkdirs on p1 and p2 for it to exist as explicit dir\n\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-03-10T10:24:07.556+0000", "updated": "2025-03-10T10:24:07.556+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13607272/comment/17933806", "id": "17933806", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "anmolanmol1234 commented on code in PR #7376:\nURL: https://github.com/apache/hadoop/pull/7376#discussion_r1987006805\n\n\n##########\nhadoop-tools/hadoop-azure/src/test/java/org/apache/hadoop/fs/azurebfs/ITestAzureBlobFileSystemDelete.java:\n##########\n@@ -344,6 +363,114 @@ public void deleteBlobDirParallelThreadToDeleteOnDifferentTracingContext()\n     fs.close();\n   }\n \n+  /**\n+   * Test the deletion of file in an implicit directory.\n+   *\n+   * @throws Exception if an error occurs during the test execution\n+   */\n+  @Test\n+  public void testDeleteFileInImplicitDir() throws Exception {\n+    AzureBlobFileSystem fs = getFileSystem();\n+    assumeBlobServiceType();\n+\n+    Path file1 = new Path(\"/testDir/dir1/file1\");\n+    Path file2 = new Path(\"/testDir/dir1/file2\");\n+    Path implicitDir = file1.getParent();\n+\n+    createAzCopyFile(file1);\n+    createAzCopyFile(file2);\n+\n+    // Deletion of file with different recursion values\n+    fs.delete(file1, false);\n+    fs.delete(file2, true);\n+\n+    Assertions.assertThat(fs.exists(implicitDir))\n+        .describedAs(\"The directory should exist.\")\n+        .isTrue();\n+    Assertions.assertThat(fs.exists(file1))\n+        .describedAs(\"Deleted file should not be present.\").isFalse();\n+    Assertions.assertThat(fs.exists(file2))\n+        .describedAs(\"Deleted file should not be present.\").isFalse();\n+  }\n+\n+  /**\n+   * Test that the file status of an empty explicit dir\n+   * should not exist after its deletion.\n+   *\n+   * @throws Exception if an error occurs during the test execution\n+   */\n+  @Test\n+  public void testDeleteEmptyExplicitDir() throws Exception {\n+    AzureBlobFileSystem fs = getFileSystem();\n+\n+    Path p1 = new Path(\"/testDir1/\");\n+\n+    fs.mkdirs(p1);\n+    fs.delete(p1, false);\n+\n+    Assertions.assertThat(fs.exists(p1))\n+        .describedAs(\"The deleted directory should not exist.\")\n+        .isFalse();\n+  }\n+\n+  /**\n+   * Test that deleting a non-empty explicit directory\n+   * can only be done with the recursive flag set to true.\n+   *\n+   * @throws Exception if an error occurs during the test execution\n+   */\n+  @Test\n+  public void testDeleteNonEmptyExplicitDir() throws Exception {\n+    AzureBlobFileSystem fs = getFileSystem();\n+\n+    Path p1 = new Path(\"/testDir1\");\n+    Path p2 = new Path(\"/testDir2\");\n+\n+    fs.create(new Path(\"/testDir1/f1.txt\"));\n+    fs.create(new Path(\"/testDir2/f2.txt\"));\n+\n+    fs.delete(p1, true);\n+\n+    //Deleting non-empty dir with recursion set as\n+    // false returns a FileAlreadyExistsException: 409-DirectoryNotEmpty\n+    intercept(FileAlreadyExistsException.class,\n+        () -> fs.delete(p2, false));\n+\n+    Assertions.assertThat(!fs.exists(p1))\n+        .describedAs(\"FileStatus of the deleted directory should not exist.\")\n+        .isTrue();\n+  }\n+\n+  /**\n+   * Assert that deleting a non-existing path\n+   * returns a false.\n+   *\n+   * @throws Exception if an error occurs during the test execution\n+   */\n+  @Test\n+  public void testDeleteNonExistingPath() throws Exception {\n+    AzureBlobFileSystem fs = getFileSystem();\n+\n+    Path p = new Path(\"/nonExistingPath\");\n+    Assertions.assertThat(fs.delete(p, true)).isFalse();\n\nReview Comment:\n   assertion statement\n\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-03-10T10:25:07.631+0000", "updated": "2025-03-10T10:25:07.631+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13607272/comment/17933807", "id": "17933807", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "anmolanmol1234 commented on code in PR #7376:\nURL: https://github.com/apache/hadoop/pull/7376#discussion_r1987014222\n\n\n##########\nhadoop-tools/hadoop-azure/src/test/java/org/apache/hadoop/fs/azurebfs/ITestAzureBlobFileSystemDelete.java:\n##########\n@@ -344,6 +363,114 @@ public void deleteBlobDirParallelThreadToDeleteOnDifferentTracingContext()\n     fs.close();\n   }\n \n+  /**\n+   * Test the deletion of file in an implicit directory.\n+   *\n+   * @throws Exception if an error occurs during the test execution\n+   */\n+  @Test\n+  public void testDeleteFileInImplicitDir() throws Exception {\n+    AzureBlobFileSystem fs = getFileSystem();\n+    assumeBlobServiceType();\n+\n+    Path file1 = new Path(\"/testDir/dir1/file1\");\n+    Path file2 = new Path(\"/testDir/dir1/file2\");\n+    Path implicitDir = file1.getParent();\n+\n+    createAzCopyFile(file1);\n+    createAzCopyFile(file2);\n+\n+    // Deletion of file with different recursion values\n+    fs.delete(file1, false);\n+    fs.delete(file2, true);\n+\n+    Assertions.assertThat(fs.exists(implicitDir))\n+        .describedAs(\"The directory should exist.\")\n+        .isTrue();\n+    Assertions.assertThat(fs.exists(file1))\n+        .describedAs(\"Deleted file should not be present.\").isFalse();\n+    Assertions.assertThat(fs.exists(file2))\n+        .describedAs(\"Deleted file should not be present.\").isFalse();\n+  }\n+\n+  /**\n+   * Test that the file status of an empty explicit dir\n+   * should not exist after its deletion.\n+   *\n+   * @throws Exception if an error occurs during the test execution\n+   */\n+  @Test\n+  public void testDeleteEmptyExplicitDir() throws Exception {\n+    AzureBlobFileSystem fs = getFileSystem();\n+\n+    Path p1 = new Path(\"/testDir1/\");\n+\n+    fs.mkdirs(p1);\n+    fs.delete(p1, false);\n+\n+    Assertions.assertThat(fs.exists(p1))\n+        .describedAs(\"The deleted directory should not exist.\")\n+        .isFalse();\n+  }\n+\n+  /**\n+   * Test that deleting a non-empty explicit directory\n+   * can only be done with the recursive flag set to true.\n+   *\n+   * @throws Exception if an error occurs during the test execution\n+   */\n+  @Test\n+  public void testDeleteNonEmptyExplicitDir() throws Exception {\n+    AzureBlobFileSystem fs = getFileSystem();\n+\n+    Path p1 = new Path(\"/testDir1\");\n+    Path p2 = new Path(\"/testDir2\");\n+\n+    fs.create(new Path(\"/testDir1/f1.txt\"));\n+    fs.create(new Path(\"/testDir2/f2.txt\"));\n+\n+    fs.delete(p1, true);\n+\n+    //Deleting non-empty dir with recursion set as\n+    // false returns a FileAlreadyExistsException: 409-DirectoryNotEmpty\n+    intercept(FileAlreadyExistsException.class,\n+        () -> fs.delete(p2, false));\n+\n+    Assertions.assertThat(!fs.exists(p1))\n+        .describedAs(\"FileStatus of the deleted directory should not exist.\")\n+        .isTrue();\n+  }\n+\n+  /**\n+   * Assert that deleting a non-existing path\n+   * returns a false.\n+   *\n+   * @throws Exception if an error occurs during the test execution\n+   */\n+  @Test\n+  public void testDeleteNonExistingPath() throws Exception {\n+    AzureBlobFileSystem fs = getFileSystem();\n+\n+    Path p = new Path(\"/nonExistingPath\");\n+    Assertions.assertThat(fs.delete(p, true)).isFalse();\n+  }\n+\n+  /**\n+   * Test to check test operation returns false\n+   * after the file has already been deleted.\n+   *\n+   * @throws Exception if an error occurs during the test execution\n+   */\n+  @Test\n+  public void testExceptionForDeletedFile() throws Exception {\n+    final AzureBlobFileSystem fs = getFileSystem();\n+    Path testFile = path(\"/testFile\");\n+    fs.create(testFile);\n+    fs.delete(testFile, false);\n+\n+    Assertions.assertThat(fs.delete(testFile, true)).isFalse();\n\nReview Comment:\n   same assertion statement\n\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-03-10T10:29:53.024+0000", "updated": "2025-03-10T10:29:53.024+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13607272/comment/17934157", "id": "17934157", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "manika137 commented on code in PR #7376:\nURL: https://github.com/apache/hadoop/pull/7376#discussion_r1988761488\n\n\n##########\nhadoop-tools/hadoop-azure/src/test/java/org/apache/hadoop/fs/azurebfs/ITestAzureBlobFileSystemDelete.java:\n##########\n@@ -344,6 +363,114 @@ public void deleteBlobDirParallelThreadToDeleteOnDifferentTracingContext()\n     fs.close();\n   }\n \n+  /**\n+   * Test the deletion of file in an implicit directory.\n+   *\n+   * @throws Exception if an error occurs during the test execution\n+   */\n+  @Test\n+  public void testDeleteFileInImplicitDir() throws Exception {\n+    AzureBlobFileSystem fs = getFileSystem();\n+    assumeBlobServiceType();\n+\n+    Path file1 = new Path(\"/testDir/dir1/file1\");\n+    Path file2 = new Path(\"/testDir/dir1/file2\");\n+    Path implicitDir = file1.getParent();\n+\n+    createAzCopyFile(file1);\n+    createAzCopyFile(file2);\n+\n+    // Deletion of file with different recursion values\n+    fs.delete(file1, false);\n+    fs.delete(file2, true);\n+\n+    Assertions.assertThat(fs.exists(implicitDir))\n+        .describedAs(\"The directory should exist.\")\n+        .isTrue();\n+    Assertions.assertThat(fs.exists(file1))\n\nReview Comment:\n   The parent would still exist right after deletion right? Tested the behaviour through portal as well.\r\n   \n\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-03-11T09:13:37.489+0000", "updated": "2025-03-11T09:13:37.489+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13607272/comment/17934158", "id": "17934158", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "manika137 commented on code in PR #7376:\nURL: https://github.com/apache/hadoop/pull/7376#discussion_r1988762258\n\n\n##########\nhadoop-tools/hadoop-azure/src/test/java/org/apache/hadoop/fs/azurebfs/ITestAzureBlobFileSystemDelete.java:\n##########\n@@ -344,6 +363,114 @@ public void deleteBlobDirParallelThreadToDeleteOnDifferentTracingContext()\n     fs.close();\n   }\n \n+  /**\n+   * Test the deletion of file in an implicit directory.\n+   *\n+   * @throws Exception if an error occurs during the test execution\n+   */\n+  @Test\n+  public void testDeleteFileInImplicitDir() throws Exception {\n+    AzureBlobFileSystem fs = getFileSystem();\n+    assumeBlobServiceType();\n+\n+    Path file1 = new Path(\"/testDir/dir1/file1\");\n+    Path file2 = new Path(\"/testDir/dir1/file2\");\n+    Path implicitDir = file1.getParent();\n+\n+    createAzCopyFile(file1);\n+    createAzCopyFile(file2);\n+\n+    // Deletion of file with different recursion values\n+    fs.delete(file1, false);\n+    fs.delete(file2, true);\n+\n+    Assertions.assertThat(fs.exists(implicitDir))\n+        .describedAs(\"The directory should exist.\")\n+        .isTrue();\n+    Assertions.assertThat(fs.exists(file1))\n+        .describedAs(\"Deleted file should not be present.\").isFalse();\n+    Assertions.assertThat(fs.exists(file2))\n+        .describedAs(\"Deleted file should not be present.\").isFalse();\n+  }\n+\n+  /**\n+   * Test that the file status of an empty explicit dir\n+   * should not exist after its deletion.\n+   *\n+   * @throws Exception if an error occurs during the test execution\n+   */\n+  @Test\n+  public void testDeleteEmptyExplicitDir() throws Exception {\n+    AzureBlobFileSystem fs = getFileSystem();\n+\n+    Path p1 = new Path(\"/testDir1/\");\n+\n+    fs.mkdirs(p1);\n+    fs.delete(p1, false);\n+\n+    Assertions.assertThat(fs.exists(p1))\n+        .describedAs(\"The deleted directory should not exist.\")\n+        .isFalse();\n+  }\n+\n+  /**\n+   * Test that deleting a non-empty explicit directory\n+   * can only be done with the recursive flag set to true.\n+   *\n+   * @throws Exception if an error occurs during the test execution\n+   */\n+  @Test\n+  public void testDeleteNonEmptyExplicitDir() throws Exception {\n+    AzureBlobFileSystem fs = getFileSystem();\n+\n+    Path p1 = new Path(\"/testDir1\");\n+    Path p2 = new Path(\"/testDir2\");\n+\n+    fs.create(new Path(\"/testDir1/f1.txt\"));\n+    fs.create(new Path(\"/testDir2/f2.txt\"));\n+\n+    fs.delete(p1, true);\n+\n+    //Deleting non-empty dir with recursion set as\n+    // false returns a FileAlreadyExistsException: 409-DirectoryNotEmpty\n+    intercept(FileAlreadyExistsException.class,\n+        () -> fs.delete(p2, false));\n+\n+    Assertions.assertThat(!fs.exists(p1))\n+        .describedAs(\"FileStatus of the deleted directory should not exist.\")\n+        .isTrue();\n+  }\n+\n+  /**\n+   * Assert that deleting a non-existing path\n+   * returns a false.\n+   *\n+   * @throws Exception if an error occurs during the test execution\n+   */\n+  @Test\n+  public void testDeleteNonExistingPath() throws Exception {\n+    AzureBlobFileSystem fs = getFileSystem();\n+\n+    Path p = new Path(\"/nonExistingPath\");\n+    Assertions.assertThat(fs.delete(p, true)).isFalse();\n\nReview Comment:\n   Added\n\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-03-11T09:14:07.484+0000", "updated": "2025-03-11T09:14:07.484+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13607272/comment/17934168", "id": "17934168", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "anmolanmol1234 commented on PR #7376:\nURL: https://github.com/apache/hadoop/pull/7376#issuecomment-2713414170\n\n   +1 LGTM\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-03-11T09:50:21.997+0000", "updated": "2025-03-11T09:50:21.997+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13607272/comment/17934255", "id": "17934255", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "hadoop-yetus commented on PR #7376:\nURL: https://github.com/apache/hadoop/pull/7376#issuecomment-2714790088\n\n   :broken_heart: **-1 overall**\r\n   \r\n   \r\n   \r\n   \r\n   \r\n   \r\n   | Vote | Subsystem | Runtime |  Logfile | Comment |\r\n   |:----:|----------:|--------:|:--------:|:-------:|\r\n   | +0 :ok: |  reexec  |  30m 16s |  |  Docker mode activated.  |\r\n   |||| _ Prechecks _ |\r\n   | +1 :green_heart: |  dupname  |   0m  0s |  |  No case conflicting files found.  |\r\n   | +0 :ok: |  codespell  |   0m  0s |  |  codespell was not available.  |\r\n   | +0 :ok: |  detsecrets  |   0m  0s |  |  detect-secrets was not available.  |\r\n   | +1 :green_heart: |  @author  |   0m  0s |  |  The patch does not contain any @author tags.  |\r\n   | +1 :green_heart: |  test4tests  |   0m  0s |  |  The patch appears to include 1 new or modified test files.  |\r\n   |||| _ trunk Compile Tests _ |\r\n   | +1 :green_heart: |  mvninstall  |  35m 42s |  |  trunk passed  |\r\n   | +1 :green_heart: |  compile  |   0m 40s |  |  trunk passed with JDK Ubuntu-11.0.26+4-post-Ubuntu-1ubuntu120.04  |\r\n   | +1 :green_heart: |  compile  |   0m 38s |  |  trunk passed with JDK Private Build-1.8.0_442-8u442-b06~us1-0ubuntu1~20.04-b06  |\r\n   | +1 :green_heart: |  checkstyle  |   0m 32s |  |  trunk passed  |\r\n   | +1 :green_heart: |  mvnsite  |   0m 44s |  |  trunk passed  |\r\n   | +1 :green_heart: |  javadoc  |   0m 42s |  |  trunk passed with JDK Ubuntu-11.0.26+4-post-Ubuntu-1ubuntu120.04  |\r\n   | +1 :green_heart: |  javadoc  |   0m 35s |  |  trunk passed with JDK Private Build-1.8.0_442-8u442-b06~us1-0ubuntu1~20.04-b06  |\r\n   | +1 :green_heart: |  spotbugs  |   1m  9s |  |  trunk passed  |\r\n   | +1 :green_heart: |  shadedclient  |  36m 43s |  |  branch has no errors when building and testing our client artifacts.  |\r\n   | -0 :warning: |  patch  |  37m  4s |  |  Used diff version of patch file. Binary files and potentially other changes not applied. Please rebase and squash commits if necessary.  |\r\n   |||| _ Patch Compile Tests _ |\r\n   | +1 :green_heart: |  mvninstall  |   0m 32s |  |  the patch passed  |\r\n   | +1 :green_heart: |  compile  |   0m 33s |  |  the patch passed with JDK Ubuntu-11.0.26+4-post-Ubuntu-1ubuntu120.04  |\r\n   | +1 :green_heart: |  javac  |   0m 33s |  |  the patch passed  |\r\n   | +1 :green_heart: |  compile  |   0m 29s |  |  the patch passed with JDK Private Build-1.8.0_442-8u442-b06~us1-0ubuntu1~20.04-b06  |\r\n   | +1 :green_heart: |  javac  |   0m 29s |  |  the patch passed  |\r\n   | +1 :green_heart: |  blanks  |   0m  0s |  |  The patch has no blanks issues.  |\r\n   | +1 :green_heart: |  checkstyle  |   0m 21s |  |  the patch passed  |\r\n   | +1 :green_heart: |  mvnsite  |   0m 31s |  |  the patch passed  |\r\n   | +1 :green_heart: |  javadoc  |   0m 28s |  |  the patch passed with JDK Ubuntu-11.0.26+4-post-Ubuntu-1ubuntu120.04  |\r\n   | +1 :green_heart: |  javadoc  |   0m 26s |  |  the patch passed with JDK Private Build-1.8.0_442-8u442-b06~us1-0ubuntu1~20.04-b06  |\r\n   | +1 :green_heart: |  spotbugs  |   1m 11s |  |  the patch passed  |\r\n   | -1 :x: |  shadedclient  |  41m 34s |  |  patch has errors when building and testing our client artifacts.  |\r\n   |||| _ Other Tests _ |\r\n   | -1 :x: |  unit  |   0m 27s | [/patch-unit-hadoop-tools_hadoop-azure.txt](https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-7376/5/artifact/out/patch-unit-hadoop-tools_hadoop-azure.txt) |  hadoop-azure in the patch failed.  |\r\n   | +0 :ok: |  asflicense  |   0m 27s |  |  ASF License check generated no output?  |\r\n   |  |   | 155m 47s |  |  |\r\n   \r\n   \r\n   | Subsystem | Report/Notes |\r\n   |----------:|:-------------|\r\n   | Docker | ClientAPI=1.48 ServerAPI=1.48 base: https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-7376/5/artifact/out/Dockerfile |\r\n   | GITHUB PR | https://github.com/apache/hadoop/pull/7376 |\r\n   | Optional Tests | dupname asflicense compile javac javadoc mvninstall mvnsite unit shadedclient spotbugs checkstyle codespell detsecrets |\r\n   | uname | Linux 8d69c5a5f1da 5.15.0-130-generic #140-Ubuntu SMP Wed Dec 18 17:59:53 UTC 2024 x86_64 x86_64 x86_64 GNU/Linux |\r\n   | Build tool | maven |\r\n   | Personality | dev-support/bin/hadoop.sh |\r\n   | git revision | trunk / 48bc1af00f181fe44146cf99e1c54e22aa457dcb |\r\n   | Default Java | Private Build-1.8.0_442-8u442-b06~us1-0ubuntu1~20.04-b06 |\r\n   | Multi-JDK versions | /usr/lib/jvm/java-11-openjdk-amd64:Ubuntu-11.0.26+4-post-Ubuntu-1ubuntu120.04 /usr/lib/jvm/java-8-openjdk-amd64:Private Build-1.8.0_442-8u442-b06~us1-0ubuntu1~20.04-b06 |\r\n   |  Test Results | https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-7376/5/testReport/ |\r\n   | Max. process+thread count | 554 (vs. ulimit of 5500) |\r\n   | modules | C: hadoop-tools/hadoop-azure U: hadoop-tools/hadoop-azure |\r\n   | Console output | https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-7376/5/console |\r\n   | versions | git=2.25.1 maven=3.6.3 spotbugs=4.2.2 |\r\n   | Powered by | Apache Yetus 0.14.0 https://yetus.apache.org |\r\n   \r\n   \r\n   This message was automatically generated.\r\n   \r\n   \n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-03-11T15:35:10.861+0000", "updated": "2025-03-11T15:35:10.861+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13607272/comment/17934437", "id": "17934437", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "hadoop-yetus commented on PR #7376:\nURL: https://github.com/apache/hadoop/pull/7376#issuecomment-2716689351\n\n   :confetti_ball: **+1 overall**\r\n   \r\n   \r\n   \r\n   \r\n   \r\n   \r\n   | Vote | Subsystem | Runtime |  Logfile | Comment |\r\n   |:----:|----------:|--------:|:--------:|:-------:|\r\n   | +0 :ok: |  reexec  |   0m 32s |  |  Docker mode activated.  |\r\n   |||| _ Prechecks _ |\r\n   | +1 :green_heart: |  dupname  |   0m  0s |  |  No case conflicting files found.  |\r\n   | +0 :ok: |  codespell  |   0m  0s |  |  codespell was not available.  |\r\n   | +0 :ok: |  detsecrets  |   0m  0s |  |  detect-secrets was not available.  |\r\n   | +1 :green_heart: |  @author  |   0m  0s |  |  The patch does not contain any @author tags.  |\r\n   | +1 :green_heart: |  test4tests  |   0m  0s |  |  The patch appears to include 1 new or modified test files.  |\r\n   |||| _ trunk Compile Tests _ |\r\n   | +1 :green_heart: |  mvninstall  |  36m  1s |  |  trunk passed  |\r\n   | +1 :green_heart: |  compile  |   0m 43s |  |  trunk passed with JDK Ubuntu-11.0.26+4-post-Ubuntu-1ubuntu120.04  |\r\n   | +1 :green_heart: |  compile  |   0m 38s |  |  trunk passed with JDK Private Build-1.8.0_442-8u442-b06~us1-0ubuntu1~20.04-b06  |\r\n   | +1 :green_heart: |  checkstyle  |   0m 33s |  |  trunk passed  |\r\n   | +1 :green_heart: |  mvnsite  |   0m 42s |  |  trunk passed  |\r\n   | +1 :green_heart: |  javadoc  |   0m 42s |  |  trunk passed with JDK Ubuntu-11.0.26+4-post-Ubuntu-1ubuntu120.04  |\r\n   | +1 :green_heart: |  javadoc  |   0m 35s |  |  trunk passed with JDK Private Build-1.8.0_442-8u442-b06~us1-0ubuntu1~20.04-b06  |\r\n   | +1 :green_heart: |  spotbugs  |   1m  8s |  |  trunk passed  |\r\n   | +1 :green_heart: |  shadedclient  |  34m  1s |  |  branch has no errors when building and testing our client artifacts.  |\r\n   | -0 :warning: |  patch  |  34m 22s |  |  Used diff version of patch file. Binary files and potentially other changes not applied. Please rebase and squash commits if necessary.  |\r\n   |||| _ Patch Compile Tests _ |\r\n   | +1 :green_heart: |  mvninstall  |   0m 30s |  |  the patch passed  |\r\n   | +1 :green_heart: |  compile  |   0m 32s |  |  the patch passed with JDK Ubuntu-11.0.26+4-post-Ubuntu-1ubuntu120.04  |\r\n   | +1 :green_heart: |  javac  |   0m 32s |  |  the patch passed  |\r\n   | +1 :green_heart: |  compile  |   0m 29s |  |  the patch passed with JDK Private Build-1.8.0_442-8u442-b06~us1-0ubuntu1~20.04-b06  |\r\n   | +1 :green_heart: |  javac  |   0m 29s |  |  the patch passed  |\r\n   | +1 :green_heart: |  blanks  |   0m  0s |  |  The patch has no blanks issues.  |\r\n   | +1 :green_heart: |  checkstyle  |   0m 21s |  |  the patch passed  |\r\n   | +1 :green_heart: |  mvnsite  |   0m 33s |  |  the patch passed  |\r\n   | +1 :green_heart: |  javadoc  |   0m 28s |  |  the patch passed with JDK Ubuntu-11.0.26+4-post-Ubuntu-1ubuntu120.04  |\r\n   | +1 :green_heart: |  javadoc  |   0m 26s |  |  the patch passed with JDK Private Build-1.8.0_442-8u442-b06~us1-0ubuntu1~20.04-b06  |\r\n   | +1 :green_heart: |  spotbugs  |   1m  7s |  |  the patch passed  |\r\n   | +1 :green_heart: |  shadedclient  |  35m 13s |  |  patch has no errors when building and testing our client artifacts.  |\r\n   |||| _ Other Tests _ |\r\n   | +1 :green_heart: |  unit  |   2m 48s |  |  hadoop-azure in the patch passed.  |\r\n   | +1 :green_heart: |  asflicense  |   0m 38s |  |  The patch does not generate ASF License warnings.  |\r\n   |  |   | 119m 49s |  |  |\r\n   \r\n   \r\n   | Subsystem | Report/Notes |\r\n   |----------:|:-------------|\r\n   | Docker | ClientAPI=1.48 ServerAPI=1.48 base: https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-7376/6/artifact/out/Dockerfile |\r\n   | GITHUB PR | https://github.com/apache/hadoop/pull/7376 |\r\n   | Optional Tests | dupname asflicense compile javac javadoc mvninstall mvnsite unit shadedclient spotbugs checkstyle codespell detsecrets |\r\n   | uname | Linux 88be516bb27f 5.15.0-130-generic #140-Ubuntu SMP Wed Dec 18 17:59:53 UTC 2024 x86_64 x86_64 x86_64 GNU/Linux |\r\n   | Build tool | maven |\r\n   | Personality | dev-support/bin/hadoop.sh |\r\n   | git revision | trunk / 7f3e02a058997b6a002ae459b43cfa8038bcb137 |\r\n   | Default Java | Private Build-1.8.0_442-8u442-b06~us1-0ubuntu1~20.04-b06 |\r\n   | Multi-JDK versions | /usr/lib/jvm/java-11-openjdk-amd64:Ubuntu-11.0.26+4-post-Ubuntu-1ubuntu120.04 /usr/lib/jvm/java-8-openjdk-amd64:Private Build-1.8.0_442-8u442-b06~us1-0ubuntu1~20.04-b06 |\r\n   |  Test Results | https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-7376/6/testReport/ |\r\n   | Max. process+thread count | 555 (vs. ulimit of 5500) |\r\n   | modules | C: hadoop-tools/hadoop-azure U: hadoop-tools/hadoop-azure |\r\n   | Console output | https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-7376/6/console |\r\n   | versions | git=2.25.1 maven=3.6.3 spotbugs=4.2.2 |\r\n   | Powered by | Apache Yetus 0.14.0 https://yetus.apache.org |\r\n   \r\n   \r\n   This message was automatically generated.\r\n   \r\n   \n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-03-12T06:32:23.405+0000", "updated": "2025-03-12T06:32:23.405+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13607272/comment/17934445", "id": "17934445", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "anujmodi2021 merged PR #7376:\nURL: https://github.com/apache/hadoop/pull/7376\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-03-12T07:10:42.127+0000", "updated": "2025-03-12T07:10:42.127+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13607272/comment/17936704", "id": "17936704", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "manika137 opened a new pull request, #7522:\nURL: https://github.com/apache/hadoop/pull/7522\n\n   ### Description of PR\r\n   Commit on trunk: f65e9476f75fd85c544acbc405aaa8dc658d7f78\r\n   PR on trunk: https://github.com/apache/hadoop/pull/7376\r\n   JIRA ticket:  https://issues.apache.org/jira/browse/HADOOP-19446\r\n   \r\n   We have identified a few scenarios worth adding integration or mocked behavior tests for while implementing FNS Support over Blob Endpoint. This PR adds tests for the negative scenarios identified for the delete operation particularly.\r\n   \r\n   Test results to be added....\r\n   \n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-03-19T05:36:34.379+0000", "updated": "2025-03-19T05:36:34.379+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13607272/comment/17936730", "id": "17936730", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "hadoop-yetus commented on PR #7522:\nURL: https://github.com/apache/hadoop/pull/7522#issuecomment-2735640522\n\n   :confetti_ball: **+1 overall**\r\n   \r\n   \r\n   \r\n   \r\n   \r\n   \r\n   | Vote | Subsystem | Runtime |  Logfile | Comment |\r\n   |:----:|----------:|--------:|:--------:|:-------:|\r\n   | +0 :ok: |  reexec  |  12m 59s |  |  Docker mode activated.  |\r\n   |||| _ Prechecks _ |\r\n   | +1 :green_heart: |  dupname  |   0m  0s |  |  No case conflicting files found.  |\r\n   | +0 :ok: |  codespell  |   0m  0s |  |  codespell was not available.  |\r\n   | +0 :ok: |  detsecrets  |   0m  0s |  |  detect-secrets was not available.  |\r\n   | +1 :green_heart: |  @author  |   0m  0s |  |  The patch does not contain any @author tags.  |\r\n   | +1 :green_heart: |  test4tests  |   0m  0s |  |  The patch appears to include 1 new or modified test files.  |\r\n   |||| _ branch-3.4 Compile Tests _ |\r\n   | +1 :green_heart: |  mvninstall  |  35m 58s |  |  branch-3.4 passed  |\r\n   | +1 :green_heart: |  compile  |   0m 36s |  |  branch-3.4 passed with JDK Ubuntu-11.0.26+4-post-Ubuntu-1ubuntu120.04  |\r\n   | +1 :green_heart: |  compile  |   0m 34s |  |  branch-3.4 passed with JDK Private Build-1.8.0_442-8u442-b06~us1-0ubuntu1~20.04-b06  |\r\n   | +1 :green_heart: |  checkstyle  |   0m 29s |  |  branch-3.4 passed  |\r\n   | +1 :green_heart: |  mvnsite  |   0m 38s |  |  branch-3.4 passed  |\r\n   | +1 :green_heart: |  javadoc  |   0m 37s |  |  branch-3.4 passed with JDK Ubuntu-11.0.26+4-post-Ubuntu-1ubuntu120.04  |\r\n   | +1 :green_heart: |  javadoc  |   0m 33s |  |  branch-3.4 passed with JDK Private Build-1.8.0_442-8u442-b06~us1-0ubuntu1~20.04-b06  |\r\n   | +1 :green_heart: |  spotbugs  |   1m  6s |  |  branch-3.4 passed  |\r\n   | +1 :green_heart: |  shadedclient  |  37m 59s |  |  branch has no errors when building and testing our client artifacts.  |\r\n   |||| _ Patch Compile Tests _ |\r\n   | +1 :green_heart: |  mvninstall  |   0m 43s |  |  the patch passed  |\r\n   | +1 :green_heart: |  compile  |   0m 33s |  |  the patch passed with JDK Ubuntu-11.0.26+4-post-Ubuntu-1ubuntu120.04  |\r\n   | +1 :green_heart: |  javac  |   0m 33s |  |  the patch passed  |\r\n   | +1 :green_heart: |  compile  |   0m 29s |  |  the patch passed with JDK Private Build-1.8.0_442-8u442-b06~us1-0ubuntu1~20.04-b06  |\r\n   | +1 :green_heart: |  javac  |   0m 29s |  |  the patch passed  |\r\n   | +1 :green_heart: |  blanks  |   0m  0s |  |  The patch has no blanks issues.  |\r\n   | +1 :green_heart: |  checkstyle  |   0m 19s |  |  the patch passed  |\r\n   | +1 :green_heart: |  mvnsite  |   0m 31s |  |  the patch passed  |\r\n   | +1 :green_heart: |  javadoc  |   0m 26s |  |  the patch passed with JDK Ubuntu-11.0.26+4-post-Ubuntu-1ubuntu120.04  |\r\n   | +1 :green_heart: |  javadoc  |   0m 25s |  |  the patch passed with JDK Private Build-1.8.0_442-8u442-b06~us1-0ubuntu1~20.04-b06  |\r\n   | +1 :green_heart: |  spotbugs  |   1m 10s |  |  the patch passed  |\r\n   | +1 :green_heart: |  shadedclient  |  37m 27s |  |  patch has no errors when building and testing our client artifacts.  |\r\n   |||| _ Other Tests _ |\r\n   | +1 :green_heart: |  unit  |   2m 26s |  |  hadoop-azure in the patch passed.  |\r\n   | +1 :green_heart: |  asflicense  |   0m 36s |  |  The patch does not generate ASF License warnings.  |\r\n   |  |   | 138m  9s |  |  |\r\n   \r\n   \r\n   | Subsystem | Report/Notes |\r\n   |----------:|:-------------|\r\n   | Docker | ClientAPI=1.48 ServerAPI=1.48 base: https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-7522/1/artifact/out/Dockerfile |\r\n   | GITHUB PR | https://github.com/apache/hadoop/pull/7522 |\r\n   | Optional Tests | dupname asflicense compile javac javadoc mvninstall mvnsite unit shadedclient spotbugs checkstyle codespell detsecrets |\r\n   | uname | Linux 839b9c8d3e62 5.15.0-131-generic #141-Ubuntu SMP Fri Jan 10 21:18:28 UTC 2025 x86_64 x86_64 x86_64 GNU/Linux |\r\n   | Build tool | maven |\r\n   | Personality | dev-support/bin/hadoop.sh |\r\n   | git revision | branch-3.4 / d28f2caf116b0e8e87438d4f0605758357eabda8 |\r\n   | Default Java | Private Build-1.8.0_442-8u442-b06~us1-0ubuntu1~20.04-b06 |\r\n   | Multi-JDK versions | /usr/lib/jvm/java-11-openjdk-amd64:Ubuntu-11.0.26+4-post-Ubuntu-1ubuntu120.04 /usr/lib/jvm/java-8-openjdk-amd64:Private Build-1.8.0_442-8u442-b06~us1-0ubuntu1~20.04-b06 |\r\n   |  Test Results | https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-7522/1/testReport/ |\r\n   | Max. process+thread count | 713 (vs. ulimit of 5500) |\r\n   | modules | C: hadoop-tools/hadoop-azure U: hadoop-tools/hadoop-azure |\r\n   | Console output | https://ci-hadoop.apache.org/job/hadoop-multibranch/job/PR-7522/1/console |\r\n   | versions | git=2.25.1 maven=3.6.3 spotbugs=4.2.2 |\r\n   | Powered by | Apache Yetus 0.14.0 https://yetus.apache.org |\r\n   \r\n   \r\n   This message was automatically generated.\r\n   \r\n   \n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-03-19T07:56:05.193+0000", "updated": "2025-03-19T07:56:05.193+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13607272/comment/17936997", "id": "17936997", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "manika137 commented on PR #7522:\nURL: https://github.com/apache/hadoop/pull/7522#issuecomment-2739117606\n\n   ## Test Results\r\n   \r\n   ============================================================\r\n   HNS-OAuth-DFS\r\n   ============================================================\r\n   \r\n   [WARNING] Tests run: 174, Failures: 0, Errors: 0, Skipped: 4\r\n   [WARNING] Tests run: 787, Failures: 0, Errors: 0, Skipped: 159\r\n   [WARNING] Tests run: 171, Failures: 0, Errors: 0, Skipped: 25\r\n   [WARNING] Tests run: 272, Failures: 0, Errors: 0, Skipped: 23\r\n   \r\n   ============================================================\r\n   HNS-SharedKey-DFS\r\n   ============================================================\r\n   \r\n   [WARNING] Tests run: 174, Failures: 0, Errors: 0, Skipped: 5\r\n   [WARNING] Tests run: 787, Failures: 0, Errors: 0, Skipped: 125\r\n   [WARNING] Tests run: 171, Failures: 0, Errors: 0, Skipped: 25\r\n   [WARNING] Tests run: 272, Failures: 0, Errors: 0, Skipped: 10\r\n   \r\n   ============================================================\r\n   NonHNS-SharedKey-DFS\r\n   ============================================================\r\n   \r\n   [WARNING] Tests run: 174, Failures: 0, Errors: 0, Skipped: 11\r\n   [WARNING] Tests run: 771, Failures: 0, Errors: 0, Skipped: 354\r\n   [WARNING] Tests run: 171, Failures: 0, Errors: 0, Skipped: 27\r\n   [WARNING] Tests run: 272, Failures: 0, Errors: 0, Skipped: 11\r\n   \r\n   ============================================================\r\n   AppendBlob-HNS-OAuth-DFS\r\n   ============================================================\r\n   \r\n   [WARNING] Tests run: 174, Failures: 0, Errors: 0, Skipped: 4\r\n   [WARNING] Tests run: 787, Failures: 0, Errors: 0, Skipped: 164\r\n   [WARNING] Tests run: 171, Failures: 0, Errors: 0, Skipped: 49\r\n   [WARNING] Tests run: 272, Failures: 0, Errors: 0, Skipped: 23\r\n   \r\n   ============================================================\r\n   NonHNS-SharedKey-Blob\r\n   ============================================================\r\n   \r\n   [WARNING] Tests run: 174, Failures: 0, Errors: 0, Skipped: 11\r\n   [WARNING] Tests run: 771, Failures: 0, Errors: 0, Skipped: 293\r\n   [WARNING] Tests run: 171, Failures: 0, Errors: 0, Skipped: 28\r\n   [WARNING] Tests run: 272, Failures: 0, Errors: 0, Skipped: 11\r\n   \r\n   ============================================================\r\n   NonHNS-OAuth-DFS\r\n   ============================================================\r\n   \r\n   [WARNING] Tests run: 174, Failures: 0, Errors: 0, Skipped: 11\r\n   [WARNING] Tests run: 771, Failures: 0, Errors: 0, Skipped: 358\r\n   [WARNING] Tests run: 171, Failures: 0, Errors: 0, Skipped: 27\r\n   [WARNING] Tests run: 272, Failures: 0, Errors: 0, Skipped: 24\r\n   \r\n   ============================================================\r\n   NonHNS-OAuth-Blob\r\n   ============================================================\r\n   \r\n   [WARNING] Tests run: 174, Failures: 0, Errors: 0, Skipped: 11\r\n   [WARNING] Tests run: 771, Failures: 0, Errors: 0, Skipped: 297\r\n   [WARNING] Tests run: 171, Failures: 0, Errors: 0, Skipped: 28\r\n   [WARNING] Tests run: 272, Failures: 0, Errors: 0, Skipped: 24\r\n   \r\n   ============================================================\r\n   AppendBlob-NonHNS-OAuth-Blob\r\n   ============================================================\r\n   \r\n   [WARNING] Tests run: 174, Failures: 0, Errors: 0, Skipped: 11\r\n   [WARNING] Tests run: 771, Failures: 0, Errors: 0, Skipped: 316\r\n   [WARNING] Tests run: 171, Failures: 0, Errors: 0, Skipped: 52\r\n   [WARNING] Tests run: 272, Failures: 0, Errors: 0, Skipped: 24\r\n   \r\n   ============================================================\r\n   HNS-Oauth-DFS-IngressBlob\r\n   ============================================================\r\n   \r\n   [WARNING] Tests run: 174, Failures: 0, Errors: 0, Skipped: 4\r\n   [WARNING] Tests run: 787, Failures: 0, Errors: 0, Skipped: 288\r\n   [WARNING] Tests run: 171, Failures: 0, Errors: 0, Skipped: 25\r\n   [WARNING] Tests run: 272, Failures: 0, Errors: 0, Skipped: 23\r\n   \r\n   ============================================================\r\n   NonHNS-OAuth-DFS-IngressBlob\r\n   ============================================================\r\n   \r\n   [WARNING] Tests run: 174, Failures: 0, Errors: 0, Skipped: 11\r\n   [WARNING] Tests run: 771, Failures: 0, Errors: 0, Skipped: 356\r\n   [WARNING] Tests run: 171, Failures: 0, Errors: 0, Skipped: 27\r\n   [WARNING] Tests run: 272, Failures: 0, Errors: 0, Skipped: 24\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-03-20T04:30:14.420+0000", "updated": "2025-03-20T04:30:14.420+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13607272/comment/17937044", "id": "17937044", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "anujmodi2021 merged PR #7522:\nURL: https://github.com/apache/hadoop/pull/7522\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-03-20T08:32:18.734+0000", "updated": "2025-03-20T08:32:18.734+0000"}], "maxResults": 27, "total": 27, "startAt": 0}, "priority": {"self": "https://issues.apache.org/jira/rest/api/2/priority/3", "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg", "name": "Major", "id": "3"}, "status": {"self": "https://issues.apache.org/jira/rest/api/2/status/5", "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.", "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png", "name": "Resolved", "id": "5", "statusCategory": {"self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3", "id": 3, "key": "done", "colorName": "green", "name": "Done"}}}}