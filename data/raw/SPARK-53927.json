{"expand": "renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations", "id": "13631661", "self": "https://issues.apache.org/jira/rest/api/2/issue/13631661", "key": "SPARK-53927", "fields": {"summary": "Kinesis tests are broken", "description": "Running Kinesis test with\u00a0{{ENABLE_KINESIS_TEST=1}} fails with {{java.lang.NoClassDefFoundError}}:\r\n\r\n{code:java}\r\nENABLE_KINESIS_TESTS=1 ./build/sbt -Pkinesis-asl\r\n...\r\nUsing endpoint URL https://kinesis.us-west-2.amazonaws.com for creating Kinesis streams for tests.\r\n[info] WithoutAggregationKinesisBackedBlockRDDSuite:\r\n[info] org.apache.spark.streaming.kinesis.WithoutAggregationKinesisBackedBlockRDDSuite *** ABORTED *** (1 second, 131 milliseconds)\r\n[info]   java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/PropertyNamingStrategy$PascalCaseStrategy\r\n[info]   at com.amazonaws.services.kinesis.AmazonKinesisClient.<clinit>(AmazonKinesisClient.java:86)\r\n[info]   at org.apache.spark.streaming.kinesis.KinesisTestUtils.kinesisClient$lzycompute(KinesisTestUtils.scala:59)\r\n[info]   at org.apache.spark.streaming.kinesis.KinesisTestUtils.kinesisClient(KinesisTestUtils.scala:58)\r\n[info]   at org.apache.spark.streaming.kinesis.KinesisTestUtils.describeStream(KinesisTestUtils.scala:169)\r\n[info]   at org.apache.spark.streaming.kinesis.KinesisTestUtils.findNonExistentStreamName(KinesisTestUtils.scala:182)\r\n[info]   at org.apache.spark.streaming.kinesis.KinesisTestUtils.createStream(KinesisTestUtils.scala:85)\r\n[info]   at org.apache.spark.streaming.kinesis.KinesisBackedBlockRDDTests.$anonfun$beforeAll$1(KinesisBackedBlockRDDSuite.scala:45)\r\n[info]   at org.apache.spark.streaming.kinesis.KinesisFunSuite.runIfTestsEnabled(KinesisFunSuite.scala:41)\r\n[info]   at org.apache.spark.streaming.kinesis.KinesisFunSuite.runIfTestsEnabled$(KinesisFunSuite.scala:39)\r\n[info]   at org.apache.spark.streaming.kinesis.KinesisBackedBlockRDDTests.runIfTestsEnabled(KinesisBackedBlockRDDSuite.scala:26)\r\n[info]   at org.apache.spark.streaming.kinesis.KinesisBackedBlockRDDTests.beforeAll(KinesisBackedBlockRDDSuite.scala:43)\r\n[info]   at org.scalatest.BeforeAndAfterAll.liftedTree1$1(BeforeAndAfterAll.scala:212)\r\n[info]   at org.scalatest.BeforeAndAfterAll.run(BeforeAndAfterAll.scala:210)\r\n[info]   at org.scalatest.BeforeAndAfterAll.run$(BeforeAndAfterAll.scala:208)\r\n[info]   at org.apache.spark.SparkFunSuite.run(SparkFunSuite.scala:68)\r\n[info]   at org.scalatest.tools.Framework.org$scalatest$tools$Framework$$runSuite(Framework.scala:321)\r\n[info]   at org.scalatest.tools.Framework$ScalaTestTask.execute(Framework.scala:517)\r\n[info]   at sbt.ForkMain$Run.lambda$runTest$1(ForkMain.java:414)\r\n[info]   at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n[info]   at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n[info]   at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n[info]   at java.base/java.lang.Thread.run(Thread.java:840)\r\n[info]   Cause: java.lang.ClassNotFoundException: com.fasterxml.jackson.databind.PropertyNamingStrategy$PascalCaseStrategy\r\n[info]   at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\r\n[info]   at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\r\n[info]   at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:525)\r\n[info]   at com.amazonaws.services.kinesis.AmazonKinesisClient.<clinit>(AmazonKinesisClient.java:86)\r\n[info]   at org.apache.spark.streaming.kinesis.KinesisTestUtils.kinesisClient$lzycompute(KinesisTestUtils.scala:59)\r\n[info]   at org.apache.spark.streaming.kinesis.KinesisTestUtils.kinesisClient(KinesisTestUtils.scala:58)\r\n[info]   at org.apache.spark.streaming.kinesis.KinesisTestUtils.describeStream(KinesisTestUtils.scala:169)\r\n[info]   at org.apache.spark.streaming.kinesis.KinesisTestUtils.findNonExistentStreamName(KinesisTestUtils.scala:182)\r\n[info]   at org.apache.spark.streaming.kinesis.KinesisTestUtils.createStream(KinesisTestUtils.scala:85)\r\n[info]   at org.apache.spark.streaming.kinesis.KinesisBackedBlockRDDTests.$anonfun$beforeAll$1(KinesisBackedBlockRDDSuite.scala:45)\r\n[info]   at org.apache.spark.streaming.kinesis.KinesisFunSuite.runIfTestsEnabled(KinesisFunSuite.scala:41)\r\n[info]   at org.apache.spark.streaming.kinesis.KinesisFunSuite.runIfTestsEnabled$(KinesisFunSuite.scala:39)\r\n[info]   at org.apache.spark.streaming.kinesis.KinesisBackedBlockRDDTests.runIfTestsEnabled(KinesisBackedBlockRDDSuite.scala:26)\r\n[info]   at org.apache.spark.streaming.kinesis.KinesisBackedBlockRDDTests.beforeAll(KinesisBackedBlockRDDSuite.scala:43)\r\n[info]   at org.scalatest.BeforeAndAfterAll.liftedTree1$1(BeforeAndAfterAll.scala:212)\r\n[info]   at org.scalatest.BeforeAndAfterAll.run(BeforeAndAfterAll.scala:210)\r\n[info]   at org.scalatest.BeforeAndAfterAll.run$(BeforeAndAfterAll.scala:208)\r\n[info]   at org.apache.spark.SparkFunSuite.run(SparkFunSuite.scala:68)\r\n[info]   at org.scalatest.tools.Framework.org$scalatest$tools$Framework$$runSuite(Framework.scala:321)\r\n[info]   at org.scalatest.tools.Framework$ScalaTestTask.execute(Framework.scala:517)\r\n[info]   at sbt.ForkMain$Run.lambda$runTest$1(ForkMain.java:414)\r\n[info]   at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n[info]   at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n[info]   at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n[info]   at java.base/java.lang.Thread.run(Thread.java:840)\r\n[error] Uncaught exception when running org.apache.spark.streaming.kinesis.WithoutAggregationKinesisBackedBlockRDDSuite: java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/PropertyNamingStrategy$PascalCaseStrategy\r\n{code}\r\n\r\n", "reporter": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=vrozov", "name": "vrozov", "key": "vrozov", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=vrozov&avatarId=24875", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=vrozov&avatarId=24875", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=vrozov&avatarId=24875", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=vrozov&avatarId=24875"}, "displayName": "Vlad Rozov", "active": true, "timeZone": "America/Los_Angeles"}, "comment": {"comments": [{"self": "https://issues.apache.org/jira/rest/api/2/issue/13631661/comment/18030177", "id": "18030177", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=vrozov", "name": "vrozov", "key": "vrozov", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=vrozov&avatarId=24875", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=vrozov&avatarId=24875", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=vrozov&avatarId=24875", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=vrozov&avatarId=24875"}, "displayName": "Vlad Rozov", "active": true, "timeZone": "America/Los_Angeles"}, "body": "Using maven leads to the same error.", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=vrozov", "name": "vrozov", "key": "vrozov", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=vrozov&avatarId=24875", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=vrozov&avatarId=24875", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=vrozov&avatarId=24875", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=vrozov&avatarId=24875"}, "displayName": "Vlad Rozov", "active": true, "timeZone": "America/Los_Angeles"}, "created": "2025-10-15T21:05:08.100+0000", "updated": "2025-10-15T21:05:08.100+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13631661/comment/18030537", "id": "18030537", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=sarutak", "name": "sarutak", "key": "sarutak", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=sarutak&avatarId=20842", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sarutak&avatarId=20842", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sarutak&avatarId=20842", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sarutak&avatarId=20842"}, "displayName": "Kousuke Saruta", "active": true, "timeZone": "Asia/Tokyo"}, "body": "Issue resolved in https://github.com/apache/spark/pull/52630", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=sarutak", "name": "sarutak", "key": "sarutak", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=sarutak&avatarId=20842", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sarutak&avatarId=20842", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sarutak&avatarId=20842", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sarutak&avatarId=20842"}, "displayName": "Kousuke Saruta", "active": true, "timeZone": "Asia/Tokyo"}, "created": "2025-10-17T05:50:26.405+0000", "updated": "2025-10-17T05:50:26.405+0000"}], "maxResults": 2, "total": 2, "startAt": 0}, "priority": {"self": "https://issues.apache.org/jira/rest/api/2/priority/3", "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg", "name": "Major", "id": "3"}, "status": {"self": "https://issues.apache.org/jira/rest/api/2/status/5", "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.", "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png", "name": "Resolved", "id": "5", "statusCategory": {"self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3", "id": 3, "key": "done", "colorName": "green", "name": "Done"}}}}