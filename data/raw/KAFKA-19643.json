{"expand": "renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations", "id": "13627191", "self": "https://issues.apache.org/jira/rest/api/2/issue/13627191", "key": "KAFKA-19643", "fields": {"summary": "Controller keeps switching and occasionally goes offline.", "description": "Inter-cluster communication is normal without packet loss, and the cluster is properly configured.\r\nThe Kafka server continuously prints the following logs:\r\n{code:java}\r\n[2025-08-25 19:08:55,581] INFO [RaftManager id=1] Become candidate due to fetch timeout (org.apache.kafka.raft.KafkaRaftClient)\r\n[2025-08-25 19:08:55,686] INFO [RaftManager id=1] Disconnecting from node 2 due to request timeout. (org.apache.kafka.clients.NetworkClient)\r\n[2025-08-25 19:08:55,686] INFO [RaftManager id=1] Cancelled in-flight FETCH request with correlation id 128927 due to node 2 being disconnected (elapsed time since creation: 5147ms, elapsed time since send: 5146ms, throttle time: 0ms, request timeout: 5000ms) (org.apache.kafka.clients.NetworkClient)\r\n[2025-08-25 19:09:33,274] INFO [NodeToControllerChannelManager id=1 name=heartbeat] Disconnecting from node 3 due to request timeout. (org.apache.kafka.clients.NetworkClient)\r\n[2025-08-25 19:09:33,274] INFO [NodeToControllerChannelManager id=1 name=heartbeat] Cancelled in-flight BROKER_HEARTBEAT request with correlation id 871 due to node 3 being disconnected (elapsed time since creation: 4004ms, elapsed time since send: 4004ms, throttle time: 0ms, request timeout: 4000ms) (org.apache.kafka.clients.NetworkClient)\r\n[2025-08-25 19:09:33,807] INFO [RaftManager id=1] Disconnecting from node 3 due to request timeout. (org.apache.kafka.clients.NetworkClient)\r\n[2025-08-25 19:09:33,807] INFO [RaftManager id=1] Cancelled in-flight FETCH request with correlation id 128995 due to node 3 being disconnected (elapsed time since creation: 5720ms, elapsed time since send: 5720ms, throttle time: 0ms, request timeout: 5000ms) (org.apache.kafka.clients.NetworkClient) {code}\r\nAdjust Kafka parameters as follows:\r\n{code:java}\r\n# default 2000\r\nbroker.heartbeat.interval.ms=4000\r\n# default 9000\r\nbroker.session.timeout.ms=10000\r\n# default 2000\r\ncontroller.quorum.request.timeout.ms=5000\r\n# default 1000\r\ncontroller.quorum.election.timeout.ms=5000\r\n# default 1000\r\ncontroller.quorum.election.backoff.max.ms=3000\r\n# default 2000\r\ncontroller.quorum.fetch.timeout.ms=6000 {code}", "reporter": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=zzshine", "name": "zzshine", "key": "zzshine", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34050", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34050", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34050", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34050"}, "displayName": "zzshine", "active": true, "timeZone": "Etc/UTC"}, "comment": {"comments": [], "maxResults": 0, "total": 0, "startAt": 0}, "priority": {"self": "https://issues.apache.org/jira/rest/api/2/priority/3", "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg", "name": "Major", "id": "3"}, "status": {"self": "https://issues.apache.org/jira/rest/api/2/status/1", "description": "The issue is open and ready for the assignee to start work on it.", "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png", "name": "Open", "id": "1", "statusCategory": {"self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2", "id": 2, "key": "new", "colorName": "blue-gray", "name": "To Do"}}}}