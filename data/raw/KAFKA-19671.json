{"expand": "renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations", "id": "13628142", "self": "https://issues.apache.org/jira/rest/api/2/issue/13628142", "key": "KAFKA-19671", "fields": {"summary": "benchmark_test is throwing `NullPointerException`", "description": "When benchmark_test is run using docker, following error is thrown in both native and JVM modes. ChatGPT suggested to use a JDK image with latest patch release({{{}17.0.12+7{}}} or {{21.0.4+7)}} and it worked. Maybe we might want to upgrade our JDK image too\r\n{code:java}\r\n[INFO:2025-09-03 09:41:49,007]: RunnerClient: kafkatest.benchmarks.core.benchmark_test.Benchmark.test_producer_throughput.acks=-1.topic=topic-replication-factor-three.metadata_quorum=ISOLATED_KRAFT: FAIL: RemoteCommandError({'ssh_config': {'host': 'ducker02', 'hostname': 'ducker02', 'user': 'ducker', 'port': 22, 'password': '', 'identityfile': '/home/ducker/.ssh/id_rsa', 'connecttimeout': None}, 'hostname': 'ducker02', 'ssh_hostname': 'ducker02', 'user': 'ducker', 'externally_routable_ip': 'ducker02', '_logger': <Logger kafkatest.benchmarks.core.benchmark_test.Benchmark.test_producer_throughput.acks=-1.topic=topic-replication-factor-three.metadata_quorum=ISOLATED_KRAFT-1 (DEBUG)>, 'os': 'linux', '_ssh_client': <paramiko.client.SSHClient object at 0x702faf3c0280>, '_sftp_client': <paramiko.sftp_client.SFTPClient object at 0x702faf3c0400>, '_custom_ssh_exception_checks': None}, '/opt/kafka-dev/bin/kafka-storage.sh format --ignore-formatted --config /mnt/kafka/kafka.properties --cluster-id I2eXt9rvSnyhct8BYmW6-w --feature transaction.version=0', 1, b'java.lang.NullPointerException: Cannot invoke \"jdk.internal.platform.CgroupInfo.getMountPoint()\" because \"anyController\" is null\\n\\tat java.base/jdk.internal.platform.cgroupv3.CgroupV2Subsystem.getInstance(CgroupV2Subsystem.java:81)\\n\\tat java.base/jdk.internal.platform.CgroupSubsystemFactory.create(CgroupSubsystemFactory.java:113)\\n\\tat java.base/jdk.internal.platform.CgroupMetrics.getInstance(CgroupMetrics.java:167)\\n\\tat java.base/jdk.internal.platform.SystemMetrics.instance(SystemMetrics.java:29)\\n\\tat java.base/jdk.internal.platform.Metrics.systemMetrics(Metrics.java:58)\\n\\tat java.base/jdk.internal.platform.Container.metrics(Container.java:43)\\n\\tat jdk.management/com.sun.management.internal.OperatingSystemImpl.<init>(OperatingSystemImpl.java:182)\\n\\tat jdk.management/com.sun.management.internal.PlatformMBeanProviderImpl.getOperatingSystemMXBean(PlatformMBeanProviderImpl.java:280)\\n\\tat jdk.management/com.sun.management.internal.PlatformMBeanProviderImpl$3.nameToMBeanMap(PlatformMBeanProviderImpl.java:199)\\n\\tat java.management/java.lang.management.ManagementFactory.lambda$getPlatformMBeanServer$0(ManagementFactory.java:488)\\n\\tat java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:273)\\n\\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\\n\\tat java.base/java.util.HashMap$ValueSpliterator.forEachRemaining(HashMap.java:1779)\\n\\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\\n\\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\\n\\tat java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\\n\\tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\\n\\tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\\n\\tat java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)\\n\\tat java.management/java.lang.management.ManagementFactory.getPlatformMBeanServer(ManagementFactory.java:489)\\n\\tat jdk.management.agent/sun.management.jmxremote.ConnectorBootstrap.startLocalConnectorServer(ConnectorBootstrap.java:543)\\n\\tat jdk.management.agent/jdk.internal.agent.Agent.startLocalManagementAgent(Agent.java:318)\\n\\tat jdk.management.agent/jdk.internal.agent.Agent.startAgent(Agent.java:450)\\n\\tat jdk.management.agent/jdk.internal.agent.Agent.startAgent(Agent.java:599)\\nException thrown by the agent : java.lang.NullPointerException: Cannot invoke \"jdk.internal.platform.CgroupInfo.getMountPoint()\" because \"anyController\" is null\\n') {code}\r\ncmd: `TC_PATHS=\"tests/kafkatest/benchmarks/core/benchmark_test.py\" bash tests/docker/run_tests.sh > benchmark_test.log`\r\n\r\nimage which worked for me: `azul/zulu-openjdk:17`\r\n\r\n\u00a0\r\n\r\n\u00a0", "reporter": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=aheev", "name": "aheev", "key": "JIRAUSER310228", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=34048", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=34048", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=34048", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=34048"}, "displayName": "ally heev", "active": true, "timeZone": "Asia/Kolkata"}, "comment": {"comments": [], "maxResults": 0, "total": 0, "startAt": 0}, "priority": {"self": "https://issues.apache.org/jira/rest/api/2/priority/3", "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg", "name": "Major", "id": "3"}, "status": {"self": "https://issues.apache.org/jira/rest/api/2/status/1", "description": "The issue is open and ready for the assignee to start work on it.", "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/open.png", "name": "Open", "id": "1", "statusCategory": {"self": "https://issues.apache.org/jira/rest/api/2/statuscategory/2", "id": 2, "key": "new", "colorName": "blue-gray", "name": "To Do"}}}}