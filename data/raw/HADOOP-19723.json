{"expand": "renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations", "id": "13631109", "self": "https://issues.apache.org/jira/rest/api/2/issue/13631109", "key": "HADOOP-19723", "fields": {"summary": "Build multi-arch hadoop image", "description": "Build {{apache/hadoop}} Docker image for both amd64 and arm64.", "reporter": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=adoroszlai", "name": "adoroszlai", "key": "adoroszlai", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=adoroszlai&avatarId=29776", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=adoroszlai&avatarId=29776", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=adoroszlai&avatarId=29776", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=adoroszlai&avatarId=29776"}, "displayName": "Attila Doroszlai", "active": true, "timeZone": "Europe/Budapest"}, "comment": {"comments": [{"self": "https://issues.apache.org/jira/rest/api/2/issue/13631109/comment/18028773", "id": "18028773", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "adoroszlai opened a new pull request, #8023:\nURL: https://github.com/apache/hadoop/pull/8023\n\n   ## What changes were proposed in this pull request?\r\n   \r\n   - Update `Dockerfile` (on branch `docker-hadoop-3.4.2-lean`) to support building for `arm64`, too.\r\n       - Use `ghcr.io/apache/hadoop-runner:jdk11-u2204` as base, because `apache/hadoop-runner:latest` only has `amd64` image available.\r\n       - Use `TARGETPLATFORM` to decide which tarball to use.\r\n       - Create args for version and flavor, replacing URL.\r\n   - Update the `build-hadoop-image` workflow to create multi-arch images.\r\n   - Add build-arg `BASE_URL` to allow using mirrors (for faster local build).\r\n   - Replace deprecated `ENV HADOOP_CONF_DIR ` syntax.\r\n   \r\n   https://issues.apache.org/jira/browse/HADOOP-19723\r\n   \r\n   ## How was this patch tested?\r\n   \r\n   Workflow [run](https://github.com/adoroszlai/hadoop/actions/runs/18377713437) in my fork created multi-arch [image](https://github.com/adoroszlai/hadoop/pkgs/container/hadoop/539671710?tag=HADOOP-19723).\r\n   \r\n   ```\r\n   #8 0.060 Building for linux/amd64\r\n   ...\r\n   #8 0.060 + export HADOOP_URL=https://dlcdn.apache.org/hadoop/common/hadoop-3.4.2/hadoop-3.4.2-lean.tar.gz\r\n   ...\r\n   \r\n   #10 0.076 Building for linux/arm64\r\n   ...\r\n   #10 0.077 + export HADOOP_URL=https://dlcdn.apache.org/hadoop/common/hadoop-3.4.2/hadoop-3.4.2-aarch64-lean.tar.gz\r\n   ```\r\n   \r\n   Tested on both amd64 and arm64 platforms.\r\n   \r\n   ```\r\n   $ docker run -it --rm ghcr.io/adoroszlai/hadoop:HADOOP-19723 bash -c \"uname -a; hadoop version\"\r\n   Linux cdb5cdd5ace9 6.8.0-65-generic #68~22.04.1-Ubuntu SMP PREEMPT_DYNAMIC Tue Jul 15 18:06:34 UTC 2 x86_64 x86_64 x86_64 GNU/Linux\r\n   Hadoop 3.4.2\r\n   Source code repository https://github.com/apache/hadoop.git -r 84e8b89ee2ebe6923691205b9e171badde7a495c\r\n   Compiled by ahmarsu on 2025-08-20T10:30Z\r\n   Compiled on platform linux-x86_64\r\n   Compiled with protoc 3.23.4\r\n   From source with checksum fa94c67d4b4be021b9e9515c9b0f7b6\r\n   This command was run using /opt/hadoop/share/hadoop/common/hadoop-common-3.4.2.jar\r\n   ```\r\n   \r\n   ```\r\n   $ docker run -it --rm ghcr.io/adoroszlai/hadoop:HADOOP-19723 bash -c \"uname -a; hadoop version\"\r\n   Linux 9a1237ba8fbc 6.10.14-linuxkit #1 SMP Thu Oct 24 19:28:55 UTC 2024 aarch64 aarch64 aarch64 GNU/Linux\r\n   Hadoop 3.4.2\r\n   Source code repository https://github.com/apache/hadoop.git -r e1c0dee881820a4d834ec4a4d2c70d0d953bb933\r\n   Compiled by ahmar on 2025-08-07T15:32Z\r\n   Compiled on platform linux-aarch_64\r\n   Compiled with protoc 3.23.4\r\n   From source with checksum fa94c67d4b4be021b9e9515c9b0f7b6\r\n   This command was run using /opt/hadoop/share/hadoop/common/hadoop-common-3.4.2.jar\r\n   ```\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-10-09T13:28:31.642+0000", "updated": "2025-10-09T13:28:31.642+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13631109/comment/18028776", "id": "18028776", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "slfan1989 commented on PR #8023:\nURL: https://github.com/apache/hadoop/pull/8023#issuecomment-3385915162\n\n   LGTM.\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-10-09T13:32:27.838+0000", "updated": "2025-10-09T13:32:27.838+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13631109/comment/18028778", "id": "18028778", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "slfan1989 commented on PR #8023:\nURL: https://github.com/apache/hadoop/pull/8023#issuecomment-3385930578\n\n   @adoroszlai Thank you for the contribution. If there are no additional comments, I\u2019ll proceed to merge this PR shortly.\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-10-09T13:36:31.183+0000", "updated": "2025-10-09T13:36:31.183+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13631109/comment/18028836", "id": "18028836", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "adoroszlai commented on PR #8023:\nURL: https://github.com/apache/hadoop/pull/8023#issuecomment-3386892439\n\n   @smengcl would you like to take a look?\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-10-09T17:36:49.722+0000", "updated": "2025-10-09T17:36:49.722+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13631109/comment/18028921", "id": "18028921", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "slfan1989 commented on PR #8023:\nURL: https://github.com/apache/hadoop/pull/8023#issuecomment-3388049001\n\n   > @smengcl would you like to take a look?\r\n   \r\n   @smengcl I believe this PR is fine, and since @adoroszlai  has extensive experience with this, any issues that may arise in the future can be quickly addressed. I will go ahead and merge this PR.\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-10-10T02:17:01.464+0000", "updated": "2025-10-10T02:17:01.464+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13631109/comment/18028923", "id": "18028923", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "slfan1989 merged PR #8023:\nURL: https://github.com/apache/hadoop/pull/8023\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-10-10T02:18:07.403+0000", "updated": "2025-10-10T02:18:07.403+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13631109/comment/18028950", "id": "18028950", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "adoroszlai commented on PR #8023:\nURL: https://github.com/apache/hadoop/pull/8023#issuecomment-3388373138\n\n   Thanks @slfan1989 for reviewing and merging this.\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-10-10T05:46:22.120+0000", "updated": "2025-10-10T05:46:22.120+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13631109/comment/18028951", "id": "18028951", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "body": "smengcl commented on PR #8023:\nURL: https://github.com/apache/hadoop/pull/8023#issuecomment-3388411324\n\n   Thanks @adoroszlai . The patch looks good.\r\n   \r\n   Thanks @slfan1989 for reviewing this as well.\n\n\n", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=githubbot", "name": "githubbot", "key": "githubbot", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?avatarId=10452", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"}, "displayName": "ASF GitHub Bot", "active": true, "timeZone": "Etc/UTC"}, "created": "2025-10-10T06:07:00.188+0000", "updated": "2025-10-10T06:07:00.188+0000"}], "maxResults": 8, "total": 8, "startAt": 0}, "priority": {"self": "https://issues.apache.org/jira/rest/api/2/priority/3", "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg", "name": "Major", "id": "3"}, "status": {"self": "https://issues.apache.org/jira/rest/api/2/status/5", "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.", "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png", "name": "Resolved", "id": "5", "statusCategory": {"self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3", "id": 3, "key": "done", "colorName": "green", "name": "Done"}}}}