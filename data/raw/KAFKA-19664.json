{"expand": "renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations", "id": "13627869", "self": "https://issues.apache.org/jira/rest/api/2/issue/13627869", "key": "KAFKA-19664", "fields": {"summary": "Support building with Java 25 (LTS release)", "description": "*Depends upon/blocked by:*\r\n * Kafka ticket: KAFKA-19174 Gradle version upgrade 8 -->> 9 (review is under way)\r\n * Spotbugs next version:\r\n ** [https://github.com/spotbugs/spotbugs/issues/3564]\r\n ** [https://github.com/spotbugs/spotbugs/issues/3569]\r\n ** https://issues.apache.org/jira/browse/BCEL-377\u00a0\r\n ** [https://github.com/spotbugs/spotbugs/pull/3712]\r\n ** [https://github.com/spotbugs/spotbugs/discussions/3380]\u00a0\r\n\r\n*Related links:*\r\n * JDK 25 release date: September 16th 2025:\r\n ** [https://mail.openjdk.org/pipermail/announce/2025-September/000360.html]\r\n ** [https://openjdk.org/projects/jdk/25]\r\n * Gradle 9.1 will support Java 25: [https://docs.gradle.org/9.1.0/release-notes.html#support-for-java-25]\r\n * Scala 2.13.17 is also announced:\r\n ** [https://docs.scala-lang.org/overviews/jdk-compatibility/overview.html#jdk-25-compatibility-notes]\r\n ** [https://contributors.scala-lang.org/t/scala-2-13-17-release-planning/6994/10]\r\n ** [https://github.com/scala/scala/milestone/109]\r\n * other related links:\r\n ** [https://github.com/adoptium/temurin/issues/96]\r\n ** [https://launchpad.net/ubuntu/+source/openjdk-25]\r\n ** [https://github.com/actions/setup-java/issues/899]\r\n\r\n*Related Github PR:* [https://github.com/apache/kafka/pull/20295] _*MINOR: Run CI with Java 24*_\r\n\r\nFYI [~ijuma] [~chia7712]\u00a0", "reporter": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=dejan2609", "name": "dejan2609", "key": "dejan2609", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=dejan2609&avatarId=29049", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dejan2609&avatarId=29049", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dejan2609&avatarId=29049", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dejan2609&avatarId=29049"}, "displayName": "Dejan Stojadinovi\u0107", "active": true, "timeZone": "Europe/Belgrade"}, "comment": {"comments": [{"self": "https://issues.apache.org/jira/rest/api/2/issue/13627869/comment/18023838", "id": "18023838", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=dejan2609", "name": "dejan2609", "key": "dejan2609", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=dejan2609&avatarId=29049", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dejan2609&avatarId=29049", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dejan2609&avatarId=29049", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dejan2609&avatarId=29049"}, "displayName": "Dejan Stojadinovi\u0107", "active": true, "timeZone": "Europe/Belgrade"}, "body": "Update: *Mockito* version needs to be upgraded to resolve build issues (see the output of *_./gradlew test_* below).\r\n\r\n*Related links:*\r\n * https://issues.apache.org/jira/browse/SOLR-17718\r\n * [https://github.com/mockito/mockito/issues/3647]\r\n * [https://github.com/mockito/mockito/releases/tag/v5.20.0]\r\n\r\n{code:java}\r\nGroupCoordinatorShardTest > testReplayStreamsGroupTargetAssignmentMember() FAILED\r\n    org.mockito.exceptions.base.MockitoException: \r\n    Mockito cannot mock this class: class org.apache.kafka.coordinator.group.GroupMetadataManager.\r\n\r\n    If you're not sure why you're getting this error, please open an issue on GitHub.\r\n\r\n\r\n    Java               : 25\r\n    JVM vendor name    : Eclipse Adoptium\r\n    JVM vendor version : 25+36-LTS\r\n    JVM name           : OpenJDK 64-Bit Server VM\r\n    JVM version        : 25+36-LTS\r\n    JVM info           : mixed mode, sharing\r\n    OS name            : Linux\r\n    OS version         : 6.8.0-84-generic\r\n\r\n\r\n    You are seeing this disclaimer because Mockito is configured to create inlined mocks.\r\n    You can learn about inline mocks and their limitations under item #39 of the Mockito class javadoc.\r\n\r\n    Underlying exception : org.mockito.exceptions.base.MockitoException: Could not modify all classes [class java.lang.Object, class org.apache.kafka.coordinator.group.GroupMetadataManager]\r\n        at app//org.apache.kafka.coordinator.group.GroupCoordinatorShardTest.testReplayStreamsGroupTargetAssignmentMember(GroupCoordinatorShardTest.java:1117)\r\n\r\n        Caused by:\r\n        org.mockito.exceptions.base.MockitoException: Could not modify all classes [class java.lang.Object, class org.apache.kafka.coordinator.group.GroupMetadataManager]\r\n            at app//net.bytebuddy.TypeCache.findOrInsert(TypeCache.java:168)\r\n            at app//net.bytebuddy.TypeCache$WithInlineExpunction.findOrInsert(TypeCache.java:399)\r\n            at app//net.bytebuddy.TypeCache.findOrInsert(TypeCache.java:190)\r\n            at app//net.bytebuddy.TypeCache$WithInlineExpunction.findOrInsert(TypeCache.java:410)\r\n            ... 1 more\r\n\r\n            Caused by:\r\n            java.lang.IllegalStateException: \r\n            Byte Buddy could not instrument all classes within the mock's type hierarchy\r\n\r\n            This problem should never occur for javac-compiled classes. This problem has been observed for classes that are:\r\n             - Compiled by older versions of scalac\r\n             - Classes that are part of the Android distribution\r\n                at org.mockito.internal.creation.bytebuddy.InlineBytecodeGenerator.triggerRetransformation(InlineBytecodeGenerator.java:285)\r\n                at org.mockito.internal.creation.bytebuddy.InlineBytecodeGenerator.mockClass(InlineBytecodeGenerator.java:218)\r\n                at org.mockito.internal.creation.bytebuddy.TypeCachingBytecodeGenerator.lambda$mockClass$0(TypeCachingBytecodeGenerator.java:78)\r\n                at net.bytebuddy.TypeCache.findOrInsert(TypeCache.java:168)\r\n                at net.bytebuddy.TypeCache$WithInlineExpunction.findOrInsert(TypeCache.java:399)\r\n                at net.bytebuddy.TypeCache.findOrInsert(TypeCache.java:190)\r\n                at net.bytebuddy.TypeCache$WithInlineExpunction.findOrInsert(TypeCache.java:410)\r\n                at org.mockito.internal.creation.bytebuddy.TypeCachingBytecodeGenerator.mockClass(TypeCachingBytecodeGenerator.java:75)\r\n                at org.mockito.internal.creation.bytebuddy.InlineDelegateByteBuddyMockMaker.createMockType(InlineDelegateByteBuddyMockMaker.java:408)\r\n                at org.mockito.internal.creation.bytebuddy.InlineDelegateByteBuddyMockMaker.doCreateMock(InlineDelegateByteBuddyMockMaker.java:367)\r\n                at org.mockito.internal.creation.bytebuddy.InlineDelegateByteBuddyMockMaker.createMock(InlineDelegateByteBuddyMockMaker.java:346)\r\n                at org.mockito.internal.creation.bytebuddy.InlineByteBuddyMockMaker.createMock(InlineByteBuddyMockMaker.java:56)\r\n                at org.mockito.internal.util.MockUtil.createMock(MockUtil.java:99)\r\n                at org.mockito.internal.MockitoCore.mock(MockitoCore.java:84)\r\n                at org.mockito.Mockito.mock(Mockito.java:2162)\r\n                at org.mockito.Mockito.mock(Mockito.java:2077)\r\n                ... 1 more\r\n\r\n                Caused by:\r\n                java.lang.IllegalArgumentException: Java 25 (69) is not supported by the current version of Byte Buddy which officially supports Java 24 (68) - update Byte Buddy or set net.bytebuddy.experimental as a VM property\r\n                    at net.bytebuddy.utility.OpenedClassReader.of(OpenedClassReader.java:120)\r\n                    at net.bytebuddy.utility.OpenedClassReader.of(OpenedClassReader.java:95)\r\n                    at net.bytebuddy.utility.AsmClassReader$Factory$Default.make(AsmClassReader.java:82)\r\n                    at net.bytebuddy.dynamic.scaffold.TypeWriter$Default$ForInlining.create(TypeWriter.java:4036)\r\n                    at net.bytebuddy.dynamic.scaffold.TypeWriter$Default.make(TypeWriter.java:2246)\r\n                    at net.bytebuddy.dynamic.DynamicType$Builder$AbstractBase$UsingTypeWriter.make(DynamicType.java:4057)\r\n                    at net.bytebuddy.dynamic.DynamicType$Builder$AbstractBase.make(DynamicType.java:3741)\r\n                    at org.mockito.internal.creation.bytebuddy.InlineBytecodeGenerator.transform(InlineBytecodeGenerator.java:402)\r\n                    at java.instrument/java.lang.instrument.ClassFileTransformer.transform(ClassFileTransformer.java:257)\r\n                    at java.instrument/sun.instrument.TransformerManager.transform(TransformerManager.java:188)\r\n                    at java.instrument/sun.instrument.InstrumentationImpl.transform(InstrumentationImpl.java:594)\r\n                    at java.instrument/sun.instrument.InstrumentationImpl.retransformClasses0(Native Method)\r\n                    at java.instrument/sun.instrument.InstrumentationImpl.retransformClasses(InstrumentationImpl.java:221)\r\n                    at org.mockito.internal.creation.bytebuddy.InlineBytecodeGenerator.triggerRetransformation(InlineBytecodeGenerator.java:281)\r\n                    ... 16 more\r\norg.apache.kafka.coordinator.group.GroupCoordinatorServiceTest.testFetchOffsetsWithWrappedError(boolean, Errors, Errors)[2] failed, log available in /home/dejan/kafka/group-coordinator/build/reports/testOutput/org.apache.kafka.coordinator.group.GroupCoordinatorServiceTest.testFetchOffsetsWithWrappedError(boolean, Errors, Errors)[2].test.stdout\r\n{code}", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=dejan2609", "name": "dejan2609", "key": "dejan2609", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=dejan2609&avatarId=29049", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dejan2609&avatarId=29049", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dejan2609&avatarId=29049", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dejan2609&avatarId=29049"}, "displayName": "Dejan Stojadinovi\u0107", "active": true, "timeZone": "Europe/Belgrade"}, "created": "2025-09-30T15:29:06.146+0000", "updated": "2025-10-06T20:15:08.409+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13627869/comment/18024289", "id": "18024289", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=dejan2609", "name": "dejan2609", "key": "dejan2609", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=dejan2609&avatarId=29049", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dejan2609&avatarId=29049", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dejan2609&avatarId=29049", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dejan2609&avatarId=29049"}, "displayName": "Dejan Stojadinovi\u0107", "active": true, "timeZone": "Europe/Belgrade"}, "body": "*Small update:*\r\n * Gradle version upgrade (8.14.3 -->> 9.1.0) will hopefully end up in trunk in the next few days\r\n * It seems that Apache *{{commons-bcel}}* will release Java 25 compatible version soon enough - this is important for us because SpotBugs Java 25 compatible versions will follow immediately", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=dejan2609", "name": "dejan2609", "key": "dejan2609", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=dejan2609&avatarId=29049", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dejan2609&avatarId=29049", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dejan2609&avatarId=29049", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dejan2609&avatarId=29049"}, "displayName": "Dejan Stojadinovi\u0107", "active": true, "timeZone": "Europe/Belgrade"}, "created": "2025-10-02T14:33:52.027+0000", "updated": "2025-10-02T14:33:52.027+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13627869/comment/18028189", "id": "18028189", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=dejan2609", "name": "dejan2609", "key": "dejan2609", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=dejan2609&avatarId=29049", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dejan2609&avatarId=29049", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dejan2609&avatarId=29049", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dejan2609&avatarId=29049"}, "displayName": "Dejan Stojadinovi\u0107", "active": true, "timeZone": "Europe/Belgrade"}, "body": "*Update:*\r\n* A few of the tests are failing with Java 25 (x)\r\n* ticket is created here: KAFKA-19769 (i)", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=dejan2609", "name": "dejan2609", "key": "dejan2609", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=dejan2609&avatarId=29049", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dejan2609&avatarId=29049", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dejan2609&avatarId=29049", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dejan2609&avatarId=29049"}, "displayName": "Dejan Stojadinovi\u0107", "active": true, "timeZone": "Europe/Belgrade"}, "created": "2025-10-07T20:00:13.128+0000", "updated": "2025-10-07T20:00:13.128+0000"}, {"self": "https://issues.apache.org/jira/rest/api/2/issue/13627869/comment/18028317", "id": "18028317", "author": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=dejan2609", "name": "dejan2609", "key": "dejan2609", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=dejan2609&avatarId=29049", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dejan2609&avatarId=29049", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dejan2609&avatarId=29049", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dejan2609&avatarId=29049"}, "displayName": "Dejan Stojadinovi\u0107", "active": true, "timeZone": "Europe/Belgrade"}, "body": "Solution has been merged into a trunk: [https://github.com/apache/kafka/commit/ede6c90dfb5fa5faa7472541dde3bcc90cbd68d3] :D\r\n\r\nFollow-up ticket is created here: KAFKA-19771", "updateAuthor": {"self": "https://issues.apache.org/jira/rest/api/2/user?username=dejan2609", "name": "dejan2609", "key": "dejan2609", "avatarUrls": {"48x48": "https://issues.apache.org/jira/secure/useravatar?ownerId=dejan2609&avatarId=29049", "24x24": "https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dejan2609&avatarId=29049", "16x16": "https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dejan2609&avatarId=29049", "32x32": "https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dejan2609&avatarId=29049"}, "displayName": "Dejan Stojadinovi\u0107", "active": true, "timeZone": "Europe/Belgrade"}, "created": "2025-10-08T09:19:54.134+0000", "updated": "2025-10-08T09:19:54.134+0000"}], "maxResults": 4, "total": 4, "startAt": 0}, "priority": {"self": "https://issues.apache.org/jira/rest/api/2/priority/3", "iconUrl": "https://issues.apache.org/jira/images/icons/priorities/major.svg", "name": "Major", "id": "3"}, "status": {"self": "https://issues.apache.org/jira/rest/api/2/status/5", "description": "A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.", "iconUrl": "https://issues.apache.org/jira/images/icons/statuses/resolved.png", "name": "Resolved", "id": "5", "statusCategory": {"self": "https://issues.apache.org/jira/rest/api/2/statuscategory/3", "id": 3, "key": "done", "colorName": "green", "name": "Done"}}}}